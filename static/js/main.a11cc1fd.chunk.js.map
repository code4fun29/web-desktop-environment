{"version":3,"sources":["utils/Emitter.ts","state/WindowManager.ts","crossByPassHack.tsx","components/card.tsx","components/textField.tsx","components/button.tsx","loginScreen/Login.tsx","components/icon.tsx","components/mountUnmountAnimation.tsx","contexts.ts","components/stateComponent.tsx","utils/colors.ts","gtk-broadway-display/index.js","views/Desktop.tsx","theme.ts","views/wrapper/ThemeProvider.tsx","views/Window.tsx","utils/tasks.ts","views/apps/utils/Terminal.tsx","views/apps/utils/Explorer.tsx","views/apps/shared/FileViewer.tsx","views/apps/utils/Notepad.tsx","views/apps/media/MediaPlayer.tsx","views/apps/system/Settings.tsx","views/apps/thirdParty/Iframe.tsx","views/apps/shared/LoadingScreen.tsx","demo/App.tsx","views/native/host/Desktop.tsx","views/native/host/Window.tsx","views/native/client/Window.tsx","index.tsx","utils/setupDocument.ts","gtk-broadway-display/state.ts"],"names":["emitter","setMaxListeners","call","event","data","emit","on","listener","remove","off","windows","windowsLayers","windowsMinMaxLayer","min","max","reloadWindowsLayers","currentZIndex","reverse","forEach","id","layer","setActiveWindow","activeWindowId","filter","currentId","push","idIndex","addWindow","name","icon","state","newWindow","window","closeWindow","windowToClose","find","w","updateState","newState","currentWindow","minimized","WindowManager","WebSocket","useStyle","makeStyles","theme","root","padding","borderRadius","boxShadow","shadowColor","mainBackground","background","main","darkBackground","dark","lightBackground","light","mainBackgroundTransparent","transparent","darkBackgroundTransparent","transparentDark","lightBackgroundTransparent","transparentLight","children","className","colorVariant","classes","backgroundClassesMap","color","variant","value","onChange","defaultValue","border","placeholder","borderBottom","selectedColor","useTheme","textColor","text","borderValue","borderBottomValue","backgroundColor","maxHeight","fontSize","outline","currentValue","setCurrentValue","e","newValue","target","onClick","style","shadow","backgroundColorMap","backgroundColorHover","minHeight","minWidth","display","justifyContent","alignItems","cursor","backgroundBlendMode","useStyles","position","width","height","card","maxWidth","flexDirection","backdropFilter","userSelect","barButtonsContainer","top","left","barButton","zIndex","barButtonExit","error","flex","barButtonCollaps","success","link","textDecoration","props","host","setHost","port","setPort","https","String","Number","onLogin","to","containerClassName","createElement","mount","setMount","onAnimationEnd","ConnectionContext","createContext","undefined","realstate","defaultState","setState","componentDidMount","onMount","render","this","Component","alpha","setAlpha","toHex8","padZero","str","Array","join","slice","invertColor","hex","indexOf","length","Error","r","parseInt","toString","g","b","inflateRaw","default","GTKBridgeEmitter","rootDiv","document","body","appendChild","grab","Object","ownerEvents","implicit","lastState","keyDownList","lastSerial","lastX","lastY","lastTimeStamp","realWindowWithMouse","windowWithMouse","surfaces","stackingOrder","outstandingCommands","inputSocket","fakeInput","showKeyboard","showKeyboardChanged","firstTouchDownId","getButtonMask","button","sendConfigureNotify","surface","sendInput","x","y","cmdCreateSurface","isTemp","positioned","transientParent","visible","imageData","toplevelElement","canvas","type","currentLayer","addEventListener","focus","doBeforeEveryFrame","requestAnimationFrame","i","setInterval","contains","clearInterval","cmdShowSurface","xOffset","yOffset","restackWindows","cmdHideSurface","doUngrab","cmdSetTransientFor","parentId","moveToHelper","v","cid","splice","child","cmdDeleteSurface","parentNode","removeChild","cmdMoveResizeSurface","has_pos","has_size","h","tmpCanvas","ownerDocument","tmpContext","getContext","globalCompositeOperation","drawImage","context","resizeCanvas","element","cmdRaiseSurface","cmdLowerSurface","copyRect","src","srcX","srcY","dest","destX","destY","srcRect","destRect","line","subarray","set","markRun","start","markRect","decodeBuffer","oldData","debug","createImageData","len","cmd","blockid","block_stride","console","cmdPutBuffer","compressed","putImageData","cmdGrabPointer","doGrab","active","handleCommands","oncontextmenu","onMouseMove","onMouseOver","onMouseDown","onMouseUp","onKeyDown","onKeyPress","onKeyUp","onMouseWheel","onTouchStart","onTouchMove","onTouchEnd","attachEvent","setupDocument","innerWidth","innerHeight","onresize","ev","pos","command","get_char","get_32","innerHTML","get_16","log","get_16s","get_bool","ops","get_flags","get_data","BinCommands","message","arraybuffer","u8","Uint8Array","handleMessage","shift","unshift","handleOutstanding","getSurfaceId","args","fullArgs","charCodeAt","concat","buffer","ArrayBuffer","view","DataView","arg","setInt32","send","getPositionsFromAbsCoord","absX","absY","relativeId","res","rootX","rootY","winX","winY","getPositionsFromEvent","pageX","pageY","getEffectiveEventTarget","updateKeyboardStatus","blur","updateForEvent","shiftKey","ctrlKey","altKey","timeStamp","prototype","fromCharCode","size","unicodeTable","specialKeyTable","8","13","9","27","46","36","35","33","34","45","37","38","39","40","16","17","18","112","113","114","115","116","117","118","119","120","121","122","123","getEventKeySym","which","keyCode","getKeysymSpecial","flags","keysym","keyLocation","ignoreKeyEvent","handleKeyDown","fev","suppress","members","obj","copyKeyEvent","pushKeyEvent","cancelEvent","handleKeyPress","kdlen","getKeysym","handleKeyUp","pop","getKeyEvent","dir","detail","wheelDelta","preventDefault","changedTouches","touch","item","origId","isEmulated","identifier","connect","ws","binaryType","onopen","onclose","onmessage","test","navigator","userAgent","stopGDK","useWindowBarStyles","windowsBar","animation","bottom","right","transparentBorder","paddingLeft","overflowX","overflowY","from","windowsBarButton","transition","margin","marginRight","marginLeft","windowsBarButtonHover","transform","windowBorderColor","textAlign","opacity","windowsBarButtonActive","secondary","windowsBarButtonOpen","windowsBarButtonCloseMinimized","renderAppListCell","app","index","onLaunchApp","key","appCell","appName","params","alt","displayName","appIcon","appContent","description","willUnmount","componentWillUnmount","forceUpdate","tryToStartGtkServer","componentDidUpdate","gtkBridge","reactFullstackConnectionManager","openApps","apps","map","Provider","switchToNativeButton","isStartMenuOpen","startMenuQuery","WindowBar","toggleStartMenu","startMenu","slideIn","slideOut","startMenuBody","startMenuSearch","includes","openWindows","setOpenWindows","selectedButton","setSelectedButton","updateWindow","openWindow","onContextMenu","withStyles","createStyles","paddingTop","marginTop","appList","boxSizing","flexShrink","overflow","flexGrow","whiteSpace","textOverflow","darkTheme","windowBarColor","primary","warning","windowBorder","defaultTheme","Themes","nord","darkText","customTheme","defaultWindowSize","percentageToNumber","replace","screenSizesToNumbers","getSize","windowProperties","collapse","getPosition","useLocalWindowState","screen","availWidth","availHeight","handleClickOutside","isActive","setActive","updateWindowPositionORSizeQueuer","lastTask","stop","isIdle","continueEmitter","Emitter","queueTask","newTask","idle","Promise","currentTask","lastTaskQueuer","snapWindow","snap","forceState","allowLocalScreenSnapping","currentSnap","snapNow","switchToAbsolutePosition","rndElement","getElementsByClassName","randomClassNameForRndContainer","newStyles","getWindowTransformStyles","keys","keyNameAsString","Math","random","getWindowPosition","getWindowSize","onDrag","newPosition","clientX","clientY","updatedPosition","deltaX","deltaY","windowBarHeight","touchTop","farFromTop","touchMinimumLeft","farFromMinimumLeft","touchMinimumRight","farFromMinimumRight","setWindowState","onResize","ele","delta","localWindowState","newSize","lastResizeDelta","shouldCollapse","isResizing","canDrag","domContainer","getElementById","wrapperRef","switchPosition","serverWindowProperties","title","onClose","createPortal","ref","smoothMove","disableDragging","onDragStart","onDragStop","then","defaultSize","onResizeStart","onResizeStop","onMouseEnter","onMouseLeave","onDoubleClick","bar","barCollapse","barButtonCollapse","barButtonInactive","barTitle","barTitleIcon","contextType","fullscreenWindowPosition","withTheme","getTermTheme","foreground","containerElement","term","open","termFit","fit","socket","close","clientWidth","cols","transports","fontFamily","allowTransparency","loadAddon","write","onData","setOption","div","borderTop","confirm","resolve","reject","confirmDone","result","prompt","promptFinish","getBreadcrumbLocations","maxLength","currentPath","platformPathSeparator","onChangeCurrentPath","currentLocation","pathArray","split","path","pathPartPath","isFirst","isLast","selectedFile","onDrop","onDropPath","onMove","dragedFile","isFolder","newPath","originalPath","fileIsOverFile","onFileDragOver","file","deleteSelected","onDelete","createFolder","promptCreate","onCreateFolder","createFile","onCreateFile","Past","cutPath","copyPath","onCopy","fullPath","files","onRequestDownloadLink","onSelect","downloadUrl","locationBarContainer","locationBar","breadcrumbFilesContainer","breadcrumbItem","breadcrumbButtonItem","breadcrumbButtonItemFirst","breadcrumbButtonItemLast","onDragOverCapture","fileBoxContainer","actionBarContainer","actionBar","actionButton","rel","href","download","fileBox","dialog","dialogMessage","dialogInput","dialogButtons","dialogButton","dialogButtonPrimary","fileContainer","fileActive","draggable","onDragLeave","fileName","fileIcon","stickyActionBarContainer","actionBarNoBorder","openButton","gridTemplateRows","borderRight","paddingBottom","borderLeft","borderBottomRightRadius","gridTemplateColumns","gridGap","gap","gridAutoRows","fileBreadcrumb","paddingRight","makeFileViewerStyles","headlineContainer","menuContainer","headline","backButton","borderTopRightRadius","openFileContainer","openFileContainerBody","filename","isSelectingFile","onReselectFile","renderViewer","onSave","textAreaContainer","textAreaContainerBody","textArea","resize","source","videoAreaContanier","videoAreaContanierBody","controls","videoArea","makeColor","baseColor","toHex8String","darken","lighten","toHexString","isDark","getAlpha","generateCustomTheme","a","post","JSON","stringify","model","response","colors","settings","desktop","setSettings","renderDesktopCategory","category","categoryTitle","marginBlock","settingsBlock","settingsProperty","settingsPropertyName","settingsPropertyValue","settingsPropertyCol","settingsPropertyNameCol","settingsPropertyValueCol","themeGrid","themeButton","renderCreateCustomTheme","categorySubtitle","colorsTable","originalColor","round","rgb","getColor","currentColor","fullState","renderNetworkCategory","errorMainPort","errorStartPort","errorEndPort","mainPort","network","ports","startPort","endPort","settingsPropertyValueError","renderSystemInfoCategory","systemInfo","os","hostname","platform","kernel","cpu","brandName","manufacturer","cores","physicalCores","speed","speedMax","speedMin","ram","total","free","disks","disk","vendor","selectedCategory","categorySelection","selectCategoryButton","selectCategoryButtonSelected","marginBottom","wordBreak","iframeRef","createRef","intervalsToClear","activeElement","current","click","allowFullScreen","sandbox","allow","animationWave","jumpingCube","content","emptyFunction","defaultWindowProps","useWindow","initialState","newWindowState","setBackground","setTheme","explorerWindow","notepadWindow","settingsWindow","onUpload","onReload","newSettings","nativeBackground","renderAppGrid","isOpen","openApp","filterAppQuery","switchToDesktopButton","appContainer","appFilter","appGrid","hr","isUnmounted","location","origin","moveTo","closed","image","LocationBasedImage","setTop","setLeft","loop","screenY","screenX","opener","windowState","hidden","container","viewsMap","web","nativeHost","nativeClient","webWindow","views","socketOptions","connectToServer","useHttps","ReactFullstackConnectionManager","isLoggedIn","login","setLogin","match","status","newStatus"],"mappings":"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CR,IAAQ,IACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,IAAQ,SACR,KAAQ,SACR,IAAQ,SACR,IAAQ,SACR,KAAQ,SACR,IAAQ,SACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,KAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,QACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,KAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,IACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,IAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,MAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,MAAQ,KACR,KAAQ,KACR,KAAQ,KACR,MAAQ,KACR,MAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,KAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SA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","file":"static/js/main.a11cc1fd.chunk.js","sourcesContent":["import Events from \"events\";\n\nexport default class Emitter<EventList> {\n\tprivate emitter = new Events().setMaxListeners(0); // Infinity\n\n\tpublic call = <T extends keyof EventList>(event: T, data: EventList[T]) =>\n\t\tthis.emitter.emit(event as string, data);\n\n\tpublic on = <T extends keyof EventList>(\n\t\tevent: T,\n\t\tlistener: (data: EventList[T]) => void\n\t) => {\n\t\tthis.emitter.on(event as string, listener);\n\t\treturn {\n\t\t\tremove: () => this.off(event, listener),\n\t\t\ton: this.on,\n\t\t\tcall: (data: EventList[T]) => this.call(event, data),\n\t\t};\n\t};\n\n\tpublic off = <T extends keyof EventList>(\n\t\tevent: T,\n\t\tlistener: (data: EventList[T]) => void\n\t) => this.emitter.off(event as string, listener);\n}\n","import { Icon } from \"@web-desktop-environment/interfaces/lib/shared/icon\";\nimport Emitter from \"@utils/Emitter\";\n\nexport interface Window {\n\tid: number;\n\tname: string;\n\ticon: Icon;\n\tstate: WindowState;\n}\n\ninterface WindowState {\n\tminimized: boolean;\n}\n\ninterface WindowManagerEvent {\n\tmaximizeWindow: {\n\t\tid: number;\n\t};\n\tminimizeWindow: {\n\t\tid: number;\n\t};\n\taddWindow: {\n\t\twindow: Window;\n\t};\n\tcloseWindow: {\n\t\twindow: Window;\n\t};\n\tsetActiveWindow: {\n\t\tid: number;\n\t};\n\tupdateZIndex: {\n\t\tid: number;\n\t\tlayer: number;\n\t};\n}\n\nclass WindowManager {\n\tpublic activeWindowId: number | undefined;\n\tpublic windows: Window[] = [];\n\tpublic windowsLayers: number[] = [];\n\n\tpublic emitter = new Emitter<WindowManagerEvent>();\n\n\tpublic readonly windowsMinMaxLayer = { min: 5, max: 200 };\n\n\tpublic reloadWindowsLayers = () => {\n\t\tlet currentZIndex = this.windowsMinMaxLayer.max;\n\t\t[...this.windowsLayers].reverse().forEach((id) => {\n\t\t\tthis.emitter.call(\"updateZIndex\", { id, layer: currentZIndex });\n\t\t\tif (currentZIndex > this.windowsMinMaxLayer.min) {\n\t\t\t\tcurrentZIndex--;\n\t\t\t}\n\t\t});\n\t};\n\n\tpublic setActiveWindow = (id: number) => {\n\t\tif (this.activeWindowId !== id) {\n\t\t\tthis.activeWindowId = id;\n\t\t\tthis.emitter.call(\"setActiveWindow\", { id });\n\t\t\tthis.windowsLayers = this.windowsLayers.filter(\n\t\t\t\t(currentId) => currentId !== id\n\t\t\t);\n\t\t\tthis.windowsLayers.push(id);\n\t\t\tthis.reloadWindowsLayers();\n\t\t}\n\t};\n\tprivate idIndex = 0;\n\n\tpublic addWindow = (name: string, icon: Icon, state: WindowState) => {\n\t\tconst id = this.idIndex;\n\t\tthis.idIndex++;\n\t\tconst newWindow = { id, name, icon, state };\n\t\tthis.windows.push(newWindow);\n\t\tthis.emitter.call(\"addWindow\", { window: newWindow });\n\t\tthis.windowsLayers.push(id);\n\t\treturn id;\n\t};\n\n\tpublic closeWindow = (id: number) => {\n\t\tconst windowToClose = this.windows.find((w) => w.id === id);\n\t\tif (windowToClose) {\n\t\t\tthis.windows = this.windows.filter((w) => w.id !== id);\n\t\t\tthis.emitter.call(\"closeWindow\", { window: windowToClose });\n\t\t\tthis.windowsLayers = this.windowsLayers.filter(\n\t\t\t\t(currentId) => currentId !== id\n\t\t\t);\n\t\t}\n\t};\n\tpublic updateState = (id: number, newState: WindowState) => {\n\t\tthis.setActiveWindow(id);\n\t\tconst currentWindow = this.windows.find((w) => w.id === id);\n\t\tif (currentWindow) {\n\t\t\tconst { minimized } = currentWindow.state;\n\t\t\tcurrentWindow.state = newState;\n\t\t\tif (newState.minimized !== minimized) {\n\t\t\t\tif (newState.minimized) {\n\t\t\t\t\tthis.emitter.call(\"minimizeWindow\", { id });\n\t\t\t\t} else {\n\t\t\t\t\tthis.emitter.call(\"maximizeWindow\", { id });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport default new WindowManager();\n","import { WebSocket as OverrideWS } from \"cors-bypass\";\nwindow.WebSocket = OverrideWS as typeof window.WebSocket;\n","import React, { PropsWithChildren } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { ColorVariants } from \"@root/theme\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\n\nconst useStyle = makeStyles((theme: Theme) => ({\n\troot: {\n\t\tpadding: 5,\n\t\tborderRadius: 14,\n\t\tboxShadow: `-5px 6px 10px -1px ${theme.shadowColor}`,\n\t},\n\tmainBackground: {\n\t\tbackground: theme.background.main,\n\t},\n\tdarkBackground: {\n\t\tbackground: theme.background.dark,\n\t},\n\tlightBackground: {\n\t\tbackground: theme.background.light,\n\t},\n\tmainBackgroundTransparent: {\n\t\tbackground: theme.background.transparent || theme.background.main,\n\t},\n\tdarkBackgroundTransparent: {\n\t\tbackground: theme.background.transparentDark || theme.background.dark,\n\t},\n\tlightBackgroundTransparent: {\n\t\tbackground: theme.background.transparentLight || theme.background.light,\n\t},\n}));\n\ninterface CardProps {\n\tclassName?: string;\n\tcolorVariant?: ColorVariants;\n}\n\nconst Card = ({\n\tchildren,\n\tclassName,\n\tcolorVariant,\n}: PropsWithChildren<CardProps>) => {\n\tconst classes = useStyle();\n\n\tconst backgroundClassesMap: { [Color in ColorVariants]: string } = {\n\t\tdark: classes.darkBackground,\n\t\tlight: classes.lightBackground,\n\t\tmain: classes.mainBackground,\n\t\ttransparent: classes.mainBackgroundTransparent,\n\t\ttransparentDark: classes.darkBackgroundTransparent,\n\t\ttransparentLight: classes.lightBackgroundTransparent,\n\t};\n\treturn (\n\t\t<div\n\t\t\tclassName={`${classes.root} ${\n\t\t\t\tbackgroundClassesMap[colorVariant || \"main\"]\n\t\t\t} ${className || \"\"}`}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nexport default Card;\n","import React, { useState, PropsWithChildren } from \"react\";\nimport { useTheme, makeStyles } from \"@material-ui/styles\";\nimport { Colors, ColorVariants } from \"@root/theme\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\n\nconst useStyle = (\n\ttextColor: string,\n\tbackgroundColor: string,\n\tborder: string,\n\tborderBottom: string\n) =>\n\tmakeStyles(() => ({\n\t\troot: {\n\t\t\tmaxHeight: 35,\n\t\t\tfontSize: 25,\n\t\t\tcolor: textColor,\n\t\t\tbackgroundColor,\n\t\t\tborder,\n\t\t\tborderBottom,\n\t\t\t\"&:focus\": {\n\t\t\t\toutline: \"none\",\n\t\t\t},\n\t\t},\n\t}));\n\ninterface TextFieldProps {\n\tonChange?: (newValue: string, e: React.ChangeEvent<HTMLInputElement>) => void;\n\tvalue?: string | number | string[] | undefined;\n\tplaceholder?: string;\n\tclassName?: string;\n\tcolor?: Colors;\n\tvariant?: ColorVariants;\n\tborder?: boolean;\n\tborderBottom?: boolean;\n\ttransparent?: boolean;\n\tdefaultValue?: string | number | string[] | undefined;\n}\n\nconst TextField = ({\n\tchildren,\n\tclassName,\n\tcolor,\n\tvariant,\n\tvalue,\n\tonChange,\n\tdefaultValue,\n\tborder,\n\ttransparent,\n\tplaceholder,\n\tborderBottom,\n}: PropsWithChildren<TextFieldProps>) => {\n\tconst theme: Theme = useTheme();\n\tconst selectedColor = theme[color || \"background\"];\n\tconst textColor = selectedColor.text;\n\tconst borderValue = border ? `1px solid ${textColor}` : \"none\";\n\tconst borderBottomValue =\n\t\tborderBottom !== false ? `1px solid ${textColor}` : \"none\";\n\tconst backgroundColor = transparent\n\t\t? selectedColor[variant || \"main\"] || selectedColor.main\n\t\t: \"transparent\";\n\tconst classes = useStyle(\n\t\ttextColor,\n\t\tbackgroundColor,\n\t\tborderValue,\n\t\tborderBottomValue\n\t)();\n\n\tconst [currentValue, setCurrentValue] = useState(defaultValue || \"\");\n\tconst onInputEvent = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newValue = e.target.value;\n\t\tsetCurrentValue(newValue);\n\t\tif (onChange) {\n\t\t\tonChange(newValue, e);\n\t\t}\n\t};\n\n\treturn (\n\t\t<input\n\t\t\tplaceholder={placeholder}\n\t\t\tvalue={value || currentValue}\n\t\t\tonChange={onInputEvent}\n\t\t\tclassName={`${classes.root} ${className || \"\"}`}\n\t\t>\n\t\t\t{children}\n\t\t</input>\n\t);\n};\n\nexport default TextField;\n","import React, { CSSProperties, PropsWithChildren } from \"react\";\nimport { useTheme, makeStyles } from \"@material-ui/styles\";\nimport { Colors } from \"@root/theme\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\n\nconst useStyle = (\n\ttextColor: string,\n\tbackgroundColor: string,\n\tbackgroundColorHover: string,\n\tborder: string\n) =>\n\tmakeStyles((theme: Theme) => ({\n\t\troot: {\n\t\t\tborderRadius: 4,\n\t\t\tminHeight: 35,\n\t\t\tminWidth: 80,\n\t\t\tpadding: 4,\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tcolor: textColor,\n\t\t\tbackground: backgroundColor,\n\t\t\tborder,\n\t\t\talignItems: \"center\",\n\t\t\tcursor: \"pointer\",\n\t\t\t\"&:hover\": {\n\t\t\t\tborder,\n\t\t\t\tbackgroundBlendMode: \"multiply\",\n\t\t\t\tbackgroundColor: backgroundColorHover,\n\t\t\t},\n\t\t},\n\t\tshadow: {\n\t\t\tboxShadow: `-3px 4px 6px -1px ${theme.shadowColor}`,\n\t\t},\n\t}));\n\ntype Variants = \"main\" | \"dark\" | \"light\";\n\ninterface ButtonProps {\n\tonClick?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n\tclassName?: string;\n\tcolor?: Colors;\n\tvariant?: Variants;\n\tborder?: boolean;\n\ttransparent?: boolean;\n\tshadow?: boolean;\n\tstyle?: CSSProperties;\n}\n\nconst Button = ({\n\tchildren,\n\tclassName,\n\tcolor,\n\tvariant,\n\tborder,\n\ttransparent,\n\tonClick,\n\tstyle,\n\tshadow,\n}: PropsWithChildren<ButtonProps>) => {\n\tconst theme: Theme = useTheme();\n\tconst selectedColor = theme[color || \"background\"];\n\tconst textColor = selectedColor.text;\n\tconst borderValue = border ? `1px solid ${textColor}` : \"none\";\n\tconst backgroundColorMap: { [Variant in Variants]: string } = {\n\t\tdark: selectedColor.transparentDark || selectedColor.dark,\n\t\tmain: selectedColor.transparent || selectedColor.main,\n\t\tlight: selectedColor.transparentLight || selectedColor.light,\n\t};\n\tconst backgroundColor =\n\t\ttransparent !== true\n\t\t\t? backgroundColorMap[variant || \"main\"] ||\n\t\t\t  selectedColor.transparent ||\n\t\t\t  selectedColor.main\n\t\t\t: \"transparent\";\n\tconst backgroundColorHover =\n\t\tselectedColor[variant || \"main\"] || selectedColor.main;\n\tconst classes = useStyle(\n\t\ttextColor,\n\t\tbackgroundColor,\n\t\tbackgroundColorHover,\n\t\tborderValue\n\t)();\n\n\treturn (\n\t\t<div\n\t\t\tonClick={onClick}\n\t\t\tstyle={style}\n\t\t\tclassName={`${classes.root} ${shadow ? classes.shadow : \"\"} ${\n\t\t\t\tclassName || \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nexport default Button;\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport Card from \"@components/card\";\nimport TextField from \"@components/textField\";\nimport Button from \"@components/button\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { Link } from \"react-router-dom\";\n\ninterface LoginProps {\n\tonLogin: (host: string, port: number, useHttps: boolean) => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n\troot: {\n\t\tposition: \"fixed\",\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tbackground: 'url(\"https://picsum.photos/id/1039/1920/1080\")',\n\t},\n\tcard: {\n\t\twidth: 500,\n\t\tmaxWidth: \"80%\",\n\t\theight: 400,\n\t\tmaxHeight: \"70%\",\n\t\tpadding: \"70px 60px\",\n\t\tdisplay: \"flex\",\n\t\tcolor: theme.background.text,\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"space-between\",\n\t\tbackdropFilter: \"blur(5px)\",\n\t\tuserSelect: \"none\",\n\t},\n\tbarButtonsContainer: {\n\t\tposition: \"relative\",\n\t\ttop: 30,\n\t\tleft: \"91%\",\n\t\twidth: 40,\n\t\theight: 20,\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"space-between\",\n\t},\n\tbarButton: {\n\t\twidth: 15,\n\t\theight: 15,\n\t\tborderRadius: \"50%\",\n\t\tzIndex: 2,\n\t\tborder: \"1px solid #0004\",\n\t},\n\tbarButtonExit: {\n\t\tcursor: \"pointer\",\n\t\tbackground: theme.error.main,\n\t\t\"&:hover\": {\n\t\t\tbackground: theme.error.dark,\n\t\t},\n\t},\n\tflex: {\n\t\tdisplay: \"flex\",\n\t},\n\tbarButtonCollaps: {\n\t\tcursor: \"pointer\",\n\t\tbackground: theme.success.main,\n\t\t\"&:hover\": {\n\t\t\tbackground: theme.success.dark,\n\t\t},\n\t},\n\tlink: {\n\t\ttextDecoration: \"none\",\n\t},\n}));\n\nconst Login = (props: LoginProps) => {\n\tconst classes = useStyles();\n\tconst [host, setHost] = useState(\"localhost\");\n\tconst [port, setPort] = useState(5000);\n\tconst [https /* , setHttps */] = useState(false);\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div>\n\t\t\t\t<div className={classes.barButtonsContainer}>\n\t\t\t\t\t<div className={`${classes.barButton} ${classes.barButtonCollaps}`} />\n\t\t\t\t\t<div className={`${classes.barButton} ${classes.barButtonExit}`} />\n\t\t\t\t</div>\n\t\t\t\t<Card className={classes.card}>\n\t\t\t\t\t<h2>Login to your server</h2>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvalue={host}\n\t\t\t\t\t\tonChange={(newValue) => setHost(newValue || \"\")}\n\t\t\t\t\t\tplaceholder=\"host\"\n\t\t\t\t\t></TextField>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvalue={String(port || \"\")}\n\t\t\t\t\t\tonChange={(newValue) => setPort(Number(newValue))}\n\t\t\t\t\t\tplaceholder=\"port\"\n\t\t\t\t\t></TextField>\n\t\t\t\t\t{/* <div className={classes.flex}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tchecked={https}\n\t\t\t\t\t\t\tonChange={(e) => setHttps(e.target.checked)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<label>Use HTTPS</label>\n\t\t\t\t\t</div> */}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"main\"\n\t\t\t\t\t\tonClick={() => props.onLogin(host, port, https)}\n\t\t\t\t\t\tcolor=\"background\"\n\t\t\t\t\t\tborder\n\t\t\t\t\t>\n\t\t\t\t\t\tLogin\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Link to=\"/demo\" className={classes.link}>\n\t\t\t\t\t\t<Button variant=\"main\" color=\"background\" border>\n\t\t\t\t\t\t\tor instead you can visit the Demo\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Link>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Login;\n","import React from \"react\";\nimport { IconBaseProps } from \"react-icons\";\nimport * as FcIcons from \"react-icons/fc\";\nimport * as VSCIcons from \"react-icons/vsc\";\nimport { IconBase } from \"react-icons/lib/cjs/iconBase\";\nimport { IconNames } from \"@web-desktop-environment/interfaces/lib/shared/icon\";\nimport \"./icon.css\";\n\nconst Icon = (\n\tprops: IconBaseProps & {\n\t\tname: IconNames;\n\t\tcontainerClassName?: string;\n\t\tparentFill?: boolean;\n\t}\n) => {\n\treturn (\n\t\t<span className={`icon-parent ${props.containerClassName || \"\"}`}>\n\t\t\t{React.createElement(\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\t\t\t\t{ ...FcIcons, ...VSCIcons }[props.name] || IconBase,\n\t\t\t\tprops\n\t\t\t)}\n\t\t</span>\n\t);\n};\nexport default Icon;\n","import React, { PropsWithChildren, useState } from \"react\";\n\nconst MountUnmountAnimation = (\n\tprops: PropsWithChildren<{ className: string; mount: boolean }>\n) => {\n\tconst [mount, setMount] = useState(props.mount);\n\treturn mount || props.mount ? (\n\t\t<div\n\t\t\tclassName={props.className}\n\t\t\tonAnimationEnd={() => {\n\t\t\t\tsetMount(props.mount);\n\t\t\t}}\n\t\t>\n\t\t\t{props.children}\n\t\t</div>\n\t) : null;\n};\n\nexport default MountUnmountAnimation;\n","import React from \"react\";\n\nexport const ConnectionContext = React.createContext<\n\t{ port: number; host: string } | undefined\n>(undefined);\n","import React from \"react\";\n\nclass StateComponent<State extends object> extends React.Component<\n\t{\n\t\tdefaultState: State;\n\t\tonMount?: (state: State, setState: (state: Partial<State>) => void) => void;\n\t\tchildren: (\n\t\t\tstate: State,\n\t\t\tsetState: (state: Partial<State>) => void\n\t\t) => JSX.Element;\n\t},\n\tState\n> {\n\trealstate = this.props.defaultState;\n\tstate = this.props.defaultState;\n\n\tupdateState = (state: Partial<State>) => {\n\t\tthis.setState({ ...this.state, ...state });\n\t\tthis.realstate = { ...this.realstate, ...state };\n\t};\n\n\tcomponentDidMount = () => {\n\t\tif (this.props.onMount) {\n\t\t\tthis.props.onMount(this.realstate, this.updateState);\n\t\t}\n\t};\n\n\trender() {\n\t\treturn this.props.children(this.realstate, this.updateState);\n\t}\n}\n\nexport default StateComponent;\n","import Color from \"@ctrl/tinycolor\";\n\nexport const transparent = (color: string, alpha = 0.6) =>\n\t\"#\" + Color(color).setAlpha(alpha).toHex8();\n\n// from https://stackoverflow.com/questions/35969656/how-can-i-generate-the-opposite-color-according-to-current-color\n\nconst padZero = (str: string) => {\n\tconst len = 2;\n\tconst zeros = new Array(len).join(\"0\");\n\treturn (zeros + str).slice(-len);\n};\n\nexport const invertColor = (hex: string) => {\n\tif (hex.indexOf(\"#\") === 0) {\n\t\thex = hex.slice(1);\n\t}\n\t// convert 3-digit hex to 6-digits.\n\tif (hex.length === 3) {\n\t\thex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n\t}\n\tif (hex.length !== 6) {\n\t\tthrow new Error(\"Invalid HEX color.\");\n\t}\n\t// invert color components\n\tconst r = (255 - parseInt(hex.slice(0, 2), 16)).toString(16),\n\t\tg = (255 - parseInt(hex.slice(2, 4), 16)).toString(16),\n\t\tb = (255 - parseInt(hex.slice(4, 6), 16)).toString(16);\n\t// pad each with zeros and return\n\treturn \"#\" + padZero(r) + padZero(g) + padZero(b);\n};\n","/* eslint-disable */\n/* Helper functions for debugging */\n\nconst { inflateRaw } = require(\"zlib\");\nconst { default: WindowManager } = require(\"../state/WindowManager\");\nconst { GTKBridgeEmitter } = require(\"./state\");\n\n\nconst rootDiv = document.createElement(\"div\");\ndocument.body.appendChild(rootDiv);\nrootDiv.id = \"gtkRoot\";\n\nvar logDiv = null;\nfunction log(str) {\n\tif (!logDiv) {\n\t\tlogDiv = document.createElement(\"div\");\n\t\trootDiv.appendChild(logDiv);\n\t\tlogDiv.style[\"position\"] = \"absolute\";\n\t\tlogDiv.style[\"right\"] = \"0px\";\n\t}\n\tlogDiv.appendChild(document.createTextNode(str));\n\tlogDiv.appendChild(document.createElement(\"br\"));\n}\n\nfunction getStackTrace() {\n\tvar callstack = [];\n\tvar isCallstackPopulated = false;\n\ttry {\n\t\ti.dont.exist += 0;\n\t} catch (e) {\n\t\tif (e.stack) {\n\t\t\t// Firefox\n\t\t\tvar lines = e.stack.split(\"\\n\");\n\t\t\tfor (var i = 0, len = lines.length; i < len; i++) {\n\t\t\t\tif (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n\t\t\t\t\tcallstack.push(lines[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove call to getStackTrace()\n\t\t\tcallstack.shift();\n\t\t\tisCallstackPopulated = true;\n\t\t} else if (window.opera && e.message) {\n\t\t\t// Opera\n\t\t\tvar lines = e.message.split(\"\\n\");\n\t\t\tfor (var i = 0, len = lines.length; i < len; i++) {\n\t\t\t\tif (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n\t\t\t\t\tvar entry = lines[i];\n\t\t\t\t\t// Append next line also since it has the file info\n\t\t\t\t\tif (lines[i + 1]) {\n\t\t\t\t\t\tentry += \" at \" + lines[i + 1];\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t\tcallstack.push(entry);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove call to getStackTrace()\n\t\t\tcallstack.shift();\n\t\t\tisCallstackPopulated = true;\n\t\t}\n\t}\n\tif (!isCallstackPopulated) {\n\t\t//IE and Safari\n\t\tvar currentFunction = arguments.callee.caller;\n\t\twhile (currentFunction) {\n\t\t\tvar fn = currentFunction.toString();\n\t\t\tvar fname =\n\t\t\t\tfn.substring(fn.indexOf(\"function\") + 8, fn.indexOf(\"(\")) ||\n\t\t\t\t\"anonymous\";\n\t\t\tcallstack.push(fname);\n\t\t\tcurrentFunction = currentFunction.caller;\n\t\t}\n\t}\n\treturn callstack;\n}\n\nfunction logStackTrace(len) {\n\tvar callstack = getStackTrace();\n\tvar end = callstack.length;\n\tif (len > 0) end = Math.min(len + 1, end);\n\tfor (var i = 1; i < end; i++) log(callstack[i]);\n}\n\nfunction resizeCanvas(canvas, w, h) {\n\t/* Canvas resize clears the data, so we need to save it first */\n\tvar tmpCanvas = canvas.ownerDocument.createElement(\"canvas\");\n\ttmpCanvas.width = canvas.width;\n\ttmpCanvas.height = canvas.height;\n\tvar tmpContext = tmpCanvas.getContext(\"2d\");\n\ttmpContext.globalCompositeOperation = \"copy\";\n\ttmpContext.drawImage(canvas, 0, 0, tmpCanvas.width, tmpCanvas.height);\n\n\tcanvas.width = w;\n\tcanvas.height = h;\n\n\tvar context = canvas.getContext(\"2d\");\n\n\tcontext.globalCompositeOperation = \"copy\";\n\tcontext.drawImage(tmpCanvas, 0, 0, tmpCanvas.width, tmpCanvas.height);\n}\n\nvar grab = new Object();\ngrab.window = null;\ngrab.ownerEvents = false;\ngrab.implicit = false;\nvar keyDownList = [];\nvar lastSerial = 0;\nvar lastX = 0;\nvar lastY = 0;\nvar lastState;\nvar lastTimeStamp = 0;\nvar realWindowWithMouse = 0;\nvar windowWithMouse = 0;\nvar surfaces = {};\nvar stackingOrder = [];\nvar outstandingCommands = new Array();\nexport var inputSocket = null;\nvar debugDecoding = false;\nvar fakeInput = null;\nvar showKeyboard = false;\nvar showKeyboardChanged = false;\nvar firstTouchDownId = null;\n\nvar GDK_CROSSING_NORMAL = 0;\nvar GDK_CROSSING_GRAB = 1;\nvar GDK_CROSSING_UNGRAB = 2;\n\n// GdkModifierType\nvar GDK_SHIFT_MASK = 1 << 0;\nvar GDK_LOCK_MASK = 1 << 1;\nvar GDK_CONTROL_MASK = 1 << 2;\nvar GDK_MOD1_MASK = 1 << 3;\nvar GDK_MOD2_MASK = 1 << 4;\nvar GDK_MOD3_MASK = 1 << 5;\nvar GDK_MOD4_MASK = 1 << 6;\nvar GDK_MOD5_MASK = 1 << 7;\nvar GDK_BUTTON1_MASK = 1 << 8;\nvar GDK_BUTTON2_MASK = 1 << 9;\nvar GDK_BUTTON3_MASK = 1 << 10;\nvar GDK_BUTTON4_MASK = 1 << 11;\nvar GDK_BUTTON5_MASK = 1 << 12;\nvar GDK_SUPER_MASK = 1 << 26;\nvar GDK_HYPER_MASK = 1 << 27;\nvar GDK_META_MASK = 1 << 28;\nvar GDK_RELEASE_MASK = 1 << 30;\n\nfunction getButtonMask(button) {\n\tif (button == 1) return GDK_BUTTON1_MASK;\n\tif (button == 2) return GDK_BUTTON2_MASK;\n\tif (button == 3) return GDK_BUTTON3_MASK;\n\tif (button == 4) return GDK_BUTTON4_MASK;\n\tif (button == 5) return GDK_BUTTON5_MASK;\n\treturn 0;\n}\n\nfunction sendConfigureNotify(surface) {\n\tsendInput(\"w\", [\n\t\tsurface.id,\n\t\tsurface.x,\n\t\tsurface.y,\n\t\tsurface.width,\n\t\tsurface.height,\n\t]);\n}\n\n/**\n * register web-desktop-environment window\n * @param {{ toplevelElement: HTMLElement }} surface\n */\nfunction addWindow(surface) {\n\tlet layer = 0;\n\tconst id = WindowManager.addWindow(\n\t\t\"gnome-window\",\n\t\t{ type: \"icon\", icon: \"FcLinux\" },\n\t\t{ minimized: false }\n\t);\n\tWindowManager.emitter.on(\n\t\t\"updateZIndex\",\n\t\t({ id: currentId, layer: currentLayer }) => {\n\t\t\tif (currentId === id) {\n\t\t\t\tlayer = currentLayer;\n\t\t\t}\n\t\t}\n\t);\n\tsurface.toplevelElement.addEventListener(\"mousedown\", () => {\n\t\tWindowManager.setActiveWindow(id);\n\t});\n\tWindowManager.reloadWindowsLayers();\n\tsurface.toplevelElement.focus();\n\tconst doBeforeEveryFrame = () => {\n\t\tsurface.toplevelElement.style.zIndex = String(layer);\n\t\trequestAnimationFrame(doBeforeEveryFrame);\n\t};\n\tdoBeforeEveryFrame();\n\tconst i = setInterval(() => {\n\t\tif (!rootDiv.contains(surface.toplevelElement)) {\n\t\t\tWindowManager.closeWindow(id);\n\t\t\tclearInterval(i);\n\t\t}\n\t});\n}\n\nvar positionIndex = 0;\nfunction cmdCreateSurface(id, x, y, width, height, isTemp) {\n\tvar surface = {\n\t\tid: id,\n\t\tx: x,\n\t\ty: y,\n\t\twidth: width,\n\t\theight: height,\n\t\tisTemp: isTemp,\n\t};\n\tsurface.positioned = isTemp;\n\tsurface.transientParent = 0;\n\tsurface.visible = false;\n\tsurface.imageData = null;\n\n\tvar canvas = document.createElement(\"canvas\");\n\tcanvas.width = width;\n\tcanvas.height = height;\n\tcanvas.surface = surface;\n\tsurface.canvas = canvas;\n\tvar toplevelElement;\n\n\ttoplevelElement = canvas;\n\trootDiv.appendChild(canvas);\n\n\tsurface.toplevelElement = toplevelElement;\n\tif (!isTemp) {\n\t\taddWindow(surface);\n\t}\n\ttoplevelElement.style[\"position\"] = \"absolute\";\n\t/* This positioning isn't strictly right for apps in another topwindow,\n\t * but that will be fixed up when showing. */\n\ttoplevelElement.style[\"left\"] = surface.x + \"px\";\n\ttoplevelElement.style[\"top\"] = surface.y + \"px\";\n\ttoplevelElement.style[\"display\"] = \"inline\";\n\n\ttoplevelElement.style[\"visibility\"] = \"hidden\";\n\n\tsurfaces[id] = surface;\n\tstackingOrder.push(surface);\n\n\tsendConfigureNotify(surface);\n}\n\nfunction cmdShowSurface(id) {\n\tvar surface = surfaces[id];\n\n\tif (surface.visible) return;\n\tsurface.visible = true;\n\n\tvar xOffset = surface.x;\n\tvar yOffset = surface.y;\n\n\tsurface.toplevelElement.style[\"left\"] = xOffset + \"px\";\n\tsurface.toplevelElement.style[\"top\"] = yOffset + \"px\";\n\tsurface.toplevelElement.style[\"visibility\"] = \"visible\";\n\n\trestackWindows();\n}\n\nfunction cmdHideSurface(id) {\n\tif (grab.window == id) doUngrab();\n\n\tvar surface = surfaces[id];\n\n\tif (!surface.visible) return;\n\tsurface.visible = false;\n\n\tvar element = surface.toplevelElement;\n\n\telement.style[\"visibility\"] = \"hidden\";\n}\n\nfunction cmdSetTransientFor(id, parentId) {\n\tvar surface = surfaces[id];\n\n\tif (surface.transientParent == parentId) return;\n\n\tsurface.transientParent = parentId;\n\tif (parentId != 0 && surfaces[parentId]) {\n\t\tmoveToHelper(surface, stackingOrder.indexOf(surfaces[parentId]) + 1);\n\t}\n\n\tif (surface.visible) {\n\t\trestackWindows();\n\t}\n}\n\nfunction restackWindows() {\n\tstackingOrder = stackingOrder.filter((v) => v);\n\tfor (var i = 0; i < stackingOrder.length; i++) {\n\t\tvar surface = stackingOrder[i];\n\t\tsurface.toplevelElement.style.zIndex = i;\n\t}\n}\n\nfunction moveToHelper(surface, position) {\n\tvar i = stackingOrder.indexOf(surface);\n\tstackingOrder.splice(i, 1);\n\tif (position != undefined) stackingOrder.splice(position, 0, surface);\n\telse stackingOrder.push(surface);\n\n\tfor (var cid in surfaces) {\n\t\tvar child = surfaces[cid];\n\t\tif (child.transientParent == (surface ? surface.id : null))\n\t\t\tmoveToHelper(child, stackingOrder.indexOf(surface) + 1);\n\t}\n}\n\nfunction cmdDeleteSurface(id) {\n\tif (grab.window == id) doUngrab();\n\n\tvar surface = surfaces[id];\n\tvar i = stackingOrder.indexOf(surface);\n\tif (i >= 0) stackingOrder.splice(i, 1);\n\tvar canvas = surface.canvas;\n\tcanvas.parentNode.removeChild(canvas);\n\tdelete surfaces[id];\n}\n\nfunction cmdMoveResizeSurface(id, has_pos, x, y, has_size, w, h) {\n\tvar surface = surfaces[id];\n\tif (has_pos) {\n\t\tsurface.positioned = true;\n\t\tsurface.x = x;\n\t\tsurface.y = y;\n\t}\n\tif (has_size) {\n\t\tsurface.width = w;\n\t\tsurface.height = h;\n\t}\n\n\tif (has_size) resizeCanvas(surface.canvas, w, h);\n\n\tif (surface.visible) {\n\t\tif (has_pos) {\n\t\t\tvar xOffset = surface.x;\n\t\t\tvar yOffset = surface.y;\n\n\t\t\tvar element = surface.canvas;\n\n\t\t\telement.style[\"left\"] = xOffset + \"px\";\n\t\t\telement.style[\"top\"] = yOffset + \"px\";\n\t\t}\n\t}\n\n\tsendConfigureNotify(surface);\n}\n\nfunction cmdRaiseSurface(id) {\n\tvar surface = surfaces[id];\n\n\tmoveToHelper(surface);\n\trestackWindows();\n}\n\nfunction cmdLowerSurface(id) {\n\tvar surface = surfaces[id];\n\n\tmoveToHelper(surface, 0);\n\trestackWindows();\n}\n\nfunction copyRect(src, srcX, srcY, dest, destX, destY, width, height) {\n\t// Clip to src\n\tif (srcX + width > src.width) width = src.width - srcX;\n\tif (srcY + height > src.height) height = src.height - srcY;\n\n\t// Clip to dest\n\tif (destX + width > dest.width) width = dest.width - destX;\n\tif (destY + height > dest.height) height = dest.height - destY;\n\n\tvar srcRect = src.width * 4 * srcY + srcX * 4;\n\tvar destRect = dest.width * 4 * destY + destX * 4;\n\n\tfor (var i = 0; i < height; i++) {\n\t\tvar line = src.data.subarray(srcRect, srcRect + width * 4);\n\t\tdest.data.set(line, destRect);\n\t\tsrcRect += src.width * 4;\n\t\tdestRect += dest.width * 4;\n\t}\n}\n\nfunction markRun(dest, start, length, r, g, b) {\n\tfor (var i = start; i < start + length * 4; i += 4) {\n\t\tdest[i + 0] = (dest[i + 0] / 2) | (0 + r);\n\t\tdest[i + 1] = (dest[i + 1] / 2) | (0 + g);\n\t\tdest[i + 2] = (dest[i + 2] / 2) | (0 + b);\n\t}\n}\n\nfunction markRect(src, srcX, srcY, dest, destX, destY, width, height, r, g, b) {\n\t// Clip to src\n\tif (srcX + width > src.width) width = src.width - srcX;\n\tif (srcY + height > src.height) height = src.height - srcY;\n\n\t// Clip to dest\n\tif (destX + width > dest.width) width = dest.width - destX;\n\tif (destY + height > dest.height) height = dest.height - destY;\n\n\tvar destRect = dest.width * 4 * destY + destX * 4;\n\n\tfor (var i = 0; i < height; i++) {\n\t\tif (i == 0 || i == height - 1) markRun(dest.data, destRect, width, 0, 0, 0);\n\t\telse {\n\t\t\tmarkRun(dest.data, destRect, 1, 0, 0, 0);\n\t\t\tmarkRun(dest.data, destRect + 4, width - 2, r, g, b);\n\t\t\tmarkRun(dest.data, destRect + 4 * width - 4, 1, 0, 0, 0);\n\t\t}\n\t\tdestRect += dest.width * 4;\n\t}\n}\n\nfunction decodeBuffer(context, oldData, w, h, data, debug) {\n\tvar i, j;\n\tvar imageData = context.createImageData(w, h);\n\n\tif (oldData != null) {\n\t\t// Copy old frame into new buffer\n\t\tcopyRect(oldData, 0, 0, imageData, 0, 0, oldData.width, oldData.height);\n\t}\n\n\tvar src = 0;\n\tvar dest = 0;\n\n\twhile (src < data.length) {\n\t\tvar b = data[src++];\n\t\tvar g = data[src++];\n\t\tvar r = data[src++];\n\t\tvar alpha = data[src++];\n\t\tvar len, start;\n\n\t\tif (alpha != 0) {\n\t\t\t// Regular data is red\n\t\t\tif (debug) {\n\t\t\t\tr = (r / 2) | (0 + 128);\n\t\t\t\tg = (g / 2) | 0;\n\t\t\t\tb = (r / 2) | 0;\n\t\t\t}\n\n\t\t\timageData.data[dest++] = r;\n\t\t\timageData.data[dest++] = g;\n\t\t\timageData.data[dest++] = b;\n\t\t\timageData.data[dest++] = alpha;\n\t\t} else {\n\t\t\tvar cmd = r & 0xf0;\n\t\t\tswitch (cmd) {\n\t\t\t\tcase 0x00: // Transparent pixel\n\t\t\t\t\t//log(\"Got transparent\");\n\t\t\t\t\timageData.data[dest++] = 0;\n\t\t\t\t\timageData.data[dest++] = 0;\n\t\t\t\t\timageData.data[dest++] = 0;\n\t\t\t\t\timageData.data[dest++] = 0;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 0x10: // Delta 0 run\n\t\t\t\t\tlen = ((r & 0xf) << 16) | (g << 8) | b;\n\t\t\t\t\t//log(\"Got delta0, len: \" + len);\n\t\t\t\t\tdest += len * 4;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 0x20: // Block reference\n\t\t\t\t\tvar blockid = ((r & 0xf) << 16) | (g << 8) | b;\n\n\t\t\t\t\tvar block_stride = ((oldData.width + 32 - 1) / 32) | 0;\n\t\t\t\t\tvar srcY = ((blockid / block_stride) | 0) * 32;\n\t\t\t\t\tvar srcX = (blockid % block_stride | 0) * 32;\n\n\t\t\t\t\tb = data[src++];\n\t\t\t\t\tg = data[src++];\n\t\t\t\t\tr = data[src++];\n\t\t\t\t\talpha = data[src++];\n\n\t\t\t\t\tvar destX = (alpha << 8) | r;\n\t\t\t\t\tvar destY = (g << 8) | b;\n\n\t\t\t\t\tcopyRect(oldData, srcX, srcY, imageData, destX, destY, 32, 32);\n\t\t\t\t\tif (debug)\n\t\t\t\t\t\t// blocks are green\n\t\t\t\t\t\tmarkRect(\n\t\t\t\t\t\t\toldData,\n\t\t\t\t\t\t\tsrcX,\n\t\t\t\t\t\t\tsrcY,\n\t\t\t\t\t\t\timageData,\n\t\t\t\t\t\t\tdestX,\n\t\t\t\t\t\t\tdestY,\n\t\t\t\t\t\t\t32,\n\t\t\t\t\t\t\t32,\n\t\t\t\t\t\t\t0x00,\n\t\t\t\t\t\t\t128,\n\t\t\t\t\t\t\t0x00\n\t\t\t\t\t\t);\n\n\t\t\t\t\t//log(\"Got block, id: \" + blockid +  \"(\" + srcX +\",\" + srcY + \") at \" + destX + \",\" + destY);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 0x30: // Color run\n\t\t\t\t\tlen = ((r & 0xf) << 16) | (g << 8) | b;\n\t\t\t\t\t//log(\"Got color run, len: \" + len);\n\n\t\t\t\t\tb = data[src++];\n\t\t\t\t\tg = data[src++];\n\t\t\t\t\tr = data[src++];\n\t\t\t\t\talpha = data[src++];\n\n\t\t\t\t\tstart = dest;\n\n\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\timageData.data[dest++] = r;\n\t\t\t\t\t\timageData.data[dest++] = g;\n\t\t\t\t\t\timageData.data[dest++] = b;\n\t\t\t\t\t\timageData.data[dest++] = alpha;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (debug)\n\t\t\t\t\t\t// Color runs are blue\n\t\t\t\t\t\tmarkRun(imageData.data, start, len, 0x00, 0x00, 128);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 0x40: // Delta run\n\t\t\t\t\tlen = ((r & 0xf) << 16) | (g << 8) | b;\n\t\t\t\t\t//log(\"Got delta run, len: \" + len);\n\n\t\t\t\t\tb = data[src++];\n\t\t\t\t\tg = data[src++];\n\t\t\t\t\tr = data[src++];\n\t\t\t\t\talpha = data[src++];\n\n\t\t\t\t\tstart = dest;\n\n\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\timageData.data[dest] = (imageData.data[dest] + r) & 0xff;\n\t\t\t\t\t\tdest++;\n\t\t\t\t\t\timageData.data[dest] = (imageData.data[dest] + g) & 0xff;\n\t\t\t\t\t\tdest++;\n\t\t\t\t\t\timageData.data[dest] = (imageData.data[dest] + b) & 0xff;\n\t\t\t\t\t\tdest++;\n\t\t\t\t\t\timageData.data[dest] = (imageData.data[dest] + alpha) & 0xff;\n\t\t\t\t\t\tdest++;\n\t\t\t\t\t}\n\t\t\t\t\tif (debug)\n\t\t\t\t\t\t// Delta runs are violet\n\t\t\t\t\t\tmarkRun(imageData.data, start, len, 0xff, 0x00, 0xff);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.error(\"Unknown buffer commend \" + cmd);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn imageData;\n}\n\nfunction cmdPutBuffer(id, w, h, compressed) {\n\tvar surface = surfaces[id];\n\tvar context = surface.canvas.getContext(\"2d\");\n\n\tinflateRaw(compressed, (e, data) => {\n\t\tvar imageData = decodeBuffer(\n\t\t\tcontext,\n\t\t\tsurface.imageData,\n\t\t\tw,\n\t\t\th,\n\t\t\tdata,\n\t\t\tdebugDecoding\n\t\t);\n\t\tcontext.putImageData(imageData, 0, 0);\n\n\t\tif (debugDecoding)\n\t\t\timageData = decodeBuffer(context, surface.imageData, w, h, data, false);\n\n\t\tsurface.imageData = imageData;\n\t});\n}\n\nfunction cmdGrabPointer(id, ownerEvents) {\n\tdoGrab(id, ownerEvents, false);\n\tsendInput(\"g\", []);\n}\n\nfunction cmdUngrabPointer() {\n\tsendInput(\"u\", []);\n\tif (grab.window) doUngrab();\n}\n\nvar active = false;\nfunction handleCommands(cmd) {\n\tif (!active) {\n\t\tstart();\n\t\tactive = true;\n\t}\n\n\twhile (cmd.pos < cmd.length) {\n\t\tvar id, x, y, w, h, q;\n\t\tvar command = cmd.get_char();\n\t\tlastSerial = cmd.get_32();\n\t\tswitch (command) {\n\t\t\tcase \"D\":\n\t\t\t\tinputSocket = null;\n\t\t\t\tGTKBridgeEmitter.call(\"status\", \"disconnected\");\n\t\t\t\trootDiv.innerHTML = \"\";\n\t\t\t\tbreak;\n\n\t\t\tcase \"s\": // create new surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tconsole.log(id);\n\t\t\t\tx = cmd.get_16s();\n\t\t\t\ty = cmd.get_16s();\n\t\t\t\tw = cmd.get_16();\n\t\t\t\th = cmd.get_16();\n\t\t\t\tvar isTemp = cmd.get_bool();\n\t\t\t\tcmdCreateSurface(id, x, y, w, h, isTemp);\n\t\t\t\tbreak;\n\n\t\t\tcase \"S\": // Show a surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tcmdShowSurface(id);\n\t\t\t\tbreak;\n\n\t\t\tcase \"H\": // Hide a surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tcmdHideSurface(id);\n\t\t\t\tbreak;\n\n\t\t\tcase \"p\": // Set transient parent\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tvar parentId = cmd.get_16();\n\t\t\t\tcmdSetTransientFor(id, parentId);\n\t\t\t\tbreak;\n\n\t\t\tcase \"d\": // Delete surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tcmdDeleteSurface(id);\n\t\t\t\tbreak;\n\n\t\t\tcase \"m\": // Move a surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tvar ops = cmd.get_flags();\n\t\t\t\tvar has_pos = ops & 1;\n\t\t\t\tif (has_pos) {\n\t\t\t\t\tx = cmd.get_16s();\n\t\t\t\t\ty = cmd.get_16s();\n\t\t\t\t}\n\t\t\t\tvar has_size = ops & 2;\n\t\t\t\tif (has_size) {\n\t\t\t\t\tw = cmd.get_16();\n\t\t\t\t\th = cmd.get_16();\n\t\t\t\t}\n\t\t\t\tcmdMoveResizeSurface(id, has_pos, x, y, has_size, w, h);\n\t\t\t\tbreak;\n\n\t\t\tcase \"r\": // Raise a surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tcmdRaiseSurface(id);\n\t\t\t\tbreak;\n\n\t\t\tcase \"R\": // Lower a surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tcmdLowerSurface(id);\n\t\t\t\tbreak;\n\n\t\t\tcase \"b\": // Put image buffer\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tw = cmd.get_16();\n\t\t\t\th = cmd.get_16();\n\t\t\t\tvar data = cmd.get_data();\n\t\t\t\tcmdPutBuffer(id, w, h, data);\n\t\t\t\tbreak;\n\n\t\t\tcase \"g\": // Grab\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tvar ownerEvents = cmd.get_bool();\n\n\t\t\t\tcmdGrabPointer(id, ownerEvents);\n\t\t\t\tbreak;\n\n\t\t\tcase \"u\": // Ungrab\n\t\t\t\tcmdUngrabPointer();\n\t\t\t\tbreak;\n\n\t\t\tcase \"k\": // show keyboard\n\t\t\t\tshowKeyboard = cmd.get_16() != 0;\n\t\t\t\tshowKeyboardChanged = true;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error(\n\t\t\t\t\t\"Unknown op \" + command\n\t\t\t\t);\n\t\t}\n\t}\n\treturn true;\n}\n\nfunction handleOutstanding() {\n\twhile (outstandingCommands.length > 0) {\n\t\tvar cmd = outstandingCommands.shift();\n\t\tif (!handleCommands(cmd)) {\n\t\t\toutstandingCommands.unshift(cmd);\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction BinCommands(message) {\n\tthis.arraybuffer = message;\n\tthis.u8 = new Uint8Array(message);\n\tthis.length = this.u8.length;\n\tthis.pos = 0;\n}\n\nBinCommands.prototype.get_char = function () {\n\treturn String.fromCharCode(this.u8[this.pos++]);\n};\nBinCommands.prototype.get_bool = function () {\n\treturn this.u8[this.pos++] != 0;\n};\nBinCommands.prototype.get_flags = function () {\n\treturn this.u8[this.pos++];\n};\nBinCommands.prototype.get_16 = function () {\n\tvar v = this.u8[this.pos] + (this.u8[this.pos + 1] << 8);\n\tthis.pos = this.pos + 2;\n\treturn v;\n};\nBinCommands.prototype.get_16s = function () {\n\tvar v = this.get_16();\n\tif (v > 32767) return v - 65536;\n\telse return v;\n};\nBinCommands.prototype.get_32 = function () {\n\tvar v =\n\t\tthis.u8[this.pos] +\n\t\t(this.u8[this.pos + 1] << 8) +\n\t\t(this.u8[this.pos + 2] << 16) +\n\t\t(this.u8[this.pos + 3] << 24);\n\tthis.pos = this.pos + 4;\n\treturn v;\n};\nBinCommands.prototype.get_data = function () {\n\tvar size = this.get_32();\n\tvar data = new Uint8Array(this.arraybuffer, this.pos, size);\n\tthis.pos = this.pos + size;\n\treturn data;\n};\n\nfunction handleMessage(message) {\n\tvar cmd = new BinCommands(message);\n\toutstandingCommands.push(cmd);\n\tif (outstandingCommands.length == 1) {\n\t\thandleOutstanding();\n\t}\n}\n\nfunction getSurfaceId(ev) {\n\tvar surface = ev.target.surface;\n\tif (surface != undefined) return surface.id;\n\treturn 0;\n}\n\nfunction sendInput(cmd, args) {\n\tif (inputSocket == null) return;\n\n\tvar fullArgs = [cmd.charCodeAt(0), lastSerial, lastTimeStamp].concat(args);\n\tvar buffer = new ArrayBuffer(fullArgs.length * 4);\n\tvar view = new DataView(buffer);\n\tfullArgs.forEach(function (arg, i) {\n\t\tview.setInt32(i * 4, arg, false);\n\t});\n\n\tinputSocket.send(buffer);\n}\n\nfunction getPositionsFromAbsCoord(absX, absY, relativeId) {\n\tvar res = Object();\n\n\tres.rootX = absX;\n\tres.rootY = absY;\n\tres.winX = absX;\n\tres.winY = absY;\n\tif (relativeId != 0) {\n\t\tvar surface = surfaces[relativeId];\n\t\tres.winX = res.winX - surface.x;\n\t\tres.winY = res.winY - surface.y;\n\t}\n\n\treturn res;\n}\n\nfunction getPositionsFromEvent(ev, relativeId) {\n\tvar absX, absY;\n\tabsX = ev.pageX;\n\tabsY = ev.pageY;\n\tvar res = getPositionsFromAbsCoord(absX, absY, relativeId);\n\n\tlastX = res.rootX;\n\tlastY = res.rootY;\n\n\treturn res;\n}\n\nfunction getEffectiveEventTarget(id) {\n\tif (grab.window != null) {\n\t\tif (!grab.ownerEvents) return grab.window;\n\t\tif (id == 0) return grab.window;\n\t}\n\treturn id;\n}\n\nfunction updateKeyboardStatus() {\n\tif (fakeInput != null && showKeyboardChanged) {\n\t\tshowKeyboardChanged = false;\n\t\tif (showKeyboard) fakeInput.focus();\n\t\telse fakeInput.blur();\n\t}\n}\n\nfunction updateForEvent(ev) {\n\tlastState &= ~(GDK_SHIFT_MASK | GDK_CONTROL_MASK | GDK_MOD1_MASK);\n\tif (ev.shiftKey) lastState |= GDK_SHIFT_MASK;\n\tif (ev.ctrlKey) lastState |= GDK_CONTROL_MASK;\n\tif (ev.altKey) lastState |= GDK_MOD1_MASK;\n\n\tlastTimeStamp = ev.timeStamp;\n}\n\nfunction onMouseMove(ev) {\n\tupdateForEvent(ev);\n\tvar id = getSurfaceId(ev);\n\tid = getEffectiveEventTarget(id);\n\tvar pos = getPositionsFromEvent(ev, id);\n\tsendInput(\"m\", [\n\t\trealWindowWithMouse,\n\t\tid,\n\t\tpos.rootX,\n\t\tpos.rootY,\n\t\tpos.winX,\n\t\tpos.winY,\n\t\tlastState,\n\t]);\n}\n\nfunction onMouseOver(ev) {\n\tupdateForEvent(ev);\n\n\tvar id = getSurfaceId(ev);\n\trealWindowWithMouse = id;\n\tid = getEffectiveEventTarget(id);\n\tvar pos = getPositionsFromEvent(ev, id);\n\twindowWithMouse = id;\n\tif (windowWithMouse != 0) {\n\t\tsendInput(\"e\", [\n\t\t\trealWindowWithMouse,\n\t\t\tid,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t\tGDK_CROSSING_NORMAL,\n\t\t]);\n\t}\n}\n\nfunction onMouseOut(ev) {\n\tupdateForEvent(ev);\n\tvar id = getSurfaceId(ev);\n\tvar origId = id;\n\tid = getEffectiveEventTarget(id);\n\tvar pos = getPositionsFromEvent(ev, id);\n\n\tif (id != 0) {\n\t\tsendInput(\"l\", [\n\t\t\trealWindowWithMouse,\n\t\t\tid,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t\tGDK_CROSSING_NORMAL,\n\t\t]);\n\t}\n\trealWindowWithMouse = 0;\n\twindowWithMouse = 0;\n}\n\nfunction doGrab(id, ownerEvents, implicit) {\n\tvar pos;\n\n\tif (windowWithMouse != id) {\n\t\tif (windowWithMouse != 0) {\n\t\t\tpos = getPositionsFromAbsCoord(lastX, lastY, windowWithMouse);\n\t\t\tsendInput(\"l\", [\n\t\t\t\trealWindowWithMouse,\n\t\t\t\twindowWithMouse,\n\t\t\t\tpos.rootX,\n\t\t\t\tpos.rootY,\n\t\t\t\tpos.winX,\n\t\t\t\tpos.winY,\n\t\t\t\tlastState,\n\t\t\t\tGDK_CROSSING_GRAB,\n\t\t\t]);\n\t\t}\n\t\tpos = getPositionsFromAbsCoord(lastX, lastY, id);\n\t\tsendInput(\"e\", [\n\t\t\trealWindowWithMouse,\n\t\t\tid,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t\tGDK_CROSSING_GRAB,\n\t\t]);\n\t\twindowWithMouse = id;\n\t}\n\n\tgrab.window = id;\n\tgrab.ownerEvents = ownerEvents;\n\tgrab.implicit = implicit;\n}\n\nfunction doUngrab() {\n\tvar pos;\n\tif (realWindowWithMouse != windowWithMouse) {\n\t\tif (windowWithMouse != 0) {\n\t\t\tpos = getPositionsFromAbsCoord(lastX, lastY, windowWithMouse);\n\t\t\tsendInput(\"l\", [\n\t\t\t\trealWindowWithMouse,\n\t\t\t\twindowWithMouse,\n\t\t\t\tpos.rootX,\n\t\t\t\tpos.rootY,\n\t\t\t\tpos.winX,\n\t\t\t\tpos.winY,\n\t\t\t\tlastState,\n\t\t\t\tGDK_CROSSING_UNGRAB,\n\t\t\t]);\n\t\t}\n\t\tif (realWindowWithMouse != 0) {\n\t\t\tpos = getPositionsFromAbsCoord(lastX, lastY, realWindowWithMouse);\n\t\t\tsendInput(\"e\", [\n\t\t\t\trealWindowWithMouse,\n\t\t\t\trealWindowWithMouse,\n\t\t\t\tpos.rootX,\n\t\t\t\tpos.rootY,\n\t\t\t\tpos.winX,\n\t\t\t\tpos.winY,\n\t\t\t\tlastState,\n\t\t\t\tGDK_CROSSING_UNGRAB,\n\t\t\t]);\n\t\t}\n\t\twindowWithMouse = realWindowWithMouse;\n\t}\n\tgrab.window = null;\n}\n\nfunction onMouseDown(ev) {\n\tupdateForEvent(ev);\n\tvar button = ev.button + 1;\n\tlastState = lastState | getButtonMask(button);\n\tvar id = getSurfaceId(ev);\n\tid = getEffectiveEventTarget(id);\n\n\tvar pos = getPositionsFromEvent(ev, id);\n\tif (grab.window == null) doGrab(id, false, true);\n\tsendInput(\"b\", [\n\t\trealWindowWithMouse,\n\t\tid,\n\t\tpos.rootX,\n\t\tpos.rootY,\n\t\tpos.winX,\n\t\tpos.winY,\n\t\tlastState,\n\t\tbutton,\n\t]);\n\treturn false;\n}\n\nfunction onMouseUp(ev) {\n\tupdateForEvent(ev);\n\tvar button = ev.button + 1;\n\tlastState = lastState & ~getButtonMask(button);\n\tvar evId = getSurfaceId(ev);\n\tlet id = getEffectiveEventTarget(evId);\n\tvar pos = getPositionsFromEvent(ev, id);\n\n\tsendInput(\"B\", [\n\t\trealWindowWithMouse,\n\t\tid,\n\t\tpos.rootX,\n\t\tpos.rootY,\n\t\tpos.winX,\n\t\tpos.winY,\n\t\tlastState,\n\t\tbutton,\n\t]);\n\n\tif (grab.window != null && grab.implicit) doUngrab();\n\n\treturn false;\n}\n\n/* Some of the keyboard handling code is from noVNC and\n * (c) Joel Martin (github@martintribe.org), used with permission\n *  Original code at:\n * https://github.com/kanaka/noVNC/blob/master/include/input.js\n */\n\nvar unicodeTable = {\n\t0x0104: 0x01a1,\n\t0x02d8: 0x01a2,\n\t0x0141: 0x01a3,\n\t0x013d: 0x01a5,\n\t0x015a: 0x01a6,\n\t0x0160: 0x01a9,\n\t0x015e: 0x01aa,\n\t0x0164: 0x01ab,\n\t0x0179: 0x01ac,\n\t0x017d: 0x01ae,\n\t0x017b: 0x01af,\n\t0x0105: 0x01b1,\n\t0x02db: 0x01b2,\n\t0x0142: 0x01b3,\n\t0x013e: 0x01b5,\n\t0x015b: 0x01b6,\n\t0x02c7: 0x01b7,\n\t0x0161: 0x01b9,\n\t0x015f: 0x01ba,\n\t0x0165: 0x01bb,\n\t0x017a: 0x01bc,\n\t0x02dd: 0x01bd,\n\t0x017e: 0x01be,\n\t0x017c: 0x01bf,\n\t0x0154: 0x01c0,\n\t0x0102: 0x01c3,\n\t0x0139: 0x01c5,\n\t0x0106: 0x01c6,\n\t0x010c: 0x01c8,\n\t0x0118: 0x01ca,\n\t0x011a: 0x01cc,\n\t0x010e: 0x01cf,\n\t0x0110: 0x01d0,\n\t0x0143: 0x01d1,\n\t0x0147: 0x01d2,\n\t0x0150: 0x01d5,\n\t0x0158: 0x01d8,\n\t0x016e: 0x01d9,\n\t0x0170: 0x01db,\n\t0x0162: 0x01de,\n\t0x0155: 0x01e0,\n\t0x0103: 0x01e3,\n\t0x013a: 0x01e5,\n\t0x0107: 0x01e6,\n\t0x010d: 0x01e8,\n\t0x0119: 0x01ea,\n\t0x011b: 0x01ec,\n\t0x010f: 0x01ef,\n\t0x0111: 0x01f0,\n\t0x0144: 0x01f1,\n\t0x0148: 0x01f2,\n\t0x0151: 0x01f5,\n\t0x0171: 0x01fb,\n\t0x0159: 0x01f8,\n\t0x016f: 0x01f9,\n\t0x0163: 0x01fe,\n\t0x02d9: 0x01ff,\n\t0x0126: 0x02a1,\n\t0x0124: 0x02a6,\n\t0x0130: 0x02a9,\n\t0x011e: 0x02ab,\n\t0x0134: 0x02ac,\n\t0x0127: 0x02b1,\n\t0x0125: 0x02b6,\n\t0x0131: 0x02b9,\n\t0x011f: 0x02bb,\n\t0x0135: 0x02bc,\n\t0x010a: 0x02c5,\n\t0x0108: 0x02c6,\n\t0x0120: 0x02d5,\n\t0x011c: 0x02d8,\n\t0x016c: 0x02dd,\n\t0x015c: 0x02de,\n\t0x010b: 0x02e5,\n\t0x0109: 0x02e6,\n\t0x0121: 0x02f5,\n\t0x011d: 0x02f8,\n\t0x016d: 0x02fd,\n\t0x015d: 0x02fe,\n\t0x0138: 0x03a2,\n\t0x0156: 0x03a3,\n\t0x0128: 0x03a5,\n\t0x013b: 0x03a6,\n\t0x0112: 0x03aa,\n\t0x0122: 0x03ab,\n\t0x0166: 0x03ac,\n\t0x0157: 0x03b3,\n\t0x0129: 0x03b5,\n\t0x013c: 0x03b6,\n\t0x0113: 0x03ba,\n\t0x0123: 0x03bb,\n\t0x0167: 0x03bc,\n\t0x014a: 0x03bd,\n\t0x014b: 0x03bf,\n\t0x0100: 0x03c0,\n\t0x012e: 0x03c7,\n\t0x0116: 0x03cc,\n\t0x012a: 0x03cf,\n\t0x0145: 0x03d1,\n\t0x014c: 0x03d2,\n\t0x0136: 0x03d3,\n\t0x0172: 0x03d9,\n\t0x0168: 0x03dd,\n\t0x016a: 0x03de,\n\t0x0101: 0x03e0,\n\t0x012f: 0x03e7,\n\t0x0117: 0x03ec,\n\t0x012b: 0x03ef,\n\t0x0146: 0x03f1,\n\t0x014d: 0x03f2,\n\t0x0137: 0x03f3,\n\t0x0173: 0x03f9,\n\t0x0169: 0x03fd,\n\t0x016b: 0x03fe,\n\t0x1e02: 0x1001e02,\n\t0x1e03: 0x1001e03,\n\t0x1e0a: 0x1001e0a,\n\t0x1e80: 0x1001e80,\n\t0x1e82: 0x1001e82,\n\t0x1e0b: 0x1001e0b,\n\t0x1ef2: 0x1001ef2,\n\t0x1e1e: 0x1001e1e,\n\t0x1e1f: 0x1001e1f,\n\t0x1e40: 0x1001e40,\n\t0x1e41: 0x1001e41,\n\t0x1e56: 0x1001e56,\n\t0x1e81: 0x1001e81,\n\t0x1e57: 0x1001e57,\n\t0x1e83: 0x1001e83,\n\t0x1e60: 0x1001e60,\n\t0x1ef3: 0x1001ef3,\n\t0x1e84: 0x1001e84,\n\t0x1e85: 0x1001e85,\n\t0x1e61: 0x1001e61,\n\t0x0174: 0x1000174,\n\t0x1e6a: 0x1001e6a,\n\t0x0176: 0x1000176,\n\t0x0175: 0x1000175,\n\t0x1e6b: 0x1001e6b,\n\t0x0177: 0x1000177,\n\t0x0152: 0x13bc,\n\t0x0153: 0x13bd,\n\t0x0178: 0x13be,\n\t0x203e: 0x047e,\n\t0x3002: 0x04a1,\n\t0x300c: 0x04a2,\n\t0x300d: 0x04a3,\n\t0x3001: 0x04a4,\n\t0x30fb: 0x04a5,\n\t0x30f2: 0x04a6,\n\t0x30a1: 0x04a7,\n\t0x30a3: 0x04a8,\n\t0x30a5: 0x04a9,\n\t0x30a7: 0x04aa,\n\t0x30a9: 0x04ab,\n\t0x30e3: 0x04ac,\n\t0x30e5: 0x04ad,\n\t0x30e7: 0x04ae,\n\t0x30c3: 0x04af,\n\t0x30fc: 0x04b0,\n\t0x30a2: 0x04b1,\n\t0x30a4: 0x04b2,\n\t0x30a6: 0x04b3,\n\t0x30a8: 0x04b4,\n\t0x30aa: 0x04b5,\n\t0x30ab: 0x04b6,\n\t0x30ad: 0x04b7,\n\t0x30af: 0x04b8,\n\t0x30b1: 0x04b9,\n\t0x30b3: 0x04ba,\n\t0x30b5: 0x04bb,\n\t0x30b7: 0x04bc,\n\t0x30b9: 0x04bd,\n\t0x30bb: 0x04be,\n\t0x30bd: 0x04bf,\n\t0x30bf: 0x04c0,\n\t0x30c1: 0x04c1,\n\t0x30c4: 0x04c2,\n\t0x30c6: 0x04c3,\n\t0x30c8: 0x04c4,\n\t0x30ca: 0x04c5,\n\t0x30cb: 0x04c6,\n\t0x30cc: 0x04c7,\n\t0x30cd: 0x04c8,\n\t0x30ce: 0x04c9,\n\t0x30cf: 0x04ca,\n\t0x30d2: 0x04cb,\n\t0x30d5: 0x04cc,\n\t0x30d8: 0x04cd,\n\t0x30db: 0x04ce,\n\t0x30de: 0x04cf,\n\t0x30df: 0x04d0,\n\t0x30e0: 0x04d1,\n\t0x30e1: 0x04d2,\n\t0x30e2: 0x04d3,\n\t0x30e4: 0x04d4,\n\t0x30e6: 0x04d5,\n\t0x30e8: 0x04d6,\n\t0x30e9: 0x04d7,\n\t0x30ea: 0x04d8,\n\t0x30eb: 0x04d9,\n\t0x30ec: 0x04da,\n\t0x30ed: 0x04db,\n\t0x30ef: 0x04dc,\n\t0x30f3: 0x04dd,\n\t0x309b: 0x04de,\n\t0x309c: 0x04df,\n\t0x06f0: 0x10006f0,\n\t0x06f1: 0x10006f1,\n\t0x06f2: 0x10006f2,\n\t0x06f3: 0x10006f3,\n\t0x06f4: 0x10006f4,\n\t0x06f5: 0x10006f5,\n\t0x06f6: 0x10006f6,\n\t0x06f7: 0x10006f7,\n\t0x06f8: 0x10006f8,\n\t0x06f9: 0x10006f9,\n\t0x066a: 0x100066a,\n\t0x0670: 0x1000670,\n\t0x0679: 0x1000679,\n\t0x067e: 0x100067e,\n\t0x0686: 0x1000686,\n\t0x0688: 0x1000688,\n\t0x0691: 0x1000691,\n\t0x060c: 0x05ac,\n\t0x06d4: 0x10006d4,\n\t0x0660: 0x1000660,\n\t0x0661: 0x1000661,\n\t0x0662: 0x1000662,\n\t0x0663: 0x1000663,\n\t0x0664: 0x1000664,\n\t0x0665: 0x1000665,\n\t0x0666: 0x1000666,\n\t0x0667: 0x1000667,\n\t0x0668: 0x1000668,\n\t0x0669: 0x1000669,\n\t0x061b: 0x05bb,\n\t0x061f: 0x05bf,\n\t0x0621: 0x05c1,\n\t0x0622: 0x05c2,\n\t0x0623: 0x05c3,\n\t0x0624: 0x05c4,\n\t0x0625: 0x05c5,\n\t0x0626: 0x05c6,\n\t0x0627: 0x05c7,\n\t0x0628: 0x05c8,\n\t0x0629: 0x05c9,\n\t0x062a: 0x05ca,\n\t0x062b: 0x05cb,\n\t0x062c: 0x05cc,\n\t0x062d: 0x05cd,\n\t0x062e: 0x05ce,\n\t0x062f: 0x05cf,\n\t0x0630: 0x05d0,\n\t0x0631: 0x05d1,\n\t0x0632: 0x05d2,\n\t0x0633: 0x05d3,\n\t0x0634: 0x05d4,\n\t0x0635: 0x05d5,\n\t0x0636: 0x05d6,\n\t0x0637: 0x05d7,\n\t0x0638: 0x05d8,\n\t0x0639: 0x05d9,\n\t0x063a: 0x05da,\n\t0x0640: 0x05e0,\n\t0x0641: 0x05e1,\n\t0x0642: 0x05e2,\n\t0x0643: 0x05e3,\n\t0x0644: 0x05e4,\n\t0x0645: 0x05e5,\n\t0x0646: 0x05e6,\n\t0x0647: 0x05e7,\n\t0x0648: 0x05e8,\n\t0x0649: 0x05e9,\n\t0x064a: 0x05ea,\n\t0x064b: 0x05eb,\n\t0x064c: 0x05ec,\n\t0x064d: 0x05ed,\n\t0x064e: 0x05ee,\n\t0x064f: 0x05ef,\n\t0x0650: 0x05f0,\n\t0x0651: 0x05f1,\n\t0x0652: 0x05f2,\n\t0x0653: 0x1000653,\n\t0x0654: 0x1000654,\n\t0x0655: 0x1000655,\n\t0x0698: 0x1000698,\n\t0x06a4: 0x10006a4,\n\t0x06a9: 0x10006a9,\n\t0x06af: 0x10006af,\n\t0x06ba: 0x10006ba,\n\t0x06be: 0x10006be,\n\t0x06cc: 0x10006cc,\n\t0x06d2: 0x10006d2,\n\t0x06c1: 0x10006c1,\n\t0x0492: 0x1000492,\n\t0x0493: 0x1000493,\n\t0x0496: 0x1000496,\n\t0x0497: 0x1000497,\n\t0x049a: 0x100049a,\n\t0x049b: 0x100049b,\n\t0x049c: 0x100049c,\n\t0x049d: 0x100049d,\n\t0x04a2: 0x10004a2,\n\t0x04a3: 0x10004a3,\n\t0x04ae: 0x10004ae,\n\t0x04af: 0x10004af,\n\t0x04b0: 0x10004b0,\n\t0x04b1: 0x10004b1,\n\t0x04b2: 0x10004b2,\n\t0x04b3: 0x10004b3,\n\t0x04b6: 0x10004b6,\n\t0x04b7: 0x10004b7,\n\t0x04b8: 0x10004b8,\n\t0x04b9: 0x10004b9,\n\t0x04ba: 0x10004ba,\n\t0x04bb: 0x10004bb,\n\t0x04d8: 0x10004d8,\n\t0x04d9: 0x10004d9,\n\t0x04e2: 0x10004e2,\n\t0x04e3: 0x10004e3,\n\t0x04e8: 0x10004e8,\n\t0x04e9: 0x10004e9,\n\t0x04ee: 0x10004ee,\n\t0x04ef: 0x10004ef,\n\t0x0452: 0x06a1,\n\t0x0453: 0x06a2,\n\t0x0451: 0x06a3,\n\t0x0454: 0x06a4,\n\t0x0455: 0x06a5,\n\t0x0456: 0x06a6,\n\t0x0457: 0x06a7,\n\t0x0458: 0x06a8,\n\t0x0459: 0x06a9,\n\t0x045a: 0x06aa,\n\t0x045b: 0x06ab,\n\t0x045c: 0x06ac,\n\t0x0491: 0x06ad,\n\t0x045e: 0x06ae,\n\t0x045f: 0x06af,\n\t0x2116: 0x06b0,\n\t0x0402: 0x06b1,\n\t0x0403: 0x06b2,\n\t0x0401: 0x06b3,\n\t0x0404: 0x06b4,\n\t0x0405: 0x06b5,\n\t0x0406: 0x06b6,\n\t0x0407: 0x06b7,\n\t0x0408: 0x06b8,\n\t0x0409: 0x06b9,\n\t0x040a: 0x06ba,\n\t0x040b: 0x06bb,\n\t0x040c: 0x06bc,\n\t0x0490: 0x06bd,\n\t0x040e: 0x06be,\n\t0x040f: 0x06bf,\n\t0x044e: 0x06c0,\n\t0x0430: 0x06c1,\n\t0x0431: 0x06c2,\n\t0x0446: 0x06c3,\n\t0x0434: 0x06c4,\n\t0x0435: 0x06c5,\n\t0x0444: 0x06c6,\n\t0x0433: 0x06c7,\n\t0x0445: 0x06c8,\n\t0x0438: 0x06c9,\n\t0x0439: 0x06ca,\n\t0x043a: 0x06cb,\n\t0x043b: 0x06cc,\n\t0x043c: 0x06cd,\n\t0x043d: 0x06ce,\n\t0x043e: 0x06cf,\n\t0x043f: 0x06d0,\n\t0x044f: 0x06d1,\n\t0x0440: 0x06d2,\n\t0x0441: 0x06d3,\n\t0x0442: 0x06d4,\n\t0x0443: 0x06d5,\n\t0x0436: 0x06d6,\n\t0x0432: 0x06d7,\n\t0x044c: 0x06d8,\n\t0x044b: 0x06d9,\n\t0x0437: 0x06da,\n\t0x0448: 0x06db,\n\t0x044d: 0x06dc,\n\t0x0449: 0x06dd,\n\t0x0447: 0x06de,\n\t0x044a: 0x06df,\n\t0x042e: 0x06e0,\n\t0x0410: 0x06e1,\n\t0x0411: 0x06e2,\n\t0x0426: 0x06e3,\n\t0x0414: 0x06e4,\n\t0x0415: 0x06e5,\n\t0x0424: 0x06e6,\n\t0x0413: 0x06e7,\n\t0x0425: 0x06e8,\n\t0x0418: 0x06e9,\n\t0x0419: 0x06ea,\n\t0x041a: 0x06eb,\n\t0x041b: 0x06ec,\n\t0x041c: 0x06ed,\n\t0x041d: 0x06ee,\n\t0x041e: 0x06ef,\n\t0x041f: 0x06f0,\n\t0x042f: 0x06f1,\n\t0x0420: 0x06f2,\n\t0x0421: 0x06f3,\n\t0x0422: 0x06f4,\n\t0x0423: 0x06f5,\n\t0x0416: 0x06f6,\n\t0x0412: 0x06f7,\n\t0x042c: 0x06f8,\n\t0x042b: 0x06f9,\n\t0x0417: 0x06fa,\n\t0x0428: 0x06fb,\n\t0x042d: 0x06fc,\n\t0x0429: 0x06fd,\n\t0x0427: 0x06fe,\n\t0x042a: 0x06ff,\n\t0x0386: 0x07a1,\n\t0x0388: 0x07a2,\n\t0x0389: 0x07a3,\n\t0x038a: 0x07a4,\n\t0x03aa: 0x07a5,\n\t0x038c: 0x07a7,\n\t0x038e: 0x07a8,\n\t0x03ab: 0x07a9,\n\t0x038f: 0x07ab,\n\t0x0385: 0x07ae,\n\t0x2015: 0x07af,\n\t0x03ac: 0x07b1,\n\t0x03ad: 0x07b2,\n\t0x03ae: 0x07b3,\n\t0x03af: 0x07b4,\n\t0x03ca: 0x07b5,\n\t0x0390: 0x07b6,\n\t0x03cc: 0x07b7,\n\t0x03cd: 0x07b8,\n\t0x03cb: 0x07b9,\n\t0x03b0: 0x07ba,\n\t0x03ce: 0x07bb,\n\t0x0391: 0x07c1,\n\t0x0392: 0x07c2,\n\t0x0393: 0x07c3,\n\t0x0394: 0x07c4,\n\t0x0395: 0x07c5,\n\t0x0396: 0x07c6,\n\t0x0397: 0x07c7,\n\t0x0398: 0x07c8,\n\t0x0399: 0x07c9,\n\t0x039a: 0x07ca,\n\t0x039b: 0x07cb,\n\t0x039c: 0x07cc,\n\t0x039d: 0x07cd,\n\t0x039e: 0x07ce,\n\t0x039f: 0x07cf,\n\t0x03a0: 0x07d0,\n\t0x03a1: 0x07d1,\n\t0x03a3: 0x07d2,\n\t0x03a4: 0x07d4,\n\t0x03a5: 0x07d5,\n\t0x03a6: 0x07d6,\n\t0x03a7: 0x07d7,\n\t0x03a8: 0x07d8,\n\t0x03a9: 0x07d9,\n\t0x03b1: 0x07e1,\n\t0x03b2: 0x07e2,\n\t0x03b3: 0x07e3,\n\t0x03b4: 0x07e4,\n\t0x03b5: 0x07e5,\n\t0x03b6: 0x07e6,\n\t0x03b7: 0x07e7,\n\t0x03b8: 0x07e8,\n\t0x03b9: 0x07e9,\n\t0x03ba: 0x07ea,\n\t0x03bb: 0x07eb,\n\t0x03bc: 0x07ec,\n\t0x03bd: 0x07ed,\n\t0x03be: 0x07ee,\n\t0x03bf: 0x07ef,\n\t0x03c0: 0x07f0,\n\t0x03c1: 0x07f1,\n\t0x03c3: 0x07f2,\n\t0x03c2: 0x07f3,\n\t0x03c4: 0x07f4,\n\t0x03c5: 0x07f5,\n\t0x03c6: 0x07f6,\n\t0x03c7: 0x07f7,\n\t0x03c8: 0x07f8,\n\t0x03c9: 0x07f9,\n\t0x23b7: 0x08a1,\n\t0x2320: 0x08a4,\n\t0x2321: 0x08a5,\n\t0x23a1: 0x08a7,\n\t0x23a3: 0x08a8,\n\t0x23a4: 0x08a9,\n\t0x23a6: 0x08aa,\n\t0x239b: 0x08ab,\n\t0x239d: 0x08ac,\n\t0x239e: 0x08ad,\n\t0x23a0: 0x08ae,\n\t0x23a8: 0x08af,\n\t0x23ac: 0x08b0,\n\t0x2264: 0x08bc,\n\t0x2260: 0x08bd,\n\t0x2265: 0x08be,\n\t0x222b: 0x08bf,\n\t0x2234: 0x08c0,\n\t0x221d: 0x08c1,\n\t0x221e: 0x08c2,\n\t0x2207: 0x08c5,\n\t0x223c: 0x08c8,\n\t0x2243: 0x08c9,\n\t0x21d4: 0x08cd,\n\t0x21d2: 0x08ce,\n\t0x2261: 0x08cf,\n\t0x221a: 0x08d6,\n\t0x2282: 0x08da,\n\t0x2283: 0x08db,\n\t0x2229: 0x08dc,\n\t0x222a: 0x08dd,\n\t0x2227: 0x08de,\n\t0x2228: 0x08df,\n\t0x2202: 0x08ef,\n\t0x0192: 0x08f6,\n\t0x2190: 0x08fb,\n\t0x2191: 0x08fc,\n\t0x2192: 0x08fd,\n\t0x2193: 0x08fe,\n\t0x25c6: 0x09e0,\n\t0x2592: 0x09e1,\n\t0x2409: 0x09e2,\n\t0x240c: 0x09e3,\n\t0x240d: 0x09e4,\n\t0x240a: 0x09e5,\n\t0x2424: 0x09e8,\n\t0x240b: 0x09e9,\n\t0x2518: 0x09ea,\n\t0x2510: 0x09eb,\n\t0x250c: 0x09ec,\n\t0x2514: 0x09ed,\n\t0x253c: 0x09ee,\n\t0x23ba: 0x09ef,\n\t0x23bb: 0x09f0,\n\t0x2500: 0x09f1,\n\t0x23bc: 0x09f2,\n\t0x23bd: 0x09f3,\n\t0x251c: 0x09f4,\n\t0x2524: 0x09f5,\n\t0x2534: 0x09f6,\n\t0x252c: 0x09f7,\n\t0x2502: 0x09f8,\n\t0x2003: 0x0aa1,\n\t0x2002: 0x0aa2,\n\t0x2004: 0x0aa3,\n\t0x2005: 0x0aa4,\n\t0x2007: 0x0aa5,\n\t0x2008: 0x0aa6,\n\t0x2009: 0x0aa7,\n\t0x200a: 0x0aa8,\n\t0x2014: 0x0aa9,\n\t0x2013: 0x0aaa,\n\t0x2026: 0x0aae,\n\t0x2025: 0x0aaf,\n\t0x2153: 0x0ab0,\n\t0x2154: 0x0ab1,\n\t0x2155: 0x0ab2,\n\t0x2156: 0x0ab3,\n\t0x2157: 0x0ab4,\n\t0x2158: 0x0ab5,\n\t0x2159: 0x0ab6,\n\t0x215a: 0x0ab7,\n\t0x2105: 0x0ab8,\n\t0x2012: 0x0abb,\n\t0x215b: 0x0ac3,\n\t0x215c: 0x0ac4,\n\t0x215d: 0x0ac5,\n\t0x215e: 0x0ac6,\n\t0x2122: 0x0ac9,\n\t0x2018: 0x0ad0,\n\t0x2019: 0x0ad1,\n\t0x201c: 0x0ad2,\n\t0x201d: 0x0ad3,\n\t0x211e: 0x0ad4,\n\t0x2032: 0x0ad6,\n\t0x2033: 0x0ad7,\n\t0x271d: 0x0ad9,\n\t0x2663: 0x0aec,\n\t0x2666: 0x0aed,\n\t0x2665: 0x0aee,\n\t0x2720: 0x0af0,\n\t0x2020: 0x0af1,\n\t0x2021: 0x0af2,\n\t0x2713: 0x0af3,\n\t0x2717: 0x0af4,\n\t0x266f: 0x0af5,\n\t0x266d: 0x0af6,\n\t0x2642: 0x0af7,\n\t0x2640: 0x0af8,\n\t0x260e: 0x0af9,\n\t0x2315: 0x0afa,\n\t0x2117: 0x0afb,\n\t0x2038: 0x0afc,\n\t0x201a: 0x0afd,\n\t0x201e: 0x0afe,\n\t0x22a4: 0x0bc2,\n\t0x230a: 0x0bc4,\n\t0x2218: 0x0bca,\n\t0x2395: 0x0bcc,\n\t0x22a5: 0x0bce,\n\t0x25cb: 0x0bcf,\n\t0x2308: 0x0bd3,\n\t0x22a3: 0x0bdc,\n\t0x22a2: 0x0bfc,\n\t0x2017: 0x0cdf,\n\t0x05d0: 0x0ce0,\n\t0x05d1: 0x0ce1,\n\t0x05d2: 0x0ce2,\n\t0x05d3: 0x0ce3,\n\t0x05d4: 0x0ce4,\n\t0x05d5: 0x0ce5,\n\t0x05d6: 0x0ce6,\n\t0x05d7: 0x0ce7,\n\t0x05d8: 0x0ce8,\n\t0x05d9: 0x0ce9,\n\t0x05da: 0x0cea,\n\t0x05db: 0x0ceb,\n\t0x05dc: 0x0cec,\n\t0x05dd: 0x0ced,\n\t0x05de: 0x0cee,\n\t0x05df: 0x0cef,\n\t0x05e0: 0x0cf0,\n\t0x05e1: 0x0cf1,\n\t0x05e2: 0x0cf2,\n\t0x05e3: 0x0cf3,\n\t0x05e4: 0x0cf4,\n\t0x05e5: 0x0cf5,\n\t0x05e6: 0x0cf6,\n\t0x05e7: 0x0cf7,\n\t0x05e8: 0x0cf8,\n\t0x05e9: 0x0cf9,\n\t0x05ea: 0x0cfa,\n\t0x0e01: 0x0da1,\n\t0x0e02: 0x0da2,\n\t0x0e03: 0x0da3,\n\t0x0e04: 0x0da4,\n\t0x0e05: 0x0da5,\n\t0x0e06: 0x0da6,\n\t0x0e07: 0x0da7,\n\t0x0e08: 0x0da8,\n\t0x0e09: 0x0da9,\n\t0x0e0a: 0x0daa,\n\t0x0e0b: 0x0dab,\n\t0x0e0c: 0x0dac,\n\t0x0e0d: 0x0dad,\n\t0x0e0e: 0x0dae,\n\t0x0e0f: 0x0daf,\n\t0x0e10: 0x0db0,\n\t0x0e11: 0x0db1,\n\t0x0e12: 0x0db2,\n\t0x0e13: 0x0db3,\n\t0x0e14: 0x0db4,\n\t0x0e15: 0x0db5,\n\t0x0e16: 0x0db6,\n\t0x0e17: 0x0db7,\n\t0x0e18: 0x0db8,\n\t0x0e19: 0x0db9,\n\t0x0e1a: 0x0dba,\n\t0x0e1b: 0x0dbb,\n\t0x0e1c: 0x0dbc,\n\t0x0e1d: 0x0dbd,\n\t0x0e1e: 0x0dbe,\n\t0x0e1f: 0x0dbf,\n\t0x0e20: 0x0dc0,\n\t0x0e21: 0x0dc1,\n\t0x0e22: 0x0dc2,\n\t0x0e23: 0x0dc3,\n\t0x0e24: 0x0dc4,\n\t0x0e25: 0x0dc5,\n\t0x0e26: 0x0dc6,\n\t0x0e27: 0x0dc7,\n\t0x0e28: 0x0dc8,\n\t0x0e29: 0x0dc9,\n\t0x0e2a: 0x0dca,\n\t0x0e2b: 0x0dcb,\n\t0x0e2c: 0x0dcc,\n\t0x0e2d: 0x0dcd,\n\t0x0e2e: 0x0dce,\n\t0x0e2f: 0x0dcf,\n\t0x0e30: 0x0dd0,\n\t0x0e31: 0x0dd1,\n\t0x0e32: 0x0dd2,\n\t0x0e33: 0x0dd3,\n\t0x0e34: 0x0dd4,\n\t0x0e35: 0x0dd5,\n\t0x0e36: 0x0dd6,\n\t0x0e37: 0x0dd7,\n\t0x0e38: 0x0dd8,\n\t0x0e39: 0x0dd9,\n\t0x0e3a: 0x0dda,\n\t0x0e3f: 0x0ddf,\n\t0x0e40: 0x0de0,\n\t0x0e41: 0x0de1,\n\t0x0e42: 0x0de2,\n\t0x0e43: 0x0de3,\n\t0x0e44: 0x0de4,\n\t0x0e45: 0x0de5,\n\t0x0e46: 0x0de6,\n\t0x0e47: 0x0de7,\n\t0x0e48: 0x0de8,\n\t0x0e49: 0x0de9,\n\t0x0e4a: 0x0dea,\n\t0x0e4b: 0x0deb,\n\t0x0e4c: 0x0dec,\n\t0x0e4d: 0x0ded,\n\t0x0e50: 0x0df0,\n\t0x0e51: 0x0df1,\n\t0x0e52: 0x0df2,\n\t0x0e53: 0x0df3,\n\t0x0e54: 0x0df4,\n\t0x0e55: 0x0df5,\n\t0x0e56: 0x0df6,\n\t0x0e57: 0x0df7,\n\t0x0e58: 0x0df8,\n\t0x0e59: 0x0df9,\n\t0x0587: 0x1000587,\n\t0x0589: 0x1000589,\n\t0x055d: 0x100055d,\n\t0x058a: 0x100058a,\n\t0x055c: 0x100055c,\n\t0x055b: 0x100055b,\n\t0x055e: 0x100055e,\n\t0x0531: 0x1000531,\n\t0x0561: 0x1000561,\n\t0x0532: 0x1000532,\n\t0x0562: 0x1000562,\n\t0x0533: 0x1000533,\n\t0x0563: 0x1000563,\n\t0x0534: 0x1000534,\n\t0x0564: 0x1000564,\n\t0x0535: 0x1000535,\n\t0x0565: 0x1000565,\n\t0x0536: 0x1000536,\n\t0x0566: 0x1000566,\n\t0x0537: 0x1000537,\n\t0x0567: 0x1000567,\n\t0x0538: 0x1000538,\n\t0x0568: 0x1000568,\n\t0x0539: 0x1000539,\n\t0x0569: 0x1000569,\n\t0x053a: 0x100053a,\n\t0x056a: 0x100056a,\n\t0x053b: 0x100053b,\n\t0x056b: 0x100056b,\n\t0x053c: 0x100053c,\n\t0x056c: 0x100056c,\n\t0x053d: 0x100053d,\n\t0x056d: 0x100056d,\n\t0x053e: 0x100053e,\n\t0x056e: 0x100056e,\n\t0x053f: 0x100053f,\n\t0x056f: 0x100056f,\n\t0x0540: 0x1000540,\n\t0x0570: 0x1000570,\n\t0x0541: 0x1000541,\n\t0x0571: 0x1000571,\n\t0x0542: 0x1000542,\n\t0x0572: 0x1000572,\n\t0x0543: 0x1000543,\n\t0x0573: 0x1000573,\n\t0x0544: 0x1000544,\n\t0x0574: 0x1000574,\n\t0x0545: 0x1000545,\n\t0x0575: 0x1000575,\n\t0x0546: 0x1000546,\n\t0x0576: 0x1000576,\n\t0x0547: 0x1000547,\n\t0x0577: 0x1000577,\n\t0x0548: 0x1000548,\n\t0x0578: 0x1000578,\n\t0x0549: 0x1000549,\n\t0x0579: 0x1000579,\n\t0x054a: 0x100054a,\n\t0x057a: 0x100057a,\n\t0x054b: 0x100054b,\n\t0x057b: 0x100057b,\n\t0x054c: 0x100054c,\n\t0x057c: 0x100057c,\n\t0x054d: 0x100054d,\n\t0x057d: 0x100057d,\n\t0x054e: 0x100054e,\n\t0x057e: 0x100057e,\n\t0x054f: 0x100054f,\n\t0x057f: 0x100057f,\n\t0x0550: 0x1000550,\n\t0x0580: 0x1000580,\n\t0x0551: 0x1000551,\n\t0x0581: 0x1000581,\n\t0x0552: 0x1000552,\n\t0x0582: 0x1000582,\n\t0x0553: 0x1000553,\n\t0x0583: 0x1000583,\n\t0x0554: 0x1000554,\n\t0x0584: 0x1000584,\n\t0x0555: 0x1000555,\n\t0x0585: 0x1000585,\n\t0x0556: 0x1000556,\n\t0x0586: 0x1000586,\n\t0x055a: 0x100055a,\n\t0x10d0: 0x10010d0,\n\t0x10d1: 0x10010d1,\n\t0x10d2: 0x10010d2,\n\t0x10d3: 0x10010d3,\n\t0x10d4: 0x10010d4,\n\t0x10d5: 0x10010d5,\n\t0x10d6: 0x10010d6,\n\t0x10d7: 0x10010d7,\n\t0x10d8: 0x10010d8,\n\t0x10d9: 0x10010d9,\n\t0x10da: 0x10010da,\n\t0x10db: 0x10010db,\n\t0x10dc: 0x10010dc,\n\t0x10dd: 0x10010dd,\n\t0x10de: 0x10010de,\n\t0x10df: 0x10010df,\n\t0x10e0: 0x10010e0,\n\t0x10e1: 0x10010e1,\n\t0x10e2: 0x10010e2,\n\t0x10e3: 0x10010e3,\n\t0x10e4: 0x10010e4,\n\t0x10e5: 0x10010e5,\n\t0x10e6: 0x10010e6,\n\t0x10e7: 0x10010e7,\n\t0x10e8: 0x10010e8,\n\t0x10e9: 0x10010e9,\n\t0x10ea: 0x10010ea,\n\t0x10eb: 0x10010eb,\n\t0x10ec: 0x10010ec,\n\t0x10ed: 0x10010ed,\n\t0x10ee: 0x10010ee,\n\t0x10ef: 0x10010ef,\n\t0x10f0: 0x10010f0,\n\t0x10f1: 0x10010f1,\n\t0x10f2: 0x10010f2,\n\t0x10f3: 0x10010f3,\n\t0x10f4: 0x10010f4,\n\t0x10f5: 0x10010f5,\n\t0x10f6: 0x10010f6,\n\t0x1e8a: 0x1001e8a,\n\t0x012c: 0x100012c,\n\t0x01b5: 0x10001b5,\n\t0x01e6: 0x10001e6,\n\t0x01d2: 0x10001d1,\n\t0x019f: 0x100019f,\n\t0x1e8b: 0x1001e8b,\n\t0x012d: 0x100012d,\n\t0x01b6: 0x10001b6,\n\t0x01e7: 0x10001e7,\n\t0x01d2: 0x10001d2,\n\t0x0275: 0x1000275,\n\t0x018f: 0x100018f,\n\t0x0259: 0x1000259,\n\t0x1e36: 0x1001e36,\n\t0x1e37: 0x1001e37,\n\t0x1ea0: 0x1001ea0,\n\t0x1ea1: 0x1001ea1,\n\t0x1ea2: 0x1001ea2,\n\t0x1ea3: 0x1001ea3,\n\t0x1ea4: 0x1001ea4,\n\t0x1ea5: 0x1001ea5,\n\t0x1ea6: 0x1001ea6,\n\t0x1ea7: 0x1001ea7,\n\t0x1ea8: 0x1001ea8,\n\t0x1ea9: 0x1001ea9,\n\t0x1eaa: 0x1001eaa,\n\t0x1eab: 0x1001eab,\n\t0x1eac: 0x1001eac,\n\t0x1ead: 0x1001ead,\n\t0x1eae: 0x1001eae,\n\t0x1eaf: 0x1001eaf,\n\t0x1eb0: 0x1001eb0,\n\t0x1eb1: 0x1001eb1,\n\t0x1eb2: 0x1001eb2,\n\t0x1eb3: 0x1001eb3,\n\t0x1eb4: 0x1001eb4,\n\t0x1eb5: 0x1001eb5,\n\t0x1eb6: 0x1001eb6,\n\t0x1eb7: 0x1001eb7,\n\t0x1eb8: 0x1001eb8,\n\t0x1eb9: 0x1001eb9,\n\t0x1eba: 0x1001eba,\n\t0x1ebb: 0x1001ebb,\n\t0x1ebc: 0x1001ebc,\n\t0x1ebd: 0x1001ebd,\n\t0x1ebe: 0x1001ebe,\n\t0x1ebf: 0x1001ebf,\n\t0x1ec0: 0x1001ec0,\n\t0x1ec1: 0x1001ec1,\n\t0x1ec2: 0x1001ec2,\n\t0x1ec3: 0x1001ec3,\n\t0x1ec4: 0x1001ec4,\n\t0x1ec5: 0x1001ec5,\n\t0x1ec6: 0x1001ec6,\n\t0x1ec7: 0x1001ec7,\n\t0x1ec8: 0x1001ec8,\n\t0x1ec9: 0x1001ec9,\n\t0x1eca: 0x1001eca,\n\t0x1ecb: 0x1001ecb,\n\t0x1ecc: 0x1001ecc,\n\t0x1ecd: 0x1001ecd,\n\t0x1ece: 0x1001ece,\n\t0x1ecf: 0x1001ecf,\n\t0x1ed0: 0x1001ed0,\n\t0x1ed1: 0x1001ed1,\n\t0x1ed2: 0x1001ed2,\n\t0x1ed3: 0x1001ed3,\n\t0x1ed4: 0x1001ed4,\n\t0x1ed5: 0x1001ed5,\n\t0x1ed6: 0x1001ed6,\n\t0x1ed7: 0x1001ed7,\n\t0x1ed8: 0x1001ed8,\n\t0x1ed9: 0x1001ed9,\n\t0x1eda: 0x1001eda,\n\t0x1edb: 0x1001edb,\n\t0x1edc: 0x1001edc,\n\t0x1edd: 0x1001edd,\n\t0x1ede: 0x1001ede,\n\t0x1edf: 0x1001edf,\n\t0x1ee0: 0x1001ee0,\n\t0x1ee1: 0x1001ee1,\n\t0x1ee2: 0x1001ee2,\n\t0x1ee3: 0x1001ee3,\n\t0x1ee4: 0x1001ee4,\n\t0x1ee5: 0x1001ee5,\n\t0x1ee6: 0x1001ee6,\n\t0x1ee7: 0x1001ee7,\n\t0x1ee8: 0x1001ee8,\n\t0x1ee9: 0x1001ee9,\n\t0x1eea: 0x1001eea,\n\t0x1eeb: 0x1001eeb,\n\t0x1eec: 0x1001eec,\n\t0x1eed: 0x1001eed,\n\t0x1eee: 0x1001eee,\n\t0x1eef: 0x1001eef,\n\t0x1ef0: 0x1001ef0,\n\t0x1ef1: 0x1001ef1,\n\t0x1ef4: 0x1001ef4,\n\t0x1ef5: 0x1001ef5,\n\t0x1ef6: 0x1001ef6,\n\t0x1ef7: 0x1001ef7,\n\t0x1ef8: 0x1001ef8,\n\t0x1ef9: 0x1001ef9,\n\t0x01a0: 0x10001a0,\n\t0x01a1: 0x10001a1,\n\t0x01af: 0x10001af,\n\t0x01b0: 0x10001b0,\n\t0x20a0: 0x10020a0,\n\t0x20a1: 0x10020a1,\n\t0x20a2: 0x10020a2,\n\t0x20a3: 0x10020a3,\n\t0x20a4: 0x10020a4,\n\t0x20a5: 0x10020a5,\n\t0x20a6: 0x10020a6,\n\t0x20a7: 0x10020a7,\n\t0x20a8: 0x10020a8,\n\t0x20a9: 0x10020a9,\n\t0x20aa: 0x10020aa,\n\t0x20ab: 0x10020ab,\n\t0x20ac: 0x20ac,\n\t0x2070: 0x1002070,\n\t0x2074: 0x1002074,\n\t0x2075: 0x1002075,\n\t0x2076: 0x1002076,\n\t0x2077: 0x1002077,\n\t0x2078: 0x1002078,\n\t0x2079: 0x1002079,\n\t0x2080: 0x1002080,\n\t0x2081: 0x1002081,\n\t0x2082: 0x1002082,\n\t0x2083: 0x1002083,\n\t0x2084: 0x1002084,\n\t0x2085: 0x1002085,\n\t0x2086: 0x1002086,\n\t0x2087: 0x1002087,\n\t0x2088: 0x1002088,\n\t0x2089: 0x1002089,\n\t0x2202: 0x1002202,\n\t0x2205: 0x1002205,\n\t0x2208: 0x1002208,\n\t0x2209: 0x1002209,\n\t0x220b: 0x100220b,\n\t0x221a: 0x100221a,\n\t0x221b: 0x100221b,\n\t0x221c: 0x100221c,\n\t0x222c: 0x100222c,\n\t0x222d: 0x100222d,\n\t0x2235: 0x1002235,\n\t0x2245: 0x1002248,\n\t0x2247: 0x1002247,\n\t0x2262: 0x1002262,\n\t0x2263: 0x1002263,\n\t0x2800: 0x1002800,\n\t0x2801: 0x1002801,\n\t0x2802: 0x1002802,\n\t0x2803: 0x1002803,\n\t0x2804: 0x1002804,\n\t0x2805: 0x1002805,\n\t0x2806: 0x1002806,\n\t0x2807: 0x1002807,\n\t0x2808: 0x1002808,\n\t0x2809: 0x1002809,\n\t0x280a: 0x100280a,\n\t0x280b: 0x100280b,\n\t0x280c: 0x100280c,\n\t0x280d: 0x100280d,\n\t0x280e: 0x100280e,\n\t0x280f: 0x100280f,\n\t0x2810: 0x1002810,\n\t0x2811: 0x1002811,\n\t0x2812: 0x1002812,\n\t0x2813: 0x1002813,\n\t0x2814: 0x1002814,\n\t0x2815: 0x1002815,\n\t0x2816: 0x1002816,\n\t0x2817: 0x1002817,\n\t0x2818: 0x1002818,\n\t0x2819: 0x1002819,\n\t0x281a: 0x100281a,\n\t0x281b: 0x100281b,\n\t0x281c: 0x100281c,\n\t0x281d: 0x100281d,\n\t0x281e: 0x100281e,\n\t0x281f: 0x100281f,\n\t0x2820: 0x1002820,\n\t0x2821: 0x1002821,\n\t0x2822: 0x1002822,\n\t0x2823: 0x1002823,\n\t0x2824: 0x1002824,\n\t0x2825: 0x1002825,\n\t0x2826: 0x1002826,\n\t0x2827: 0x1002827,\n\t0x2828: 0x1002828,\n\t0x2829: 0x1002829,\n\t0x282a: 0x100282a,\n\t0x282b: 0x100282b,\n\t0x282c: 0x100282c,\n\t0x282d: 0x100282d,\n\t0x282e: 0x100282e,\n\t0x282f: 0x100282f,\n\t0x2830: 0x1002830,\n\t0x2831: 0x1002831,\n\t0x2832: 0x1002832,\n\t0x2833: 0x1002833,\n\t0x2834: 0x1002834,\n\t0x2835: 0x1002835,\n\t0x2836: 0x1002836,\n\t0x2837: 0x1002837,\n\t0x2838: 0x1002838,\n\t0x2839: 0x1002839,\n\t0x283a: 0x100283a,\n\t0x283b: 0x100283b,\n\t0x283c: 0x100283c,\n\t0x283d: 0x100283d,\n\t0x283e: 0x100283e,\n\t0x283f: 0x100283f,\n\t0x2840: 0x1002840,\n\t0x2841: 0x1002841,\n\t0x2842: 0x1002842,\n\t0x2843: 0x1002843,\n\t0x2844: 0x1002844,\n\t0x2845: 0x1002845,\n\t0x2846: 0x1002846,\n\t0x2847: 0x1002847,\n\t0x2848: 0x1002848,\n\t0x2849: 0x1002849,\n\t0x284a: 0x100284a,\n\t0x284b: 0x100284b,\n\t0x284c: 0x100284c,\n\t0x284d: 0x100284d,\n\t0x284e: 0x100284e,\n\t0x284f: 0x100284f,\n\t0x2850: 0x1002850,\n\t0x2851: 0x1002851,\n\t0x2852: 0x1002852,\n\t0x2853: 0x1002853,\n\t0x2854: 0x1002854,\n\t0x2855: 0x1002855,\n\t0x2856: 0x1002856,\n\t0x2857: 0x1002857,\n\t0x2858: 0x1002858,\n\t0x2859: 0x1002859,\n\t0x285a: 0x100285a,\n\t0x285b: 0x100285b,\n\t0x285c: 0x100285c,\n\t0x285d: 0x100285d,\n\t0x285e: 0x100285e,\n\t0x285f: 0x100285f,\n\t0x2860: 0x1002860,\n\t0x2861: 0x1002861,\n\t0x2862: 0x1002862,\n\t0x2863: 0x1002863,\n\t0x2864: 0x1002864,\n\t0x2865: 0x1002865,\n\t0x2866: 0x1002866,\n\t0x2867: 0x1002867,\n\t0x2868: 0x1002868,\n\t0x2869: 0x1002869,\n\t0x286a: 0x100286a,\n\t0x286b: 0x100286b,\n\t0x286c: 0x100286c,\n\t0x286d: 0x100286d,\n\t0x286e: 0x100286e,\n\t0x286f: 0x100286f,\n\t0x2870: 0x1002870,\n\t0x2871: 0x1002871,\n\t0x2872: 0x1002872,\n\t0x2873: 0x1002873,\n\t0x2874: 0x1002874,\n\t0x2875: 0x1002875,\n\t0x2876: 0x1002876,\n\t0x2877: 0x1002877,\n\t0x2878: 0x1002878,\n\t0x2879: 0x1002879,\n\t0x287a: 0x100287a,\n\t0x287b: 0x100287b,\n\t0x287c: 0x100287c,\n\t0x287d: 0x100287d,\n\t0x287e: 0x100287e,\n\t0x287f: 0x100287f,\n\t0x2880: 0x1002880,\n\t0x2881: 0x1002881,\n\t0x2882: 0x1002882,\n\t0x2883: 0x1002883,\n\t0x2884: 0x1002884,\n\t0x2885: 0x1002885,\n\t0x2886: 0x1002886,\n\t0x2887: 0x1002887,\n\t0x2888: 0x1002888,\n\t0x2889: 0x1002889,\n\t0x288a: 0x100288a,\n\t0x288b: 0x100288b,\n\t0x288c: 0x100288c,\n\t0x288d: 0x100288d,\n\t0x288e: 0x100288e,\n\t0x288f: 0x100288f,\n\t0x2890: 0x1002890,\n\t0x2891: 0x1002891,\n\t0x2892: 0x1002892,\n\t0x2893: 0x1002893,\n\t0x2894: 0x1002894,\n\t0x2895: 0x1002895,\n\t0x2896: 0x1002896,\n\t0x2897: 0x1002897,\n\t0x2898: 0x1002898,\n\t0x2899: 0x1002899,\n\t0x289a: 0x100289a,\n\t0x289b: 0x100289b,\n\t0x289c: 0x100289c,\n\t0x289d: 0x100289d,\n\t0x289e: 0x100289e,\n\t0x289f: 0x100289f,\n\t0x28a0: 0x10028a0,\n\t0x28a1: 0x10028a1,\n\t0x28a2: 0x10028a2,\n\t0x28a3: 0x10028a3,\n\t0x28a4: 0x10028a4,\n\t0x28a5: 0x10028a5,\n\t0x28a6: 0x10028a6,\n\t0x28a7: 0x10028a7,\n\t0x28a8: 0x10028a8,\n\t0x28a9: 0x10028a9,\n\t0x28aa: 0x10028aa,\n\t0x28ab: 0x10028ab,\n\t0x28ac: 0x10028ac,\n\t0x28ad: 0x10028ad,\n\t0x28ae: 0x10028ae,\n\t0x28af: 0x10028af,\n\t0x28b0: 0x10028b0,\n\t0x28b1: 0x10028b1,\n\t0x28b2: 0x10028b2,\n\t0x28b3: 0x10028b3,\n\t0x28b4: 0x10028b4,\n\t0x28b5: 0x10028b5,\n\t0x28b6: 0x10028b6,\n\t0x28b7: 0x10028b7,\n\t0x28b8: 0x10028b8,\n\t0x28b9: 0x10028b9,\n\t0x28ba: 0x10028ba,\n\t0x28bb: 0x10028bb,\n\t0x28bc: 0x10028bc,\n\t0x28bd: 0x10028bd,\n\t0x28be: 0x10028be,\n\t0x28bf: 0x10028bf,\n\t0x28c0: 0x10028c0,\n\t0x28c1: 0x10028c1,\n\t0x28c2: 0x10028c2,\n\t0x28c3: 0x10028c3,\n\t0x28c4: 0x10028c4,\n\t0x28c5: 0x10028c5,\n\t0x28c6: 0x10028c6,\n\t0x28c7: 0x10028c7,\n\t0x28c8: 0x10028c8,\n\t0x28c9: 0x10028c9,\n\t0x28ca: 0x10028ca,\n\t0x28cb: 0x10028cb,\n\t0x28cc: 0x10028cc,\n\t0x28cd: 0x10028cd,\n\t0x28ce: 0x10028ce,\n\t0x28cf: 0x10028cf,\n\t0x28d0: 0x10028d0,\n\t0x28d1: 0x10028d1,\n\t0x28d2: 0x10028d2,\n\t0x28d3: 0x10028d3,\n\t0x28d4: 0x10028d4,\n\t0x28d5: 0x10028d5,\n\t0x28d6: 0x10028d6,\n\t0x28d7: 0x10028d7,\n\t0x28d8: 0x10028d8,\n\t0x28d9: 0x10028d9,\n\t0x28da: 0x10028da,\n\t0x28db: 0x10028db,\n\t0x28dc: 0x10028dc,\n\t0x28dd: 0x10028dd,\n\t0x28de: 0x10028de,\n\t0x28df: 0x10028df,\n\t0x28e0: 0x10028e0,\n\t0x28e1: 0x10028e1,\n\t0x28e2: 0x10028e2,\n\t0x28e3: 0x10028e3,\n\t0x28e4: 0x10028e4,\n\t0x28e5: 0x10028e5,\n\t0x28e6: 0x10028e6,\n\t0x28e7: 0x10028e7,\n\t0x28e8: 0x10028e8,\n\t0x28e9: 0x10028e9,\n\t0x28ea: 0x10028ea,\n\t0x28eb: 0x10028eb,\n\t0x28ec: 0x10028ec,\n\t0x28ed: 0x10028ed,\n\t0x28ee: 0x10028ee,\n\t0x28ef: 0x10028ef,\n\t0x28f0: 0x10028f0,\n\t0x28f1: 0x10028f1,\n\t0x28f2: 0x10028f2,\n\t0x28f3: 0x10028f3,\n\t0x28f4: 0x10028f4,\n\t0x28f5: 0x10028f5,\n\t0x28f6: 0x10028f6,\n\t0x28f7: 0x10028f7,\n\t0x28f8: 0x10028f8,\n\t0x28f9: 0x10028f9,\n\t0x28fa: 0x10028fa,\n\t0x28fb: 0x10028fb,\n\t0x28fc: 0x10028fc,\n\t0x28fd: 0x10028fd,\n\t0x28fe: 0x10028fe,\n\t0x28ff: 0x10028ff,\n};\n\nvar ON_KEYDOWN = 1 << 0; /* Report on keydown, otherwise wait until keypress  */\n\nvar specialKeyTable = {\n\t// These generate a keyDown and keyPress in Firefox and Opera\n\t8: [0xff08, ON_KEYDOWN], // BACKSPACE\n\t13: [0xff0d, ON_KEYDOWN], // ENTER\n\n\t// This generates a keyDown and keyPress in Opera\n\t9: [0xff09, ON_KEYDOWN], // TAB\n\n\t27: 0xff1b, // ESCAPE\n\t46: 0xffff, // DELETE\n\t36: 0xff50, // HOME\n\t35: 0xff57, // END\n\t33: 0xff55, // PAGE_UP\n\t34: 0xff56, // PAGE_DOWN\n\t45: 0xff63, // INSERT\n\t37: 0xff51, // LEFT\n\t38: 0xff52, // UP\n\t39: 0xff53, // RIGHT\n\t40: 0xff54, // DOWN\n\t16: 0xffe1, // SHIFT\n\t17: 0xffe3, // CONTROL\n\t18: 0xffe9, // Left ALT (Mac Command)\n\t112: 0xffbe, // F1\n\t113: 0xffbf, // F2\n\t114: 0xffc0, // F3\n\t115: 0xffc1, // F4\n\t116: 0xffc2, // F5\n\t117: 0xffc3, // F6\n\t118: 0xffc4, // F7\n\t119: 0xffc5, // F8\n\t120: 0xffc6, // F9\n\t121: 0xffc7, // F10\n\t122: 0xffc8, // F11\n\t123: 0xffc9, // F12\n};\n\nfunction getEventKeySym(ev) {\n\tif (typeof ev.which !== \"undefined\" && ev.which > 0) return ev.which;\n\treturn ev.keyCode;\n}\n\n// This is based on the approach from noVNC. We handle\n// everything in keydown that we have all info for, and that\n// are not safe to pass on to the browser (as it may do something\n// with the key. The rest we pass on to keypress so we can get the\n// translated keysym.\nfunction getKeysymSpecial(ev) {\n\tif (ev.keyCode in specialKeyTable) {\n\t\tvar r = specialKeyTable[ev.keyCode];\n\t\tvar flags = 0;\n\t\tif (typeof r != \"number\") {\n\t\t\tflags = r[1];\n\t\t\tr = r[0];\n\t\t}\n\t\tif (ev.type === \"keydown\" || flags & ON_KEYDOWN) return r;\n\t}\n\t// If we don't hold alt or ctrl, then we should be safe to pass\n\t// on to keypressed and look at the translated data\n\tif (!ev.ctrlKey && !ev.altKey) return null;\n\n\tvar keysym = getEventKeySym(ev);\n\n\t/* Remap symbols */\n\tswitch (keysym) {\n\t\tcase 186:\n\t\t\tkeysym = 59;\n\t\t\tbreak; // ; (IE)\n\t\tcase 187:\n\t\t\tkeysym = 61;\n\t\t\tbreak; // = (IE)\n\t\tcase 188:\n\t\t\tkeysym = 44;\n\t\t\tbreak; // , (Mozilla, IE)\n\t\tcase 109: // - (Mozilla, Opera)\n\t\t\tif (true /* TODO: check if browser is firefox or opera */) keysym = 45;\n\t\t\tbreak;\n\t\tcase 189:\n\t\t\tkeysym = 45;\n\t\t\tbreak; // - (IE)\n\t\tcase 190:\n\t\t\tkeysym = 46;\n\t\t\tbreak; // . (Mozilla, IE)\n\t\tcase 191:\n\t\t\tkeysym = 47;\n\t\t\tbreak; // / (Mozilla, IE)\n\t\tcase 192:\n\t\t\tkeysym = 96;\n\t\t\tbreak; // ` (Mozilla, IE)\n\t\tcase 219:\n\t\t\tkeysym = 91;\n\t\t\tbreak; // [ (Mozilla, IE)\n\t\tcase 220:\n\t\t\tkeysym = 92;\n\t\t\tbreak; // \\ (Mozilla, IE)\n\t\tcase 221:\n\t\t\tkeysym = 93;\n\t\t\tbreak; // ] (Mozilla, IE)\n\t\tcase 222:\n\t\t\tkeysym = 39;\n\t\t\tbreak; // ' (Mozilla, IE)\n\t}\n\n\t/* Remap shifted and unshifted keys */\n\tif (!!ev.shiftKey) {\n\t\tswitch (keysym) {\n\t\t\tcase 48:\n\t\t\t\tkeysym = 41;\n\t\t\t\tbreak; // ) (shifted 0)\n\t\t\tcase 49:\n\t\t\t\tkeysym = 33;\n\t\t\t\tbreak; // ! (shifted 1)\n\t\t\tcase 50:\n\t\t\t\tkeysym = 64;\n\t\t\t\tbreak; // @ (shifted 2)\n\t\t\tcase 51:\n\t\t\t\tkeysym = 35;\n\t\t\t\tbreak; // # (shifted 3)\n\t\t\tcase 52:\n\t\t\t\tkeysym = 36;\n\t\t\t\tbreak; // $ (shifted 4)\n\t\t\tcase 53:\n\t\t\t\tkeysym = 37;\n\t\t\t\tbreak; // % (shifted 5)\n\t\t\tcase 54:\n\t\t\t\tkeysym = 94;\n\t\t\t\tbreak; // ^ (shifted 6)\n\t\t\tcase 55:\n\t\t\t\tkeysym = 38;\n\t\t\t\tbreak; // & (shifted 7)\n\t\t\tcase 56:\n\t\t\t\tkeysym = 42;\n\t\t\t\tbreak; // * (shifted 8)\n\t\t\tcase 57:\n\t\t\t\tkeysym = 40;\n\t\t\t\tbreak; // ( (shifted 9)\n\t\t\tcase 59:\n\t\t\t\tkeysym = 58;\n\t\t\t\tbreak; // : (shifted `)\n\t\t\tcase 61:\n\t\t\t\tkeysym = 43;\n\t\t\t\tbreak; // + (shifted ;)\n\t\t\tcase 44:\n\t\t\t\tkeysym = 60;\n\t\t\t\tbreak; // < (shifted ,)\n\t\t\tcase 45:\n\t\t\t\tkeysym = 95;\n\t\t\t\tbreak; // _ (shifted -)\n\t\t\tcase 46:\n\t\t\t\tkeysym = 62;\n\t\t\t\tbreak; // > (shifted .)\n\t\t\tcase 47:\n\t\t\t\tkeysym = 63;\n\t\t\t\tbreak; // ? (shifted /)\n\t\t\tcase 96:\n\t\t\t\tkeysym = 126;\n\t\t\t\tbreak; // ~ (shifted `)\n\t\t\tcase 91:\n\t\t\t\tkeysym = 123;\n\t\t\t\tbreak; // { (shifted [)\n\t\t\tcase 92:\n\t\t\t\tkeysym = 124;\n\t\t\t\tbreak; // | (shifted \\)\n\t\t\tcase 93:\n\t\t\t\tkeysym = 125;\n\t\t\t\tbreak; // } (shifted ])\n\t\t\tcase 39:\n\t\t\t\tkeysym = 34;\n\t\t\t\tbreak; // \" (shifted ')\n\t\t}\n\t} else if (keysym >= 65 && keysym <= 90) {\n\t\t/* Remap unshifted A-Z */\n\t\tkeysym += 32;\n\t} else if (ev.keyLocation === 3) {\n\t\t// numpad keys\n\t\tswitch (keysym) {\n\t\t\tcase 96:\n\t\t\t\tkeysym = 48;\n\t\t\t\tbreak; // 0\n\t\t\tcase 97:\n\t\t\t\tkeysym = 49;\n\t\t\t\tbreak; // 1\n\t\t\tcase 98:\n\t\t\t\tkeysym = 50;\n\t\t\t\tbreak; // 2\n\t\t\tcase 99:\n\t\t\t\tkeysym = 51;\n\t\t\t\tbreak; // 3\n\t\t\tcase 100:\n\t\t\t\tkeysym = 52;\n\t\t\t\tbreak; // 4\n\t\t\tcase 101:\n\t\t\t\tkeysym = 53;\n\t\t\t\tbreak; // 5\n\t\t\tcase 102:\n\t\t\t\tkeysym = 54;\n\t\t\t\tbreak; // 6\n\t\t\tcase 103:\n\t\t\t\tkeysym = 55;\n\t\t\t\tbreak; // 7\n\t\t\tcase 104:\n\t\t\t\tkeysym = 56;\n\t\t\t\tbreak; // 8\n\t\t\tcase 105:\n\t\t\t\tkeysym = 57;\n\t\t\t\tbreak; // 9\n\t\t\tcase 109:\n\t\t\t\tkeysym = 45;\n\t\t\t\tbreak; // -\n\t\t\tcase 110:\n\t\t\t\tkeysym = 46;\n\t\t\t\tbreak; // .\n\t\t\tcase 111:\n\t\t\t\tkeysym = 47;\n\t\t\t\tbreak; // /\n\t\t}\n\t}\n\n\treturn keysym;\n}\n\n/* Translate DOM keyPress event to keysym value */\nfunction getKeysym(ev) {\n\tvar keysym, msg;\n\n\tkeysym = getEventKeySym(ev);\n\n\tif (keysym > 255 && keysym < 0xff00) {\n\t\t// Map Unicode outside Latin 1 to gdk keysyms\n\t\tkeysym = unicodeTable[keysym];\n\t\tif (typeof keysym === \"undefined\") keysym = 0;\n\t}\n\n\treturn keysym;\n}\n\nfunction copyKeyEvent(ev) {\n\tvar members = [\n\t\t\t\"type\",\n\t\t\t\"keyCode\",\n\t\t\t\"charCode\",\n\t\t\t\"which\",\n\t\t\t\"altKey\",\n\t\t\t\"ctrlKey\",\n\t\t\t\"shiftKey\",\n\t\t\t\"keyLocation\",\n\t\t\t\"keyIdentifier\",\n\t\t],\n\t\ti,\n\t\tobj = {};\n\tfor (i = 0; i < members.length; i++) {\n\t\tif (typeof ev[members[i]] !== \"undefined\") obj[members[i]] = ev[members[i]];\n\t}\n\treturn obj;\n}\n\nfunction pushKeyEvent(fev) {\n\tkeyDownList.push(fev);\n}\n\nfunction getKeyEvent(keyCode, pop) {\n\tvar i,\n\t\tfev = null;\n\tfor (i = keyDownList.length - 1; i >= 0; i--) {\n\t\tif (keyDownList[i].keyCode === keyCode) {\n\t\t\tif (typeof pop !== \"undefined\" && pop) fev = keyDownList.splice(i, 1)[0];\n\t\t\telse fev = keyDownList[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn fev;\n}\n\nfunction ignoreKeyEvent(ev) {\n\t// Blarg. Some keys have a different keyCode on keyDown vs keyUp\n\tif (ev.keyCode === 229) {\n\t\t// French AZERTY keyboard dead key.\n\t\t// Lame thing is that the respective keyUp is 219 so we can't\n\t\t// properly ignore the keyUp event\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction handleKeyDown(e) {\n\tvar fev = null,\n\t\tev = e ? e : window.event,\n\t\tkeysym = null,\n\t\tsuppress = false;\n\n\tfev = copyKeyEvent(ev);\n\n\tkeysym = getKeysymSpecial(ev);\n\t// Save keysym decoding for use in keyUp\n\tfev.keysym = keysym;\n\tif (keysym) {\n\t\t// If it is a key or key combination that might trigger\n\t\t// browser behaviors or it has no corresponding keyPress\n\t\t// event, then send it immediately\n\t\tif (!ignoreKeyEvent(ev)) sendInput(\"k\", [keysym, lastState]);\n\t\tsuppress = true;\n\t}\n\n\tif (!ignoreKeyEvent(ev)) {\n\t\t// Add it to the list of depressed keys\n\t\tpushKeyEvent(fev);\n\t}\n\n\tif (suppress) {\n\t\t// Suppress bubbling/default actions\n\t\treturn cancelEvent(ev);\n\t}\n\n\t// Allow the event to bubble and become a keyPress event which\n\t// will have the character code translated\n\treturn true;\n}\n\nfunction handleKeyPress(e) {\n\tvar ev = e ? e : window.event,\n\t\tkdlen = keyDownList.length,\n\t\tkeysym = null;\n\n\tif ((ev.which !== \"undefined\" && ev.which === 0) || getKeysymSpecial(ev)) {\n\t\t// Firefox and Opera generate a keyPress event even if keyDown\n\t\t// is suppressed. But the keys we want to suppress will have\n\t\t// either:\n\t\t// - the which attribute set to 0\n\t\t// - getKeysymSpecial() will identify it\n\t\treturn cancelEvent(ev);\n\t}\n\n\tkeysym = getKeysym(ev);\n\n\t// Modify the which attribute in the depressed keys list so\n\t// that the keyUp event will be able to have the character code\n\t// translation available.\n\tif (kdlen > 0) {\n\t\tkeyDownList[kdlen - 1].keysym = keysym;\n\t} else {\n\t\t//log(\"keyDownList empty when keyPress triggered\");\n\t}\n\n\t// Send the translated keysym\n\tif (keysym > 0) sendInput(\"k\", [keysym, lastState]);\n\n\t// Stop keypress events just in case\n\treturn cancelEvent(ev);\n}\n\nfunction handleKeyUp(e) {\n\tvar fev = null,\n\t\tev = e ? e : window.event,\n\t\ti,\n\t\tkeysym;\n\n\tfev = getKeyEvent(ev.keyCode, true);\n\n\tif (fev) keysym = fev.keysym;\n\telse {\n\t\t//log(\"Key event (keyCode = \" + ev.keyCode + \") not found on keyDownList\");\n\t\tkeysym = 0;\n\t}\n\n\tif (keysym > 0) sendInput(\"K\", [keysym, lastState]);\n\treturn cancelEvent(ev);\n}\n\nfunction onKeyDown(ev) {\n\tupdateForEvent(ev);\n\treturn handleKeyDown(ev);\n}\n\nfunction onKeyPress(ev) {\n\tupdateForEvent(ev);\n\treturn handleKeyPress(ev);\n}\n\nfunction onKeyUp(ev) {\n\tupdateForEvent(ev);\n\treturn handleKeyUp(ev);\n}\n\nfunction cancelEvent(ev) {\n\tev = ev ? ev : window.event;\n\t// we dont want to disable event in web-desktop-environment\n\t// if (ev.stopPropagation) ev.stopPropagation();\n\t// if (ev.preventDefault) ev.preventDefault();\n\t// ev.cancelBubble = true;\n\t// ev.cancel = true;\n\t// ev.returnValue = false;\n\t// return false;\n}\n\nfunction onMouseWheel(ev) {\n\tupdateForEvent(ev);\n\tev = ev ? ev : window.event;\n\n\tvar id = getSurfaceId(ev);\n\tvar pos = getPositionsFromEvent(ev, id);\n\n\tvar offset = ev.detail ? ev.detail : -ev.wheelDelta;\n\tvar dir = 0;\n\tif (offset > 0) dir = 1;\n\tsendInput(\"s\", [\n\t\trealWindowWithMouse,\n\t\tid,\n\t\tpos.rootX,\n\t\tpos.rootY,\n\t\tpos.winX,\n\t\tpos.winY,\n\t\tlastState,\n\t\tdir,\n\t]);\n\n\treturn cancelEvent(ev);\n}\n\nfunction onTouchStart(ev) {\n\tevent.preventDefault();\n\n\tupdateKeyboardStatus();\n\tupdateForEvent(ev);\n\n\tfor (var i = 0; i < ev.changedTouches.length; i++) {\n\t\tvar touch = ev.changedTouches.item(i);\n\n\t\tvar origId = getSurfaceId(touch);\n\t\tvar id = getEffectiveEventTarget(origId);\n\t\tvar pos = getPositionsFromEvent(touch, id);\n\t\tvar isEmulated = 0;\n\n\t\tif (firstTouchDownId == null) {\n\t\t\tfirstTouchDownId = touch.identifier;\n\t\t\tisEmulated = 1;\n\n\t\t\tif (realWindowWithMouse != origId || id != windowWithMouse) {\n\t\t\t\tif (id != 0) {\n\t\t\t\t\tsendInput(\"l\", [\n\t\t\t\t\t\trealWindowWithMouse,\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tpos.rootX,\n\t\t\t\t\t\tpos.rootY,\n\t\t\t\t\t\tpos.winX,\n\t\t\t\t\t\tpos.winY,\n\t\t\t\t\t\tlastState,\n\t\t\t\t\t\tGDK_CROSSING_NORMAL,\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\twindowWithMouse = id;\n\t\t\t\trealWindowWithMouse = origId;\n\n\t\t\t\tsendInput(\"e\", [\n\t\t\t\t\torigId,\n\t\t\t\t\tid,\n\t\t\t\t\tpos.rootX,\n\t\t\t\t\tpos.rootY,\n\t\t\t\t\tpos.winX,\n\t\t\t\t\tpos.winY,\n\t\t\t\t\tlastState,\n\t\t\t\t\tGDK_CROSSING_NORMAL,\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\n\t\tsendInput(\"t\", [\n\t\t\t0,\n\t\t\tid,\n\t\t\ttouch.identifier,\n\t\t\tisEmulated,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t]);\n\t}\n}\n\nfunction onTouchMove(ev) {\n\tevent.preventDefault();\n\n\tupdateKeyboardStatus();\n\tupdateForEvent(ev);\n\n\tfor (var i = 0; i < ev.changedTouches.length; i++) {\n\t\tvar touch = ev.changedTouches.item(i);\n\n\t\tvar origId = getSurfaceId(touch);\n\t\tvar id = getEffectiveEventTarget(origId);\n\t\tvar pos = getPositionsFromEvent(touch, id);\n\n\t\tvar isEmulated = 0;\n\t\tif (firstTouchDownId == touch.identifier) {\n\t\t\tisEmulated = 1;\n\t\t}\n\n\t\tsendInput(\"t\", [\n\t\t\t1,\n\t\t\tid,\n\t\t\ttouch.identifier,\n\t\t\tisEmulated,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t]);\n\t}\n}\n\nfunction onTouchEnd(ev) {\n\tevent.preventDefault();\n\n\tupdateKeyboardStatus();\n\tupdateForEvent(ev);\n\n\tfor (var i = 0; i < ev.changedTouches.length; i++) {\n\t\tvar touch = ev.changedTouches.item(i);\n\n\t\tvar origId = getSurfaceId(touch);\n\t\tvar id = getEffectiveEventTarget(origId);\n\t\tvar pos = getPositionsFromEvent(touch, id);\n\n\t\tvar isEmulated = 0;\n\t\tif (firstTouchDownId == touch.identifier) {\n\t\t\tisEmulated = 1;\n\t\t\tfirstTouchDownId = null;\n\t\t}\n\n\t\tsendInput(\"t\", [\n\t\t\t2,\n\t\t\tid,\n\t\t\ttouch.identifier,\n\t\t\tisEmulated,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t]);\n\t}\n}\n\nfunction setupDocument(document) {\n\tdocument.oncontextmenu = function () {\n\t\treturn false;\n\t};\n\t// document.onmousemove = onMouseMove;\n\t// document.onmouseover = onMouseOver;\n\t// document.onmouseout = onMouseOut;\n\t// document.onmousedown = onMouseDown;\n\t// document.onmouseup = onMouseUp;\n\t// document.onkeydown = onKeyDown;\n\t// document.onkeypress = onKeyPress;\n\t// document.onkeyup = onKeyUp;\n\n\tif (document.addEventListener) {\n\t\tdocument.addEventListener(\"mousemove\", onMouseMove, false);\n\t\tdocument.addEventListener(\"mouseover\", onMouseOver, false);\n\t\tdocument.addEventListener(\"mousedown\", onMouseDown, false);\n\t\tdocument.addEventListener(\"mouseup\", onMouseUp, false);\n\t\tdocument.addEventListener(\"keydown\", onKeyDown, false);\n\t\tdocument.addEventListener(\"keypress\", onKeyPress, false);\n\t\tdocument.addEventListener(\"keyup\", onKeyUp, false);\n\n\t\tdocument.addEventListener(\"DOMMouseScroll\", onMouseWheel, false);\n\t\tdocument.addEventListener(\"mousewheel\", onMouseWheel, false);\n\t\tdocument.addEventListener(\"touchstart\", onTouchStart, false);\n\t\tdocument.addEventListener(\"touchmove\", onTouchMove, false);\n\t\tdocument.addEventListener(\"touchend\", onTouchEnd, false);\n\t} else if (document.attachEvent) {\n\t\telement.attachEvent(\"onmousewheel\", onMouseWheel);\n\t}\n}\n\nfunction start() {\n\tsetupDocument(document);\n\n\tvar w, h;\n\tw = window.innerWidth;\n\th = window.innerHeight;\n\twindow.onresize = function (ev) {\n\t\tvar w, h;\n\t\tw = window.innerWidth;\n\t\th = window.innerHeight;\n\t\tsendInput(\"d\", [w, h]);\n\t};\n\tsendInput(\"d\", [w, h]);\n}\n\n\nexport function connect(host, https, port) {\n\tconst ws = new WebSocket(\n\t\t`${https ? \"wss\" : \"ws\"}://${host}:${port}/socket`,\n\t\t\"broadway\"\n\t);\n\tGTKBridgeEmitter.call(\"status\", \"connecting\");\n\tws.binaryType = \"arraybuffer\";\n\n\tws.onopen = function () {\n\t\tGTKBridgeEmitter.call(\"status\", \"connected\");\n\t\tinputSocket = ws;\n\t};\n\tws.onclose = function () {\n\t\tif (inputSocket != null) {\n\t\t\tGTKBridgeEmitter.call(\"status\", \"disconnected\");\n\t\t\trootDiv.innerHTML = \"\";\n\t\t}\n\t\tinputSocket = null;\n\t};\n\tws.onmessage = function (event) {\n\t\thandleMessage(event.data);\n\t};\n\n\tvar iOS = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);\n\tif (iOS) {\n\t\tfakeInput = document.createElement(\"input\");\n\t\tfakeInput.type = \"text\";\n\t\tfakeInput.style.position = \"absolute\";\n\t\tfakeInput.style.left = \"-1000px\";\n\t\tfakeInput.style.top = \"-1000px\";\n\t\trootDiv.appendChild(fakeInput);\n\t}\n}\n\nwindow.stopGDK = () => (active = false);\n","import DesktopInterface, {\n\tApp,\n} from \"@web-desktop-environment/interfaces/lib/views/Desktop\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n\twithStyles,\n\tcreateStyles,\n\tWithStyles,\n\tmakeStyles,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\nimport TextField from \"@components/textField\";\nimport Icon from \"@components/icon\";\nimport windowManager from \"@state/WindowManager\";\nimport MountUnmountAnimation from \"@components/mountUnmountAnimation\";\nimport { Link } from \"react-router-dom\";\nimport { Client } from \"@react-fullstack/fullstack-socket-client\";\nimport { ConnectionContext } from \"@root/contexts\";\nimport StateComponent from \"@components/stateComponent\";\nimport { transparent } from \"@utils/colors\";\nimport { connect } from \"@root/gtk-broadway-display/index\";\nimport {\n\tGTKBridgeEmitter,\n\tstatus as GTKConnectionStatus,\n} from \"@root/gtk-broadway-display/state\";\n\nexport const windowsBarHeight = 55;\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tright: 0,\n\t\t\tleft: 0,\n\t\t},\n\t\tswitchToNativeButton: {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 10 - windowsBarHeight,\n\t\t\ttransition: \"top 300ms\",\n\t\t\tright: 45,\n\t\t\theight: windowsBarHeight,\n\t\t\tcursor: \"pointer\",\n\t\t\twidth: 80,\n\t\t\tborderRadius: \"0 0 15px 15px\",\n\t\t\tfontSize: 40,\n\t\t\tpaddingTop: 5,\n\t\t\tborderBottom: \"none\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tcolor: theme.background.text,\n\t\t\tboxShadow: `0 0px 3px 0px ${theme.shadowColor}`,\n\t\t\tborder: `1px solid ${theme.transparentBorder || \"#eee2\"}`,\n\t\t\tbackdropFilter: \"blur(10px)\",\n\t\t\tbackground: transparent(\n\t\t\t\ttheme.background.transparent || theme.background.main,\n\t\t\t\ttheme.type === \"transparent\" ? 0.15 : 0.6\n\t\t\t),\n\t\t\t\"&:hover\": {\n\t\t\t\ttop: 0,\n\t\t\t\tbackground: theme.background.transparent,\n\t\t\t},\n\t\t\tzIndex: windowManager.windowsMinMaxLayer.max + 1,\n\t\t},\n\t\t\"@keyframes slideIn\": {\n\t\t\t\"0%\": {\n\t\t\t\ttransform: \"translateX(-100%)\",\n\t\t\t},\n\t\t\t\"100%\": {\n\t\t\t\ttransform: \"translateX(0%)\",\n\t\t\t},\n\t\t},\n\t\t\"@keyframes slideOut\": {\n\t\t\t\"0%\": {\n\t\t\t\ttransform: \"translateX(0%)\",\n\t\t\t},\n\t\t\t\"100%\": {\n\t\t\t\ttransform: \"translateX(-100%)\",\n\t\t\t},\n\t\t},\n\t\tslideIn: {\n\t\t\tanimation: \"$slideIn 200ms\",\n\t\t},\n\t\tslideOut: {\n\t\t\tanimation: \"$slideOut 200ms\",\n\t\t},\n\t\tstartMenu: {\n\t\t\tposition: \"absolute\",\n\t\t\tzIndex: windowManager.windowsMinMaxLayer.max + 1,\n\t\t\tbottom: 105,\n\t\t\tleft: 15,\n\t\t\twidth: 500,\n\t\t\theight: 500,\n\t\t\tmaxHeight: \"60%\",\n\t\t\tmaxWidth: \"30%\",\n\t\t\toverflowY: \"auto\",\n\t\t\tpadding: 5,\n\t\t\tborderRadius: 10,\n\t\t\tborder: `1px solid ${theme.transparentBorder || \"#eee2\"}`,\n\t\t\tbackdropFilter: \"blur(10px)\",\n\t\t\tbackground: transparent(\n\t\t\t\ttheme.background.transparent || theme.background.main,\n\t\t\t\ttheme.type === \"transparent\" ? 0.15 : 0.6\n\t\t\t),\n\t\t\tboxShadow: \"-5px 6px 10px -1px #0007\",\n\t\t},\n\t\tstartMenuBody: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tmarginTop: 20,\n\t\t},\n\t\tappList: {\n\t\t\tmargin: 7,\n\t\t},\n\t\tappCell: {\n\t\t\tminHeight: 54,\n\t\t\tpadding: 10,\n\t\t\tmarginTop: 15,\n\t\t\tboxSizing: \"border-box\",\n\t\t\tborderBottom: `1px solid ${theme.windowBorderColor}`,\n\t\t\tdisplay: \"flex\",\n\t\t\tborderRadius: 7,\n\t\t\tcolor: theme.background.text,\n\t\t\tcursor: \"pointer\",\n\t\t\tboxShadow: `-1px 2px 20px 2px ${theme.shadowColor}`,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.background.transparentDark || theme.background.dark,\n\t\t\t},\n\t\t},\n\t\tappIcon: {\n\t\t\tflexShrink: 0,\n\t\t\twidth: 50,\n\t\t\theight: 50,\n\t\t\tfontSize: 50,\n\t\t},\n\t\tappContent: {\n\t\t\ttextAlign: \"left\",\n\t\t\tmarginLeft: 10,\n\t\t\toverflow: \"hidden\",\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tappName: {\n\t\t\tfontSize: \"x-large\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t},\n\t\tstartMenuSearch: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t});\n\nconst useWindowBarStyles = makeStyles((theme: Theme) => ({\n\twindowsBar: {\n\t\tposition: \"absolute\",\n\t\tanimation: \"$slideUp 1s\",\n\t\tbottom: 5,\n\t\tleft: 120,\n\t\tright: 120,\n\t\tborderRadius: 13,\n\t\theight: windowsBarHeight,\n\t\tdisplay: \"flex\",\n\t\tborder: `1px solid ${theme.transparentBorder || \"#eee2\"}`,\n\t\tbackdropFilter: \"blur(10px)\",\n\t\tbackground: transparent(\n\t\t\ttheme.background.transparent || theme.background.main,\n\t\t\ttheme.type === \"transparent\" ? 0.15 : 0.6\n\t\t),\n\t\tpaddingLeft: 10,\n\t\tboxShadow: \"0 0px 3px 0px\",\n\t\tzIndex: windowManager.windowsMinMaxLayer.max + 1,\n\t\toverflowX: \"auto\",\n\t\toverflowY: \"hidden\",\n\t},\n\t\"@keyframes slideUp\": {\n\t\tfrom: {\n\t\t\tbottom: -windowsBarHeight - 5,\n\t\t},\n\t\tto: {\n\t\t\tbottom: 5,\n\t\t},\n\t},\n\twindowsBarButton: {\n\t\tuserSelect: \"none\",\n\t\tfontSize: 40,\n\t\tboxShadow: \"0px 0px 10px 4px #0007\",\n\t\ttransition: \"border-bottom 100ms\",\n\t\tpadding: 5,\n\t\tmargin: 2,\n\t\tborderRadius: 6,\n\t\tmarginRight: 5,\n\t\tmarginLeft: 5,\n\t\tcursor: \"pointer\",\n\t\tcolor: theme.background.text,\n\t\t\"&:hover\": {\n\t\t\tbackground: theme.background.transparentDark || theme.background.dark,\n\t\t},\n\t},\n\twindowsBarButtonHover: {\n\t\tposition: \"absolute\",\n\t\ttransform: \"translateY(-150%) translateX(-33%)\",\n\t\twidth: 200,\n\t\theight: 150,\n\t\tborderRadius: 6,\n\t\tfontSize: 20,\n\t\tbackground: `${theme.background.main} !important`,\n\t\tborder: `solid 1px ${theme.windowBorderColor}`,\n\t\ttextAlign: \"center\",\n\t\tanimation: \"$scaleUp 300ms\",\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t},\n\t\"@keyframes scaleUp\": {\n\t\tfrom: {\n\t\t\topacity: 0,\n\t\t\twidth: 150,\n\t\t\theight: 130,\n\t\t\tborderRadius: 0,\n\t\t},\n\t\tto: {\n\t\t\topacity: 1,\n\t\t\twidth: 200,\n\t\t\theight: 150,\n\t\t\tborderRadius: 8,\n\t\t},\n\t},\n\twindowsBarButtonActive: {\n\t\tbackdropFilter: \"blur(15px)\",\n\t\tborderBottom: `${\n\t\t\ttheme.type === \"transparent\" ? theme.success.main : theme.secondary.main\n\t\t} solid 6px !important`,\n\t},\n\twindowsBarButtonOpen: {\n\t\tborderBottom: `${\n\t\t\ttheme.type === \"transparent\" ? theme.success.main : theme.secondary.main\n\t\t} solid 3px`,\n\t},\n\twindowsBarButtonCloseMinimized: {\n\t\tborderBottom: `${theme.secondary.dark} solid 3px`,\n\t},\n}));\n\nclass Desktop extends Component<\n\tDesktopInterface,\n\t{},\n\tWithStyles<typeof styles>\n> {\n\trenderAppListCell = (app: App, index: number) => {\n\t\tconst { classes, onLaunchApp } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={index}\n\t\t\t\tclassName={classes.appCell}\n\t\t\t\tonClick={() => app && onLaunchApp({ name: app.appName, params: {} })}\n\t\t\t>\n\t\t\t\t{app.icon.type === \"img\" ? (\n\t\t\t\t\t<img alt={`${app.displayName} icon`} src={app.icon.icon} />\n\t\t\t\t) : (\n\t\t\t\t\t<Icon className={classes.appIcon} name={app.icon.icon}></Icon>\n\t\t\t\t)}\n\t\t\t\t<div className={classes.appContent}>\n\t\t\t\t\t<div className={classes.appName}>{app.displayName}</div>\n\t\t\t\t\t<div>{app.description}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\twillUnmount = false;\n\n\tcomponentWillUnmount = () => {\n\t\tthis.willUnmount = true;\n\t};\n\n\tcomponentDidMount = () => {\n\t\tGTKBridgeEmitter.on(\"status\", () => {\n\t\t\tthis.forceUpdate();\n\t\t});\n\n\t\tthis.tryToStartGtkServer();\n\t};\n\n\tcomponentDidUpdate = () => {\n\t\tthis.tryToStartGtkServer();\n\t};\n\n\ttryToStartGtkServer = () => {\n\t\tconst { gtkBridge } = this.props;\n\t\tif (GTKConnectionStatus === \"disconnected\" && gtkBridge) {\n\t\t\ttry {\n\t\t\t\tconnect(\n\t\t\t\t\treactFullstackConnectionManager.host,\n\t\t\t\t\treactFullstackConnectionManager.https,\n\t\t\t\t\tgtkBridge.port\n\t\t\t\t);\n\t\t\t} catch (e) {\n\t\t\t\t/* no handle */\n\t\t\t}\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { background, openApps, classes, apps } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.root} style={{ background }}>\n\t\t\t\t{openApps.map((app) => (\n\t\t\t\t\t<ConnectionContext.Provider\n\t\t\t\t\t\tkey={app.id}\n\t\t\t\t\t\tvalue={{\n\t\t\t\t\t\t\thost: reactFullstackConnectionManager.host,\n\t\t\t\t\t\t\tport: app.port,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\tkey={app.id}\n\t\t\t\t\t\t\t{...reactFullstackConnectionManager.connect(\n\t\t\t\t\t\t\t\tapp.port,\n\t\t\t\t\t\t\t\t\"webWindow\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t))}\n\t\t\t\t<Link to=\"/native\">\n\t\t\t\t\t<div className={classes.switchToNativeButton}>\n\t\t\t\t\t\t<Icon width={40} height={40} name=\"VscWindow\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Link>\n\t\t\t\t<StateComponent\n\t\t\t\t\tdefaultState={{ isStartMenuOpen: false, startMenuQuery: \"\" }}\n\t\t\t\t>\n\t\t\t\t\t{({ isStartMenuOpen, startMenuQuery }, setState) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<WindowBar\n\t\t\t\t\t\t\t\t\tisStartMenuOpen={isStartMenuOpen}\n\t\t\t\t\t\t\t\t\ttoggleStartMenu={() =>\n\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\tisStartMenuOpen: !isStartMenuOpen,\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<MountUnmountAnimation\n\t\t\t\t\t\t\t\t\tmount={isStartMenuOpen}\n\t\t\t\t\t\t\t\t\tclassName={`${classes.startMenu} ${\n\t\t\t\t\t\t\t\t\t\tisStartMenuOpen ? classes.slideIn : classes.slideOut\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className={classes.startMenuBody}>\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.startMenuSearch}\n\t\t\t\t\t\t\t\t\t\t\tborderBottom={false}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"search app\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={startMenuQuery}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(startMenuQuery) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetState({ startMenuQuery })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></TextField>\n\t\t\t\t\t\t\t\t\t\t{apps\n\t\t\t\t\t\t\t\t\t\t\t.filter((app) =>\n\t\t\t\t\t\t\t\t\t\t\t\tstartMenuQuery\n\t\t\t\t\t\t\t\t\t\t\t\t\t? app.displayName.includes(startMenuQuery) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t  app.description.includes(startMenuQuery) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t  app.appName.includes(startMenuQuery)\n\t\t\t\t\t\t\t\t\t\t\t\t\t: true\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.map((app, index) => this.renderAppListCell(app, index))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</MountUnmountAnimation>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</StateComponent>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport const WindowBar = ({\n\ttoggleStartMenu,\n\tisStartMenuOpen,\n}: {\n\ttoggleStartMenu: () => void;\n\tisStartMenuOpen: boolean;\n}) => {\n\tconst classes = useWindowBarStyles();\n\tconst [openWindows, setOpenWindows] = useState(windowManager.windows);\n\tconst [selectedButton, setSelectedButton] = useState<number | undefined>(\n\t\tundefined\n\t);\n\tuseEffect(() => {\n\t\tconst updateWindow = () => setOpenWindows([...windowManager.windows]);\n\t\tupdateWindow();\n\t\twindowManager.emitter.on(\"addWindow\", updateWindow);\n\t\twindowManager.emitter.on(\"closeWindow\", updateWindow);\n\t\twindowManager.emitter.on(\"maximizeWindow\", updateWindow);\n\t\twindowManager.emitter.on(\"minimizeWindow\", updateWindow);\n\t\twindowManager.emitter.on(\"setActiveWindow\", updateWindow);\n\t}, []);\n\treturn (\n\t\t<div className={classes.windowsBar}>\n\t\t\t<div\n\t\t\t\tclassName={`${classes.windowsBarButton} ${\n\t\t\t\t\t!isStartMenuOpen\n\t\t\t\t\t\t? classes.windowsBarButtonCloseMinimized\n\t\t\t\t\t\t: classes.windowsBarButtonOpen\n\t\t\t\t} ${isStartMenuOpen ? classes.windowsBarButtonActive : \"\"}`}\n\t\t\t\tonClick={() => toggleStartMenu()}\n\t\t\t>\n\t\t\t\t<Icon width={40} height={40} name=\"FcList\" />\n\t\t\t</div>\n\t\t\t{openWindows.map((openWindow, index) => (\n\t\t\t\t<div\n\t\t\t\t\tkey={index}\n\t\t\t\t\tonContextMenu={() =>\n\t\t\t\t\t\tindex === selectedButton\n\t\t\t\t\t\t\t? setSelectedButton(undefined)\n\t\t\t\t\t\t\t: setSelectedButton(index)\n\t\t\t\t\t}\n\t\t\t\t\tclassName={`${classes.windowsBarButton} ${\n\t\t\t\t\t\topenWindow.state.minimized\n\t\t\t\t\t\t\t? classes.windowsBarButtonCloseMinimized\n\t\t\t\t\t\t\t: classes.windowsBarButtonOpen\n\t\t\t\t\t} ${\n\t\t\t\t\t\topenWindow.id === windowManager.activeWindowId &&\n\t\t\t\t\t\t!openWindow.state.minimized\n\t\t\t\t\t\t\t? classes.windowsBarButtonActive\n\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t}`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (windowManager.activeWindowId === openWindow.id) {\n\t\t\t\t\t\t\twindowManager.updateState(openWindow.id, {\n\t\t\t\t\t\t\t\tminimized: !openWindow.state.minimized,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twindowManager.updateState(openWindow.id, {\n\t\t\t\t\t\t\t\tminimized: false,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{openWindow.icon.type === \"img\" ? (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\talt={`${openWindow.name} icon`}\n\t\t\t\t\t\t\tsrc={openWindow.icon.icon}\n\t\t\t\t\t\t\twidth={40}\n\t\t\t\t\t\t\theight={40}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Icon name={openWindow.icon.icon} />\n\t\t\t\t\t)}\n\t\t\t\t\t{selectedButton === index && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={() => setSelectedButton(undefined)}\n\t\t\t\t\t\t\tclassName={`${classes.windowsBarButton} ${\n\t\t\t\t\t\t\t\topenWindow.state.minimized\n\t\t\t\t\t\t\t\t\t? classes.windowsBarButtonCloseMinimized\n\t\t\t\t\t\t\t\t\t: classes.windowsBarButtonOpen\n\t\t\t\t\t\t\t} ${\n\t\t\t\t\t\t\t\topenWindow.id === windowManager.activeWindowId\n\t\t\t\t\t\t\t\t\t? classes.windowsBarButtonActive\n\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t} ${classes.windowsBarButtonHover}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{openWindow.icon.type === \"img\" ? (\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\talt={`${openWindow.name} icon`}\n\t\t\t\t\t\t\t\t\tsrc={openWindow.icon.icon}\n\t\t\t\t\t\t\t\t\twidth={100}\n\t\t\t\t\t\t\t\t\theight={100}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Icon size={100} name={openWindow.icon.icon} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div>{openWindow.name}</div>{\" \"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n};\n\nexport default withStyles(styles)(Desktop);\n","import { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\n\nexport type ColorVariants =\n\t| \"main\"\n\t| \"dark\"\n\t| \"light\"\n\t| \"transparent\"\n\t| \"transparentDark\"\n\t| \"transparentLight\";\n\nexport type Colors =\n\t| \"background\"\n\t| \"primary\"\n\t| \"secondary\"\n\t| \"success\"\n\t| \"warning\"\n\t| \"error\";\n\nconst transparentTheme: Theme = {\n\ttype: \"transparent\",\n\tname: \"transparent\",\n\twindowBarColor: \"#BFBFBF57\",\n\tshadowColor: \"#0007\",\n\twindowBorderColor: \"#000\",\n\tbackground: {\n\t\tmain: \"#BFBFBF27\",\n\t\tlight: \"#EFEFEF67\",\n\t\tdark: \"#8F8F8F67\",\n\t\ttransparent: \"#BFBFBF37\",\n\t\ttransparentDark: \"#BFBFBF44\",\n\t\ttext: \"#fff\",\n\t},\n\tprimary: {\n\t\tmain: \"#fff9\",\n\t\tlight: \"#fffe\",\n\t\tdark: \"#eee7\",\n\t\ttransparent: \"#fff2\",\n\t\ttransparentDark: \"#fff4\",\n\t\ttext: \"#000\",\n\t},\n\tsecondary: {\n\t\tmain: \"#0004\",\n\t\tlight: \"#0003\",\n\t\tdark: \"#0005\",\n\t\ttext: \"#fff\",\n\t},\n\terror: {\n\t\tmain: \"#db5049ee\",\n\t\tlight: \"#ff354c88\",\n\t\tdark: \"#f00\",\n\t\ttext: \"#fff\",\n\t},\n\tsuccess: {\n\t\tmain: \"#21c62f88\",\n\t\ttransparent: \"#21c62f48\",\n\t\tdark: \"#21c62fb8\",\n\t\tlight: \"#21c62fee\",\n\t\ttext: \"#fff\",\n\t},\n\twarning: {\n\t\tmain: \"#ffd951\",\n\t\tlight: \"#ffeb51\",\n\t\tdark: \"#ae9941\",\n\t\ttext: \"#fff\",\n\t},\n\twindowBorder: false,\n};\n\nconst transparentDarkTheme: Theme = {\n\ttype: \"transparent\",\n\tname: \"transparent dark\",\n\twindowBarColor: \"#33333377\",\n\tshadowColor: \"#0007\",\n\twindowBorderColor: \"#eee4\",\n\tbackground: {\n\t\tmain: \"#33333357\",\n\t\tlight: \"#44444477\",\n\t\tdark: \"#24242477\",\n\t\ttransparent: \"#37373747\",\n\t\ttransparentDark: \"#24242444\",\n\t\ttext: \"#d9d9da\",\n\t},\n\tprimary: {\n\t\tmain: \"#eee9\",\n\t\tlight: \"#fffe\",\n\t\tdark: \"#bbb7\",\n\t\ttransparent: \"#bebebe22\",\n\t\ttransparentDark: \"#bebebe44\",\n\t\ttext: \"#000\",\n\t},\n\tsecondary: {\n\t\tmain: \"#315bef44\",\n\t\tlight: \"#214b9f33\",\n\t\ttransparent: \"#315bef22\",\n\t\tdark: \"#214b9f55\",\n\t\ttext: \"#fff\",\n\t},\n\terror: {\n\t\tmain: \"#db5049ee\",\n\t\tlight: \"#ff354c88\",\n\t\tdark: \"#f00\",\n\t\ttext: \"#fff\",\n\t},\n\tsuccess: {\n\t\tmain: \"#21c62f88\",\n\t\ttransparent: \"#21c62f48\",\n\t\tdark: \"#21c62fb8\",\n\t\tlight: \"#21c62fee\",\n\t\ttext: \"#fff\",\n\t},\n\twarning: {\n\t\tmain: \"#ffd951\",\n\t\tlight: \"#ffeb51\",\n\t\tdark: \"#ae9941\",\n\t\ttext: \"#fff\",\n\t},\n\twindowBorder: true,\n};\n\nconst lightTheme: Theme = {\n\ttype: \"light\",\n\tname: \"light\",\n\tbackground: {\n\t\tmain: \"#f5f5f4\",\n\t\tdark: \"#e4e9f2\",\n\t\tlight: \"#fff\",\n\t\ttext: \"#222\",\n\t\tdarkText: \"#000\",\n\t\ttransparentLight: \"#fff\",\n\t\ttransparent: \"#fff9\",\n\t\ttransparentDark: \"#e4e9f299\",\n\t},\n\tprimary: {\n\t\tmain: \"#333333\",\n\t\tdark: \"#242424\",\n\t\tlight: \"#444444\",\n\t\ttext: \"#d9d9da\",\n\t\tdarkText: \"#de2cb7\",\n\t\ttransparentLight: \"#444\",\n\t\ttransparent: \"#373737e9\",\n\t\ttransparentDark: \"#24242499\",\n\t},\n\tsecondary: {\n\t\tmain: \"#4585b2\",\n\t\tdark: \"#357592\",\n\t\tlight: \"#abcbe2\",\n\t\ttext: \"#222\",\n\t\tdarkText: \"#29d436\",\n\t\ttransparentLight: \"#fff\",\n\t\ttransparent: \"#4585b288\",\n\t\ttransparentDark: \"#35759299\",\n\t},\n\twindowBorderColor: \"#000\",\n\tshadowColor: \"#33333377\",\n\tsuccess: {\n\t\tmain: \"#21c62f88\",\n\t\tdark: \"#21c62fb8\",\n\t\tlight: \"#21c62fee\",\n\t\ttext: \"#fff\",\n\t\tdarkText: \"#c73898\",\n\t\ttransparentLight: \"#444\",\n\t\ttransparent: \"#37c56676\",\n\t\ttransparentDark: \"#37c5666a\",\n\t},\n\twindowBarColor: \"#fff\",\n\terror: {\n\t\tmain: \"#db5049ee\",\n\t\tlight: \"#ff354c88\",\n\t\tdark: \"#f00\",\n\t\ttext: \"#fff\",\n\t\tdarkText: \"#24adb4\",\n\t\ttransparentLight: \"#fff\",\n\t\ttransparent: \"#db50498f\",\n\t\ttransparentDark: \"#db504981\",\n\t},\n\twarning: {\n\t\tmain: \"#ffd951\",\n\t\tlight: \"#ffeb51\",\n\t\tdark: \"#ae9941\",\n\t\ttext: \"#fff\",\n\t\tdarkText: \"#0025ab\",\n\t\ttransparentLight: \"#444\",\n\t\ttransparent: \"#ffd95199\",\n\t\ttransparentDark: \"#ffd9518a\",\n\t},\n\twindowBorder: true,\n};\n\nconst darkTheme: Theme = {\n\ttype: \"dark\",\n\tname: \"dark\",\n\tshadowColor: \"#0007\",\n\twindowBorderColor: \"#000\",\n\twindowBarColor: \"#333333\",\n\tbackground: {\n\t\tmain: \"#333333\",\n\t\tlight: \"#444444\",\n\t\ttransparent: \"#373737e9\",\n\t\tdark: \"#242424\",\n\t\ttransparentDark: \"#24242499\",\n\t\ttext: \"#d9d9da\",\n\t},\n\tprimary: {\n\t\tmain: \"#eee\",\n\t\ttransparent: \"#e8e8e869\",\n\t\tlight: \"#fff\",\n\t\tdark: \"#bbb\",\n\t\ttransparentDark: \"#bebebe99\",\n\t\ttext: \"#000\",\n\t},\n\tsecondary: {\n\t\tmain: \"#315bef\",\n\t\tdark: \"#214b9f\",\n\t\tlight: \"#416bef\",\n\t\ttransparent: \"#315bef97\",\n\t\ttext: \"#fff\",\n\t},\n\terror: {\n\t\tmain: \"#db5049ee\",\n\t\tlight: \"#ff354c88\",\n\t\tdark: \"#f00\",\n\t\ttext: \"#fff\",\n\t},\n\tsuccess: {\n\t\tmain: \"#21c62f88\",\n\t\tdark: \"#21c62fb8\",\n\t\tlight: \"#21c62fee\",\n\t\ttext: \"#fff\",\n\t},\n\twarning: {\n\t\tmain: \"#ffd951\",\n\t\tlight: \"#ffeb51\",\n\t\tdark: \"#ae9941\",\n\t\ttext: \"#fff\",\n\t},\n\twindowBorder: true,\n};\n\nconst nordTheme: Theme = {\n\ttype: \"dark\",\n\tname: \"nord\",\n\tshadowColor: \"#0006\",\n\twindowBorderColor: \"#292f3c\",\n\twindowBarColor: \"#3d4455\",\n\tbackground: {\n\t\tmain: \"#3d4455\",\n\t\tlight: \"#434c5e\",\n\t\ttransparent: \"#3d4455e9\",\n\t\tdark: \"#2e3440\",\n\t\ttransparentDark: \"#2e344099\",\n\t\ttext: \"#eee\",\n\t},\n\tprimary: {\n\t\tmain: \"#2e343f\",\n\t\ttransparent: \"#2e343f69\",\n\t\tlight: \"#3b4251\",\n\t\tdark: \"#262b34\",\n\t\ttransparentDark: \"#262b3499\",\n\t\ttext: \"#fff\",\n\t},\n\tsecondary: {\n\t\tmain: \"#8fbcbb\",\n\t\tdark: \"#6f8a91\",\n\t\tlight: \"#8abbb9\",\n\t\ttransparent: \"#8fbcbb97\",\n\t\ttext: \"#fff\",\n\t},\n\terror: {\n\t\tmain: \"#c6616c\",\n\t\tlight: \"#c6616c88\",\n\t\tdark: \"#b65e5c\",\n\t\ttext: \"#fff\",\n\t},\n\tsuccess: {\n\t\tmain: \"#9dbd90\",\n\t\tdark: \"#9dbd90b8\",\n\t\tlight: \"#9dbd90ee\",\n\t\ttext: \"#fff\",\n\t},\n\twarning: {\n\t\tmain: \"#ffd951\",\n\t\tlight: \"#ffeb51\",\n\t\tdark: \"#ae9941\",\n\t\ttext: \"#fff\",\n\t},\n\twindowBorder: true,\n};\n\nexport const defaultTheme = darkTheme;\n\nexport const Themes = {\n\tdark: darkTheme,\n\tnord: nordTheme,\n\tlight: lightTheme,\n\ttransparent: transparentTheme,\n\ttransparentDark: transparentDarkTheme,\n};\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport ThemeProviderInterface from \"@web-desktop-environment/interfaces/lib/views/ThemeProvider\";\nimport { ThemeProvider as TP } from \"@material-ui/styles\";\nimport { Themes } from \"@root/theme\";\n\nclass ThemeProvider extends Component<ThemeProviderInterface> {\n\trender() {\n\t\tif (this.props.theme === \"custom\" && this.props.customTheme) {\n\t\t\treturn <TP theme={this.props.customTheme}>{this.props.children}</TP>;\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<TP theme={Themes[this.props.theme as keyof typeof Themes]}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</TP>\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport class EmptyThemeProvider extends Component<ThemeProviderInterface> {\n\trender() {\n\t\treturn this.props.children || <></>;\n\t}\n}\n\nexport default ThemeProvider;\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport WindowInterface, {\n\tWindowState as LocalWindowState,\n} from \"@web-desktop-environment/interfaces/lib/views/Window\";\nimport { withStyles, createStyles, WithStyles } from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport ReactDOM from \"react-dom\";\nimport windowManager from \"@state/WindowManager\";\nimport { windowsBarHeight as desktopWindowsBarHeight } from \"@views/Desktop\";\nimport Icon from \"@components/icon\";\nimport { Rnd, RndDragCallback, RndResizeCallback } from \"react-rnd\";\nimport { ConnectionContext } from \"@root/contexts\";\nimport { lastTaskQueuer } from \"@utils/tasks\";\n\nexport const defaultWindowSize = {\n\theight: 600,\n\twidth: 700,\n\tmaxHeight: 700,\n\tmaxWidth: 1000,\n\tminHeight: 300,\n\tminWidth: 400,\n};\n\nexport const windowBarHeight = 25;\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t},\n\t\tbar: {\n\t\t\tbackground: theme.windowBarColor,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(15px)\" : \"none\",\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\tborderBottom: \"none\",\n\t\t\tborderRadius: \"7px 7px 0 0\",\n\t\t\tcursor: \"move\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"row-reverse\",\n\t\t\theight: windowBarHeight,\n\t\t\twidth: \"100%\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t},\n\t\tsmoothMove: {\n\t\t\ttransition: \"top 305ms, left 305ms\",\n\t\t},\n\t\tbarCollapse: {\n\t\t\tborderRadius: \"7px 7px 7px 7px\",\n\t\t\tborderBottom: `1px solid ${theme.windowBorderColor}`,\n\t\t},\n\t\tbody: {\n\t\t\tborderRadius: \"0 0 3px 3px\",\n\t\t\twidth: \"100%\",\n\t\t\theight: `calc(100% - ${windowBarHeight}px)`,\n\t\t},\n\t\tbarButtonsContainer: {\n\t\t\tposition: \"relative\",\n\t\t\ttop: 4,\n\t\t\tright: 5,\n\t\t\twidth: 40,\n\t\t\theight: 20,\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t},\n\t\tbarButton: {\n\t\t\twidth: 15,\n\t\t\theight: 15,\n\t\t\tborderRadius: \"50%\",\n\t\t\tzIndex: 2,\n\t\t\tborder: \"1px solid #0004\",\n\t\t},\n\t\tbarButtonExit: {\n\t\t\tcursor: \"pointer\",\n\t\t\tbackground: theme.error.main,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.error.dark,\n\t\t\t},\n\t\t},\n\t\tbarButtonCollapse: {\n\t\t\tcursor: \"pointer\",\n\t\t\tbackground: theme.success.main,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.success.dark,\n\t\t\t},\n\t\t},\n\t\tbarButtonInactive: {\n\t\t\tbackground: theme.primary.transparent,\n\t\t},\n\t\tbarTitle: {\n\t\t\tposition: \"relative\",\n\t\t\ttop: 2,\n\t\t\tleft: 45,\n\t\t\twidth: \"100%\",\n\t\t\ttextAlign: \"center\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\tmaxWidth: \"calc(100% - 90px)\",\n\t\t\tuserSelect: \"none\",\n\t\t\tcolor: theme.background.text,\n\t\t},\n\t\tbarTitleIcon: {\n\t\t\tposition: \"relative\",\n\t\t\ttop: 3,\n\t\t},\n\t});\n\ntype WindowSnap = \"fullscreen\" | \"right\" | \"left\";\n\ninterface WindowState {\n\tcanDrag: boolean;\n\tcollapse: boolean;\n\tisActive?: boolean;\n\tlocalWindowState?: LocalWindowState;\n\tuseLocalWindowState: boolean;\n\tisResizing: boolean;\n\tzIndex?: number;\n\tsnap?: WindowSnap;\n}\n\nclass Window extends Component<\n\tWindowInterface,\n\tWindowState,\n\tWithStyles<typeof styles>\n> {\n\tdomContainer: Element;\n\tid!: number;\n\twrapperRef?: HTMLDivElement;\n\n\tconstructor(props: Window[\"props\"]) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcanDrag: false,\n\t\t\tcollapse: props.window.minimized || false,\n\t\t\tuseLocalWindowState: false,\n\t\t\tisResizing: false,\n\t\t};\n\n\t\tthis.domContainer = document.createElement(\"div\");\n\t\tdocument.getElementById(\"app\")?.appendChild(this.domContainer);\n\t}\n\n\tstatic contextType = ConnectionContext;\n\n\tcontext!: React.ContextType<typeof ConnectionContext>;\n\n\tpercentageToNumber = (size: number | string, from: number) => {\n\t\tif (typeof size === \"number\") {\n\t\t\treturn size;\n\t\t}\n\t\treturn (100 / Number(size.replace(\"%\", \"\"))) * from;\n\t};\n\n\tscreenSizesToNumbers = () => {\n\t\tconst { maxHeight, maxWidth, minHeight, minWidth } = this.props.window;\n\t\treturn {\n\t\t\tmaxHeight: this.percentageToNumber(\n\t\t\t\tmaxHeight || defaultWindowSize.maxHeight,\n\t\t\t\twindow.innerHeight\n\t\t\t),\n\t\t\tminHeight: this.percentageToNumber(\n\t\t\t\tminHeight || defaultWindowSize.minHeight,\n\t\t\t\twindow.innerHeight\n\t\t\t),\n\t\t\tmaxWidth: this.percentageToNumber(\n\t\t\t\tmaxWidth || defaultWindowSize.maxWidth,\n\t\t\t\twindow.innerWidth\n\t\t\t),\n\t\t\tminWidth: this.percentageToNumber(\n\t\t\t\tminWidth || defaultWindowSize.minWidth,\n\t\t\t\twindow.innerWidth\n\t\t\t),\n\t\t};\n\t};\n\n\tgetSize = () => {\n\t\tconst size = { ...(this.windowProperties.size || {}) };\n\t\tconst { collapse } = this.state;\n\t\tconst {\n\t\t\tmaxHeight,\n\t\t\tmaxWidth,\n\t\t\tminHeight,\n\t\t\tminWidth,\n\t\t} = this.screenSizesToNumbers();\n\t\tif (size.height && size.width) {\n\t\t\tif (maxHeight < size.height) {\n\t\t\t\tsize.height = maxHeight;\n\t\t\t}\n\t\t\tif (minHeight > size.height) {\n\t\t\t\tsize.height = minHeight;\n\t\t\t}\n\t\t\tif (maxWidth < size.width) {\n\t\t\t\tsize.width = maxWidth;\n\t\t\t}\n\t\t\tif (minWidth > size.width) {\n\t\t\t\tsize.width = minWidth;\n\t\t\t}\n\t\t\tif (collapse) {\n\t\t\t\tsize.height = windowBarHeight;\n\t\t\t}\n\t\t\treturn size as { width: number; height: number };\n\t\t} else {\n\t\t\treturn {\n\t\t\t\twidth: defaultWindowSize.width,\n\t\t\t\theight: collapse ? windowBarHeight : defaultWindowSize.height,\n\t\t\t};\n\t\t}\n\t};\n\n\tgetPosition = () => {\n\t\tconst size = this.getSize();\n\t\tconst { position } = this.windowProperties;\n\t\tconst { useLocalWindowState } = this.state;\n\t\tif (position && size) {\n\t\t\tif (position.x < 0) {\n\t\t\t\tif (!useLocalWindowState) {\n\t\t\t\t\tposition.x = -position.x;\n\t\t\t\t} else {\n\t\t\t\t\tposition.x = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (position.x > window.innerWidth - size.width) {\n\t\t\t\tif (!useLocalWindowState) {\n\t\t\t\t\tposition.x =\n\t\t\t\t\t\twindow.innerWidth -\n\t\t\t\t\t\tsize.width -\n\t\t\t\t\t\t((window.innerWidth - size.width) % position.x);\n\t\t\t\t} else {\n\t\t\t\t\tposition.x = window.innerWidth - size.width;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (position.y > window.innerHeight - desktopWindowsBarHeight) {\n\t\t\t\tposition.y = window.innerHeight - desktopWindowsBarHeight;\n\t\t\t}\n\t\t\tif (position.y < 0) {\n\t\t\t\tposition.y = 0;\n\t\t\t}\n\t\t\treturn position;\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tx: window.screen.availWidth / 3,\n\t\t\t\ty: window.screen.availHeight / 3,\n\t\t\t};\n\t\t}\n\t};\n\n\tprivate willUnmount = false;\n\n\tcomponentDidMount() {\n\t\tthis.updateWindowPositionORSizeQueuer.start();\n\t\twindowManager.emitter.on(\"minimizeWindow\", ({ id }) => {\n\t\t\tthis.props.setWindowState({\n\t\t\t\tminimized: true,\n\t\t\t});\n\t\t\tif (id === this.id) {\n\t\t\t\tthis.setState({ collapse: true, isActive: true });\n\t\t\t} else this.setState({ isActive: false });\n\t\t});\n\n\t\twindowManager.emitter.on(\"maximizeWindow\", ({ id }) => {\n\t\t\tthis.props.setWindowState({\n\t\t\t\tminimized: false,\n\t\t\t});\n\t\t\tif (id === this.id) {\n\t\t\t\tthis.setState({ collapse: false, isActive: true });\n\t\t\t} else this.setState({ isActive: false });\n\t\t});\n\t\twindowManager.emitter.on(\"setActiveWindow\", ({ id }) => {\n\t\t\tif (id === this.id) {\n\t\t\t\tthis.setState({ isActive: true });\n\t\t\t} else {\n\t\t\t\tthis.setState({ isActive: false });\n\t\t\t}\n\t\t});\n\t\twindowManager.emitter.on(\"updateZIndex\", ({ id, layer }) => {\n\t\t\tif (id === this.id) {\n\t\t\t\tthis.setState({ zIndex: layer });\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener(\"mousedown\", (e) => {\n\t\t\tif (this.wrapperRef && e.target) {\n\t\t\t\tif (\n\t\t\t\t\tthis.wrapperRef &&\n\t\t\t\t\t!this.wrapperRef.contains(e.target as HTMLElement)\n\t\t\t\t) {\n\t\t\t\t\tthis.handleClickOutside();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.id = windowManager.addWindow(this.props.name, this.props.icon, {\n\t\t\tminimized: this.props.window.minimized || false,\n\t\t});\n\t\twindowManager.reloadWindowsLayers();\n\n\t\tconst switchPosition = () => {\n\t\t\tif (!this.willUnmount) {\n\t\t\t\tthis.switchToAbsolutePosition();\n\t\t\t\twindow.requestAnimationFrame(switchPosition);\n\t\t\t}\n\t\t};\n\t\tswitchPosition();\n\t}\n\n\tcomponentWillUnmount = () => {\n\t\tthis.willUnmount = true;\n\t\twindowManager.closeWindow(this.id);\n\t};\n\n\thandleClickOutside = () => {\n\t\tthis.setState({ isActive: false });\n\t};\n\n\tsetActive = () => {\n\t\tif (windowManager.activeWindowId === this.id) {\n\t\t\tthis.setState({ isActive: true });\n\t\t} else {\n\t\t\twindowManager.setActiveWindow(this.id);\n\t\t}\n\t};\n\n\tget serverWindowProperties() {\n\t\treturn {\n\t\t\tsize:\n\t\t\t\tthis.props.window.width && this.props.window.height\n\t\t\t\t\t? {\n\t\t\t\t\t\t\twidth: this.props.window.width,\n\t\t\t\t\t\t\theight: this.props.window.height,\n\t\t\t\t\t  }\n\t\t\t\t\t: undefined,\n\t\t\tposition: this.props.window.position,\n\t\t};\n\t}\n\n\tget windowProperties() {\n\t\tif (this.state.useLocalWindowState) {\n\t\t\treturn this.state.localWindowState || this.serverWindowProperties;\n\t\t} else {\n\t\t\treturn this.serverWindowProperties;\n\t\t}\n\t}\n\n\tupdateWindowPositionORSizeQueuer = lastTaskQueuer();\n\n\t/**\n\t * update window size or position locally on remotely\n\t */\n\tsetWindowState(state: LocalWindowState) {\n\t\tthis.setState({\n\t\t\tlocalWindowState: { ...this.state.localWindowState, ...state },\n\t\t});\n\n\t\tthis.updateWindowPositionORSizeQueuer.queueTask(() =>\n\t\t\tthis.props.setWindowState(state)\n\t\t);\n\t}\n\n\tsnapWindow = (snap?: WindowSnap | undefined, forceState?: boolean) => {\n\t\tconst {\n\t\t\tprops: {\n\t\t\t\twindow: { allowLocalScreenSnapping },\n\t\t\t},\n\t\t\tstate: { snap: currentSnap, collapse },\n\t\t} = this;\n\t\tif (!collapse) {\n\t\t\tif (allowLocalScreenSnapping) {\n\t\t\t\tconst snapNow = forceState !== undefined ? forceState : !currentSnap;\n\t\t\t\tthis.setState({ snap: snapNow ? snap : undefined });\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * static constance window properties to use when we are in fullscreen mode\n\t */\n\tstatic fullscreenWindowPosition = { x: 0, y: 0 };\n\n\t/*\n\t *\twe are removing the translation base position and replace it with an absolute position using top and left\n\t *\tcss properties in the render we need to avoid using translation base position since it is causing blurriness in iframes\n\t */\n\tswitchToAbsolutePosition = () => {\n\t\tconst rndElement = document.getElementsByClassName(\n\t\t\tthis.randomClassNameForRndContainer\n\t\t)[0] as HTMLDivElement;\n\t\trndElement.style.transform = \"\";\n\n\t\tconst newStyles = this.getWindowTransformStyles();\n\n\t\tObject.keys(newStyles).map((keyNameAsString) => {\n\t\t\tconst key = keyNameAsString as keyof typeof newStyles;\n\t\t\tconst value = newStyles[key];\n\t\t\tif (typeof value === \"number\") {\n\t\t\t\trndElement.style[key] = `${value}px`;\n\t\t\t} else if (typeof value === \"string\") {\n\t\t\t\trndElement.style[key] = value;\n\t\t\t}\n\t\t});\n\t};\n\n\trandomClassNameForRndContainer = `rndElement${Math.random()}`;\n\n\tgetWindowTransformStyles = () => {\n\t\tconst position = this.getWindowPosition();\n\t\tconst size = this.getWindowSize();\n\t\treturn {\n\t\t\ttop: position?.y || 0,\n\t\t\tleft: position?.x || 0,\n\t\t\theight: size?.height,\n\t\t\twidth: size?.width,\n\t\t};\n\t};\n\n\tonDrag: RndDragCallback = (e, newPosition) => {\n\t\tthis.setActive();\n\t\tconst { isResizing } = this.state;\n\t\tif (isResizing) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = this.getPosition();\n\t\tconst size = this.getSize();\n\t\tconst { clientX, clientY } = e as MouseEvent;\n\n\t\tconst updatedPosition = {\n\t\t\tx: position.x + newPosition.deltaX,\n\t\t\ty: position.y + newPosition.deltaY,\n\t\t};\n\n\t\t// snap window drag to mouse\n\t\tif (updatedPosition.x > clientX) {\n\t\t\tupdatedPosition.x = clientX;\n\t\t}\n\t\tif (updatedPosition.x < clientX - size.width) {\n\t\t\tupdatedPosition.x = clientX - size.width;\n\t\t}\n\t\tif (updatedPosition.y > clientY - windowBarHeight) {\n\t\t\tupdatedPosition.y = clientY - windowBarHeight;\n\t\t}\n\t\tif (updatedPosition.y < clientY) {\n\t\t\tupdatedPosition.y = clientY - windowBarHeight / 2;\n\t\t}\n\n\t\t// calculate if the window is touching one of the screen borders\n\t\tconst touchTop = clientY < 2; // need to go a bit over the edge to go fullscreen\n\t\tconst farFromTop = clientY > 50;\n\t\tconst touchMinimumLeft = clientX < 25;\n\t\tconst farFromMinimumLeft = clientX > 50;\n\t\tconst touchMinimumRight = clientX > window.innerWidth - 25;\n\t\tconst farFromMinimumRight = clientX < window.innerWidth - 50;\n\n\t\t// in case the window touches one of the screen edges snap to it\n\t\tif (touchTop) {\n\t\t\tthis.snapWindow(\"fullscreen\", true);\n\t\t\treturn;\n\t\t}\n\t\tif (touchMinimumLeft) {\n\t\t\tthis.snapWindow(\"left\", true);\n\t\t\treturn;\n\t\t}\n\t\tif (touchMinimumRight) {\n\t\t\tthis.snapWindow(\"right\", true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (farFromMinimumLeft && farFromMinimumRight && farFromTop) {\n\t\t\tthis.snapWindow(undefined, false);\n\t\t}\n\t\tthis.setWindowState({\n\t\t\tposition: updatedPosition,\n\t\t});\n\t};\n\tonResize: RndResizeCallback = (e, dir, ele, delta) => {\n\t\tconst position = this.getPosition();\n\t\tconst { localWindowState, collapse } = this.state;\n\t\tif (localWindowState?.size) {\n\t\t\tconst { size } = localWindowState;\n\t\t\tconst {\n\t\t\t\tmaxHeight,\n\t\t\t\tmaxWidth,\n\t\t\t\tminHeight,\n\t\t\t\tminWidth,\n\t\t\t} = this.screenSizesToNumbers();\n\t\t\tconst newSize = {\n\t\t\t\twidth: size.width + delta.width - this.lastResizeDelta.width,\n\t\t\t\theight: size.height + delta.height - this.lastResizeDelta.height,\n\t\t\t};\n\t\t\tif (collapse) {\n\t\t\t\tnewSize.height -= delta.height - this.lastResizeDelta.height;\n\t\t\t}\n\t\t\tswitch (dir) {\n\t\t\t\tcase \"topRight\":\n\t\t\t\tcase \"top\": {\n\t\t\t\t\tif (newSize.height < maxHeight && newSize.height > minHeight) {\n\t\t\t\t\t\tposition.y -= delta.height - this.lastResizeDelta.height;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"bottomLeft\":\n\t\t\t\tcase \"left\": {\n\t\t\t\t\tif (newSize.width < maxWidth && newSize.width > minWidth) {\n\t\t\t\t\t\tposition.x -= delta.width - this.lastResizeDelta.width;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"topLeft\": {\n\t\t\t\t\tif (newSize.height < maxHeight && newSize.height > minHeight) {\n\t\t\t\t\t\tposition.y -= delta.height - this.lastResizeDelta.height;\n\t\t\t\t\t}\n\t\t\t\t\tif (newSize.width < maxWidth && newSize.width > minWidth) {\n\t\t\t\t\t\tposition.x -= delta.width - this.lastResizeDelta.width;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setWindowState({\n\t\t\t\tsize: newSize,\n\t\t\t\tposition: {\n\t\t\t\t\t...position,\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.lastResizeDelta = delta;\n\t\t}\n\t};\n\n\tgetWindowSize = () => {\n\t\tconst size = this.getSize();\n\t\tconst { snap } = this.state;\n\t\tif (!snap) {\n\t\t\treturn size;\n\t\t} else if (snap === \"fullscreen\") {\n\t\t\treturn {\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: `calc(100% - ${\n\t\t\t\t\tdesktopWindowsBarHeight + 10 /* add 5 to account for margin */\n\t\t\t\t}px)`,\n\t\t\t};\n\t\t} else if (snap === \"left\" || snap === \"right\") {\n\t\t\treturn {\n\t\t\t\twidth: \"50%\",\n\t\t\t\theight: `calc(100% - ${\n\t\t\t\t\tdesktopWindowsBarHeight + 10 /* add 5 to account for margin */\n\t\t\t\t}px)`,\n\t\t\t};\n\t\t}\n\t};\n\n\tgetWindowPosition = () => {\n\t\tconst position = this.getPosition();\n\t\tconst { snap } = this.state;\n\t\tif (!snap) {\n\t\t\treturn position;\n\t\t} else if (snap === \"fullscreen\" || snap === \"left\") {\n\t\t\treturn {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t};\n\t\t} else if (snap === \"right\") {\n\t\t\treturn {\n\t\t\t\tx: window.innerWidth / 2,\n\t\t\t\ty: 0,\n\t\t\t};\n\t\t}\n\t};\n\n\tshouldCollapse = () => {\n\t\tconst { collapse, snap, useLocalWindowState, isResizing } = this.state;\n\t\treturn collapse || (useLocalWindowState && !snap && !isResizing);\n\t};\n\n\tlastResizeDelta = { width: 0, height: 0 };\n\n\trender() {\n\t\tconst {\n\t\t\tcanDrag,\n\t\t\tcollapse,\n\t\t\tisActive,\n\t\t\tzIndex,\n\t\t\tsnap,\n\t\t\tuseLocalWindowState,\n\t\t} = this.state;\n\t\tconst { children, classes, title, icon, onClose } = this.props;\n\t\tconst size = this.getSize();\n\t\tconst position = this.getPosition();\n\t\treturn ReactDOM.createPortal(\n\t\t\t<div\n\t\t\t\tref={(element) => {\n\t\t\t\t\tif (element) this.wrapperRef = element;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Rnd\n\t\t\t\t\tclassName={`${this.randomClassNameForRndContainer} ${\n\t\t\t\t\t\tuseLocalWindowState ? \"\" : classes.smoothMove\n\t\t\t\t\t}`}\n\t\t\t\t\tdisableDragging={!canDrag}\n\t\t\t\t\tsize={this.getWindowSize()}\n\t\t\t\t\tposition={this.getWindowPosition()}\n\t\t\t\t\tonDrag={this.onDrag}\n\t\t\t\t\tonDragStart={(e) => {\n\t\t\t\t\t\tif (snap) {\n\t\t\t\t\t\t\tconst { clientX, clientY } = e as MouseEvent;\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tuseLocalWindowState: true,\n\t\t\t\t\t\t\t\tlocalWindowState: {\n\t\t\t\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\t\t\t\tx: clientX - size.width / 2,\n\t\t\t\t\t\t\t\t\t\ty: clientY + windowBarHeight / 2,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsnap: undefined,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tuseLocalWindowState: true,\n\t\t\t\t\t\t\t\tlocalWindowState: {\n\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tonDragStop={() => {\n\t\t\t\t\t\tthis.updateWindowPositionORSizeQueuer.idle().then(() =>\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tuseLocalWindowState: false,\n\t\t\t\t\t\t\t\tlocalWindowState: undefined,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tdefaultSize={size}\n\t\t\t\t\tonResizeStart={() =>\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tuseLocalWindowState: true,\n\t\t\t\t\t\t\tlocalWindowState: {\n\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\tsize: size,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsnap: undefined,\n\t\t\t\t\t\t\tisResizing: true,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tonResizeStop={() => {\n\t\t\t\t\t\tthis.lastResizeDelta = { height: 0, width: 0 };\n\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tisResizing: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\tthis.updateWindowPositionORSizeQueuer.idle().then(() => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tuseLocalWindowState: false,\n\t\t\t\t\t\t\t\t\t\tlocalWindowState: undefined,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tonResize={this.onResize}\n\t\t\t\t\tstyle={{ zIndex, ...this.getWindowTransformStyles() }}\n\t\t\t\t>\n\t\t\t\t\t<div className={classes.root} onClick={() => this.setActive()}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonMouseEnter={() => this.setState({ canDrag: true })}\n\t\t\t\t\t\t\tonMouseLeave={() => this.setState({ canDrag: false })}\n\t\t\t\t\t\t\tonDoubleClick={() => this.snapWindow(\"fullscreen\")}\n\t\t\t\t\t\t\tclassName={`${classes.bar} ${\n\t\t\t\t\t\t\t\tthis.shouldCollapse() ? classes.barCollapse : \"\"\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={classes.barButtonsContainer}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\twindowManager.updateState(this.id, {\n\t\t\t\t\t\t\t\t\t\t\tminimized: !collapse,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName={`${classes.barButton} ${\n\t\t\t\t\t\t\t\t\t\tisActive\n\t\t\t\t\t\t\t\t\t\t\t? classes.barButtonCollapse\n\t\t\t\t\t\t\t\t\t\t\t: classes.barButtonInactive\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${classes.barButton} ${\n\t\t\t\t\t\t\t\t\t\tisActive ? classes.barButtonExit : classes.barButtonInactive\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={classes.barTitle}>\n\t\t\t\t\t\t\t\t{title} -{\" \"}\n\t\t\t\t\t\t\t\t{icon.type === \"icon\" ? (\n\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\tcontainerClassName={classes.barTitleIcon}\n\t\t\t\t\t\t\t\t\t\tname={icon.icon}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tclassName={classes.barTitleIcon}\n\t\t\t\t\t\t\t\t\t\talt=\"windows icon\"\n\t\t\t\t\t\t\t\t\t\twidth={14}\n\t\t\t\t\t\t\t\t\t\theight={14}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classes.body}\n\t\t\t\t\t\t\tstyle={this.shouldCollapse() ? { display: \"none\" } : {}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Rnd>\n\t\t\t</div>,\n\t\t\tthis.domContainer\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Window);\n","import Emitter from \"./Emitter\";\n\nexport const lastTaskQueuer = () => {\n\tlet stop = false;\n\tlet isIdle = true;\n\tlet lastTask: undefined | (() => Promise<void>);\n\n\tconst continueEmitter = new Emitter<{ continue: void; idle: void }>();\n\n\treturn {\n\t\tqueueTask(newTask: () => Promise<void>) {\n\t\t\tlastTask = newTask;\n\t\t\tcontinueEmitter.call(\"continue\", (null as unknown) as void);\n\t\t},\n\t\tstop() {\n\t\t\tstop = true;\n\t\t},\n\t\tidle() {\n\t\t\treturn new Promise<void>((res) => {\n\t\t\t\tif (isIdle) {\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t\tcontinueEmitter.on(\"idle\", res);\n\t\t\t});\n\t\t},\n\t\tasync start() {\n\t\t\twhile (!stop) {\n\t\t\t\tif (lastTask) {\n\t\t\t\t\tisIdle = false;\n\t\t\t\t\tconst currentTask = lastTask;\n\t\t\t\t\tlastTask = undefined;\n\t\t\t\t\tawait currentTask();\n\t\t\t\t\tisIdle = true;\n\t\t\t\t}\n\t\t\t\tif (!lastTask) {\n\t\t\t\t\tcontinueEmitter.call(\"idle\", (null as unknown) as void);\n\t\t\t\t\tawait new Promise((res) => continueEmitter.on(\"continue\", res));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n};\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport TerminalInterface from \"@web-desktop-environment/interfaces/lib/views/apps/utils/Terminal\";\nimport {\n\twithStyles,\n\tcreateStyles,\n\tWithStyles,\n\twithTheme,\n\tWithTheme,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport io from \"socket.io-client\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\nimport { Terminal as XTerm } from \"xterm\";\nimport { FitAddon } from \"xterm-addon-fit\";\nimport ResizeDetector from \"react-resize-detector\";\nimport \"xterm/css/xterm.css\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\tborderTop: \"none\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tbackground: theme.background.main,\n\t\t\tbackdropFilter: \"blur(15px)\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t},\n\t\tbody: {\n\t\t\theight: \"calc(100% - 8px)\",\n\t\t\twidth: \"100%\",\n\t\t\t\"& .xterm-viewport\": {\n\t\t\t\tbackground: \"#fff0\",\n\t\t\t},\n\t\t},\n\t});\n\nclass Terminal extends Component<\n\tTerminalInterface,\n\t{},\n\tWithStyles<typeof styles> & WithTheme<Theme>\n> {\n\tsocket: SocketIOClient.Socket;\n\tterm: XTerm;\n\ttermFit: FitAddon;\n\tcontainerElement?: HTMLElement;\n\tconstructor(props: Terminal[\"props\"]) {\n\t\tsuper(props);\n\t\tthis.socket = io(\n\t\t\t`${reactFullstackConnectionManager.https ? \"https\" : \"http\"}://${\n\t\t\t\treactFullstackConnectionManager.host\n\t\t\t}:${props.port}`,\n\t\t\t{\n\t\t\t\ttransports: [\"websocket\"],\n\t\t\t}\n\t\t);\n\t\tthis.term = new XTerm({\n\t\t\ttheme: this.getTermTheme(),\n\t\t\tfontFamily: \"JetBrains Mono\",\n\t\t\tallowTransparency: true,\n\t\t});\n\t\tthis.termFit = new FitAddon();\n\t\tthis.term.loadAddon(this.termFit);\n\t\tthis.socket.on(\"output\", (data: string) => {\n\t\t\tthis.term.write(data);\n\t\t});\n\t\tthis.term.onData((data) => {\n\t\t\tthis.socket.emit(\"input\", data);\n\t\t});\n\t}\n\n\tgetTermTheme = () => ({\n\t\tbackground: \"#fff0\",\n\t\tforeground: this.props.theme.background.text,\n\t\tcursor: this.props.theme.background.text,\n\t});\n\n\tcomponentDidMount = () => {\n\t\tif (this.containerElement) {\n\t\t\tthis.term.open(this.containerElement);\n\t\t\tthis.termFit.fit();\n\t\t}\n\t};\n\n\tcomponentWillUnmount = () => {\n\t\tthis.socket.close();\n\t};\n\n\tonResize = () => {\n\t\tif (this.containerElement?.clientWidth) {\n\t\t\t// do not resize is container is in display: none mode\n\t\t\tthis.termFit.fit();\n\t\t\tthis.socket.emit(\"setColumns\", this.term.cols);\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { classes } = this.props;\n\t\tthis.term.setOption(\"theme\", this.getTermTheme());\n\t\tthis.onResize();\n\t\treturn (\n\t\t\t<ResizeDetector onResize={this.onResize}>\n\t\t\t\t<div className={classes.root}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classes.body}\n\t\t\t\t\t\tref={(div) => {\n\t\t\t\t\t\t\tif (div) {\n\t\t\t\t\t\t\t\tthis.containerElement = div;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</ResizeDetector>\n\t\t);\n\t}\n}\n\nexport default withTheme(withStyles(styles, { withTheme: true })(Terminal));\n","import ExplorerInterface, {\n\tFile,\n} from \"@web-desktop-environment/interfaces/lib/views/apps/utils/Explorer\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport React from \"react\";\nimport { withStyles, createStyles, WithStyles } from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport Button from \"@components/button\";\nimport Icon from \"@components/icon\";\nimport TextField from \"@components/textField\";\nimport Emitter from \"@utils/Emitter\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\nimport { transparent } from \"@utils/colors\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tbackground: theme.background.main,\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\tborderTop: \"none\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(15px)\" : \"none\",\n\t\t\tdisplay: \"grid\",\n\t\t\tgridTemplateRows: \"44px calc(100% - 44px)\",\n\t\t},\n\t\tactionBarContainer: {\n\t\t\twidth: 175,\n\t\t\tjustifyContent: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t\theight: \"100%\",\n\t\t},\n\t\tactionBar: {\n\t\t\tborderBottom: `1px solid ${theme.windowBorderColor}`,\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tbackground: theme.background.dark,\n\t\t\tborderRight: `solid 1px ${theme.windowBorderColor}`,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(16px)\" : \"none\",\n\t\t\tborderRadius: \"0 0 0 10px\",\n\t\t\talignItems: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t},\n\t\tactionButton: {\n\t\t\ttextDecoration: \"none\",\n\t\t\twidth: \"100%\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\theight: 20,\n\t\t\tpaddingTop: 10,\n\t\t\tpaddingBottom: 10,\n\t\t\ttextAlign: \"center\",\n\t\t\tuserSelect: \"none\",\n\t\t\tanimation: \"$opacityUp 150ms\",\n\t\t\tcolor: theme.secondary.text,\n\t\t\tfontSize: 18,\n\t\t\tcursor: \"pointer\",\n\t\t\tborderBottom: `solid 1px ${theme.windowBorderColor}`,\n\t\t\ttransition: \"background 100ms, transform 100ms\",\n\t\t\t...(theme.type === \"transparent\"\n\t\t\t\t? {\n\t\t\t\t\t\tbackdropFilter: \"blur(7px)\",\n\t\t\t\t\t\tboxShadow: `-1px 2px 20px 1px ${theme.shadowColor}`,\n\t\t\t\t\t\tbackground: theme.background.transparent,\n\t\t\t\t\t\tborderBottom: `1px solid ${theme.windowBorderColor}`,\n\t\t\t\t  }\n\t\t\t\t: {}),\n\t\t\t\"&:hover\": {\n\t\t\t\t...(theme.type === \"transparent\"\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tbackdropFilter: \"blur(13px)\",\n\t\t\t\t\t\t\tbackground: theme.secondary.light,\n\t\t\t\t\t  }\n\t\t\t\t\t: {\n\t\t\t\t\t\t\tbackground: theme.secondary.light,\n\t\t\t\t\t  }),\n\t\t\t},\n\t\t},\n\t\t\"@keyframes opacityUp\": {\n\t\t\tfrom: {\n\t\t\t\topacity: 0,\n\t\t\t},\n\t\t\tto: {\n\t\t\t\topacity: 1,\n\t\t\t},\n\t\t},\n\t\tlocationBarContainer: {\n\t\t\twidth: \"100%\",\n\t\t\toverflow: \"auto\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\tborderRight: \"none\",\n\t\t\tborderLeft: \"none\",\n\t\t},\n\t\tlocationBar: {\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(10px)\" : \"none\",\n\t\t\twidth: \"95%\",\n\t\t\tmaxHeight: \"100%\",\n\t\t\toverflowX: \"auto\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tflexDirection: \"column\",\n\t\t},\n\t\tbreadcrumbFilesContainer: {\n\t\t\tmaxHeight: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t},\n\t\tfileBoxContainer: {\n\t\t\theight: \"100%\",\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t},\n\t\tfileBox: {\n\t\t\tboxShadow: `${theme.shadowColor} 0px 7px 20px 1px inset`,\n\t\t\tbackground: theme.background.transparent || theme.background.main,\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\toverflowY: \"auto\",\n\t\t\tborderBottomRightRadius: 9,\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t},\n\t\tfileContainer: {\n\t\t\tdisplay: \"grid\",\n\t\t\tgridTemplateColumns: \"repeat(auto-fit, minmax(80px, 120px))\",\n\t\t\tmargin: 15,\n\t\t\tjustifyContent: \"center\",\n\t\t\tgridGap: 15,\n\t\t\tgap: \"15px\",\n\t\t\tgridAutoRows: 100,\n\t\t},\n\t\tfile: {\n\t\t\tborderRadius: 7,\n\t\t\tpadding: 2,\n\t\t\tcolor: theme.secondary.text,\n\t\t\tcursor: \"pointer\",\n\t\t\tboxShadow: `-1px 2px 10px 1px ${theme.shadowColor}`,\n\t\t\ttransition: \"background 100ms, transform 200ms\",\n\t\t\t\"&:hover\": {\n\t\t\t\ttransform: \"scale(1.1)\",\n\t\t\t\tbackground: theme.secondary.dark,\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t},\n\t\t\theight: 90,\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column-reverse\",\n\t\t},\n\t\ttransparent: {\n\t\t\tbackground: \"transparent !important\",\n\t\t},\n\t\tfileActive: {\n\t\t\tbackground: theme.secondary.transparent || theme.secondary.main,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t\tbackground: theme.secondary.transparent || theme.secondary.main,\n\t\t\t},\n\t\t},\n\t\tfileName: {\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\tmaxWidth: \"100%\",\n\t\t\ttextAlign: \"center\",\n\t\t\tuserSelect: \"none\",\n\t\t},\n\t\tfileIcon: {\n\t\t\tuserSelect: \"none\",\n\t\t\ttextAlign: \"center\",\n\t\t\tmaxWidth: 100,\n\t\t\tfontSize: 50,\n\t\t},\n\t\tfileBreadcrumb: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tbreadcrumbButtonItem: {\n\t\t\tminWidth: 20,\n\t\t\ttextAlign: \"center\",\n\t\t\tuserSelect: \"none\",\n\t\t\tcolor: theme.primary.text,\n\t\t\tfontSize: 25,\n\t\t\tbackground: theme.primary.transparent,\n\t\t\tborder: \"solid 1px transparent\",\n\t\t\tmaxWidth: 380,\n\t\t\toverflow: \"hidden\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\ttransition: \"background 100ms\",\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.primary.main,\n\t\t\t},\n\t\t\tcursor: \"pointer\",\n\t\t},\n\t\tbreadcrumbButtonItemFirst: {\n\t\t\tborderRadius: \"8px 0 0 8px\",\n\t\t\tpaddingLeft: 10,\n\t\t},\n\t\tbreadcrumbButtonItemLast: {\n\t\t\tcursor: \"auto\",\n\t\t\tborderRadius: \"0 8px 8px 0\",\n\t\t\tbackground:\n\t\t\t\ttheme.type === \"light\"\n\t\t\t\t\t? theme.primary.main\n\t\t\t\t\t: transparent(theme.primary.main, 0.6),\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.primary.main,\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t},\n\t\t\tpaddingRight: 10,\n\t\t},\n\t\tdialog: {\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tflexDirection: \"column\",\n\t\t},\n\t\tdialogMessage: {\n\t\t\tmaxWidth: \"80%\",\n\t\t\ttextAlign: \"center\",\n\t\t\tcolor: theme.background.text,\n\t\t\tfontSize: 25,\n\t\t},\n\t\tdialogButtons: {\n\t\t\tmargin: 20,\n\t\t\twidth: \"50%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t},\n\t\tdialogButton: {\n\t\t\tmargin: 10,\n\t\t\tfontSize: 50,\n\t\t\twidth: \"fit-content\",\n\t\t\theight: \"fit-content\",\n\t\t\tborderRadius: 7,\n\t\t\tbackground: theme.primary.main,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.primary.dark,\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t},\n\t\t},\n\t\tdialogButtonPrimary: {\n\t\t\tbackground: theme.secondary.main,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.secondary.dark,\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t},\n\t\t},\n\t\tdialogInput: {\n\t\t\tmargin: 10,\n\t\t\tcolor: theme.background.text,\n\t\t\tfontSize: 25,\n\t\t},\n\t\topenButton: {\n\t\t\tmargin: 5,\n\t\t},\n\t\tstickyActionBarContainer: {\n\t\t\tposition: \"sticky\",\n\t\t\tbottom: 0,\n\t\t\twidth: \"100%\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t\tbackground: theme.background.dark,\n\t\t\tborderTop: `1px solid ${theme.windowBorderColor}`,\n\t\t},\n\t\tactionBarNoBorder: {\n\t\t\tborderBottom: \"none\",\n\t\t},\n\t});\n\ninterface Confirm {\n\tmessage: string;\n\tresult?: boolean;\n}\n\ninterface Prompt {\n\tmessage: string;\n\tvalue: string;\n\tresult?: boolean;\n}\n\ninterface ExplorerState {\n\tfileIsOverFile?: number;\n\tselectedFile?: number;\n\tdragedFile?: File;\n\tcopyPath?: { fullPath: string; name: string };\n\tcutPath?: { fullPath: string; name: string };\n\tconfirm?: Confirm;\n\tprompt?: Prompt;\n\tdownloadUrl?: string;\n}\n\ninterface ExplorerEvents {\n\tconfirmDone: Confirm;\n\tpromptDone: Prompt;\n}\n\nclass Explorer extends Component<\n\tExplorerInterface,\n\tExplorerState,\n\tWithStyles<typeof styles>\n> {\n\tselectedFile?: File & { fullPath: string };\n\tconstructor(props: Explorer[\"props\"]) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\temitter = new Emitter<ExplorerEvents>();\n\n\tconfirm = async (message: string) => {\n\t\treturn await new Promise((resolve, reject) => {\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tconfirm: {\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tconst confirmDone = (confirm: Confirm) => {\n\t\t\t\t\t\tif (confirm.result !== undefined) {\n\t\t\t\t\t\t\tresolve(confirm.result);\n\t\t\t\t\t\t\tthis.setState({ confirm: undefined });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(new Error(\"confirm does not have a result.\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.emitter.off(\"confirmDone\", confirmDone);\n\t\t\t\t\t};\n\t\t\t\t\tthis.emitter.on(\"confirmDone\", confirmDone);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t};\n\n\tprompt = async (\n\t\tmessage: string\n\t): Promise<{ result: boolean; value: string }> => {\n\t\treturn await new Promise((resolve) => {\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tprompt: {\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tvalue: \"\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tconst promptFinish = (prompt: Prompt) => {\n\t\t\t\t\t\tif (prompt.result) {\n\t\t\t\t\t\t\tresolve({ result: prompt.result, value: prompt.value });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve({ result: false, value: prompt.value });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState({ prompt: undefined });\n\t\t\t\t\t\tthis.emitter.off(\"promptDone\", promptFinish);\n\t\t\t\t\t};\n\t\t\t\t\tthis.emitter.on(\"promptDone\", promptFinish);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t};\n\n\tgetBreadcrumbLocations = (maxLength: number) => {\n\t\tconst {\n\t\t\tcurrentPath,\n\t\t\tplatformPathSeparator,\n\t\t\tonChangeCurrentPath,\n\t\t} = this.props;\n\t\tlet currentLocation = \"\";\n\t\tconst pathArray: string[] = [];\n\t\tcurrentPath\n\t\t\t.split(platformPathSeparator)\n\t\t\t.filter((path) => path)\n\t\t\t.forEach((path) => pathArray.push(`${path}${platformPathSeparator}`));\n\t\tpathArray.unshift(platformPathSeparator);\n\t\tconst result = pathArray.map((path, i) => {\n\t\t\tcurrentLocation += path;\n\t\t\tconst pathPartPath = currentLocation;\n\t\t\treturn {\n\t\t\t\tpath,\n\t\t\t\tisFirst: i === 0,\n\t\t\t\tisLast: i === pathArray.length - 1,\n\t\t\t\tonClick: () => {\n\t\t\t\t\tonChangeCurrentPath(pathPartPath);\n\t\t\t\t\tthis.setState({ selectedFile: undefined });\n\t\t\t\t\tthis.selectedFile = undefined;\n\t\t\t\t},\n\t\t\t\tonDrop: () => this.onDropPath(pathPartPath),\n\t\t\t};\n\t\t});\n\t\twhile (result.length > maxLength) {\n\t\t\tresult.shift();\n\t\t\tresult[0].isFirst = true;\n\t\t}\n\t\treturn result;\n\t};\n\n\tprivate onDrop = async (target: File) => {\n\t\tconst { currentPath, platformPathSeparator, onMove } = this.props;\n\t\tthis.setState({ dragedFile: undefined });\n\t\tif (\n\t\t\tthis.state.dragedFile &&\n\t\t\tthis.state.dragedFile !== target &&\n\t\t\ttarget.isFolder\n\t\t) {\n\t\t\tconst newPath = `${currentPath}${platformPathSeparator}${target.name}${platformPathSeparator}${this.state.dragedFile.name}`;\n\t\t\tconst originalPath = `${currentPath}${platformPathSeparator}${this.state.dragedFile.name}`;\n\t\t\tthis.setState({\n\t\t\t\tfileIsOverFile: undefined,\n\t\t\t\tselectedFile: undefined,\n\t\t\t});\n\t\t\tif (\n\t\t\t\tawait this.confirm(\n\t\t\t\t\t` do you want to move ${this.state.dragedFile.name} to ${newPath}`\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tonMove({\n\t\t\t\t\tnewPath,\n\t\t\t\t\toriginalPath,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tprivate onDropPath = async (path: string) => {\n\t\tconst { currentPath, platformPathSeparator, onMove } = this.props;\n\t\tif (this.state.dragedFile) {\n\t\t\tconst newPath = `${path}${platformPathSeparator}${this.state.dragedFile.name}`;\n\t\t\tconst originalPath = `${currentPath}${platformPathSeparator}${this.state.dragedFile.name}`;\n\t\t\tthis.setState({\n\t\t\t\tfileIsOverFile: undefined,\n\t\t\t\tselectedFile: undefined,\n\t\t\t});\n\t\t\tif (\n\t\t\t\tawait this.confirm(\n\t\t\t\t\t` do you want to move ${this.state.dragedFile.name} to ${newPath}`\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tonMove({\n\t\t\t\t\tnewPath,\n\t\t\t\t\toriginalPath,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tprivate onFileDragOver = (file: File, index: number) => {\n\t\tif (\n\t\t\tfile.isFolder &&\n\t\t\tthis.state.dragedFile?.name !== file.name &&\n\t\t\tthis.state.fileIsOverFile !== index\n\t\t) {\n\t\t\tthis.setState({ fileIsOverFile: index });\n\t\t}\n\t};\n\n\tdeleteSelected = async () => {\n\t\tconst { currentPath, platformPathSeparator, onDelete } = this.props;\n\t\tif (\n\t\t\tthis.selectedFile &&\n\t\t\t(await this.confirm(\n\t\t\t\t`are you sure you want to delete ${this.selectedFile.name}`\n\t\t\t))\n\t\t) {\n\t\t\tonDelete(\n\t\t\t\t`${currentPath}${platformPathSeparator}${this.selectedFile.name}`\n\t\t\t);\n\t\t\tthis.setState({ selectedFile: undefined });\n\t\t\tthis.selectedFile = undefined;\n\t\t}\n\t};\n\n\tcreateFolder = async () => {\n\t\tconst promptCreate = await this.prompt(\"please enter folder name:\");\n\t\tconst { currentPath, platformPathSeparator, onCreateFolder } = this.props;\n\t\tif (promptCreate.value) {\n\t\t\tonCreateFolder(\n\t\t\t\t`${currentPath}${platformPathSeparator}${promptCreate.value}`\n\t\t\t);\n\t\t}\n\t};\n\n\tcreateFile = async () => {\n\t\tconst promptCreate = await this.prompt(\"please enter file name:\");\n\t\tconst { currentPath, platformPathSeparator, onCreateFile } = this.props;\n\t\tif (promptCreate.value) {\n\t\t\tonCreateFile(\n\t\t\t\t`${currentPath}${platformPathSeparator}${promptCreate.value}`\n\t\t\t);\n\t\t}\n\t};\n\n\tprivate Past = () => {\n\t\tconst { cutPath, copyPath } = this.state;\n\t\tconst { platformPathSeparator, currentPath, onMove, onCopy } = this.props;\n\t\tif (cutPath || copyPath) {\n\t\t\tif (this.selectedFile?.isFolder) {\n\t\t\t\tif (cutPath && cutPath.fullPath !== this.selectedFile?.fullPath) {\n\t\t\t\t\tonMove({\n\t\t\t\t\t\tnewPath: `${this.selectedFile.fullPath}${platformPathSeparator}${cutPath.name}`,\n\t\t\t\t\t\toriginalPath: cutPath.fullPath,\n\t\t\t\t\t});\n\t\t\t\t\tthis.setState({ copyPath: undefined });\n\t\t\t\t}\n\t\t\t\tif (copyPath && copyPath.fullPath !== this.selectedFile?.fullPath) {\n\t\t\t\t\tonCopy({\n\t\t\t\t\t\tnewPath: `${this.selectedFile.fullPath}${platformPathSeparator}${copyPath.name}`,\n\t\t\t\t\t\toriginalPath: copyPath.fullPath,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (cutPath) {\n\t\t\t\t\tonMove({\n\t\t\t\t\t\tnewPath: `${currentPath}${platformPathSeparator}${cutPath.name}`,\n\t\t\t\t\t\toriginalPath: cutPath.fullPath,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (copyPath) {\n\t\t\t\t\tonCopy({\n\t\t\t\t\t\tnewPath: `${currentPath}${platformPathSeparator}${copyPath.name}`,\n\t\t\t\t\t\toriginalPath: copyPath.fullPath,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\tclasses,\n\t\t\tfiles,\n\t\t\tcurrentPath,\n\t\t\tplatformPathSeparator,\n\t\t\tonRequestDownloadLink,\n\t\t\tonChangeCurrentPath,\n\t\t\tonSelect,\n\t\t\ttype,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tfileIsOverFile,\n\t\t\tselectedFile,\n\t\t\tcopyPath,\n\t\t\tcutPath,\n\t\t\tdownloadUrl,\n\t\t} = this.state;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<div className={classes.locationBarContainer}>\n\t\t\t\t\t<div className={classes.locationBar}>\n\t\t\t\t\t\t<div className={classes.breadcrumbFilesContainer}>\n\t\t\t\t\t\t\t{this.getBreadcrumbLocations(6).map((breadcrumbItem, index) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${classes.breadcrumbButtonItem} ${\n\t\t\t\t\t\t\t\t\t\tbreadcrumbItem.isFirst\n\t\t\t\t\t\t\t\t\t\t\t? classes.breadcrumbButtonItemFirst\n\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t} ${\n\t\t\t\t\t\t\t\t\t\tbreadcrumbItem.isLast\n\t\t\t\t\t\t\t\t\t\t\t? classes.breadcrumbButtonItemLast\n\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\tonDrop={breadcrumbItem.onDrop}\n\t\t\t\t\t\t\t\t\tonDragOverCapture={(e) => e.preventDefault()}\n\t\t\t\t\t\t\t\t\tonClick={breadcrumbItem.onClick}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{breadcrumbItem.path}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={classes.fileBoxContainer}>\n\t\t\t\t\t{type === \"explore\" && (\n\t\t\t\t\t\t<div className={classes.actionBarContainer}>\n\t\t\t\t\t\t\t<div className={classes.actionBar}>\n\t\t\t\t\t\t\t\t<div className={classes.actionButton} onClick={this.createFile}>\n\t\t\t\t\t\t\t\t\tnew File\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tonClick={this.createFolder}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tnew Folder\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{selectedFile !== undefined && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\tonClick={this.deleteSelected}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{selectedFile !== undefined && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile &&\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tcopyPath: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfullPath: this.selectedFile.fullPath,\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: this.selectedFile.name,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tcutPath: undefined,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCopy\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{selectedFile !== undefined && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile &&\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tcutPath: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfullPath: this.selectedFile.fullPath,\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: this.selectedFile.name,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tcopyPath: undefined,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCut\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{(cutPath || copyPath) && (\n\t\t\t\t\t\t\t\t\t<div className={classes.actionButton} onClick={this.Past}>\n\t\t\t\t\t\t\t\t\t\tPast\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{downloadUrl && (\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\thref={downloadUrl}\n\t\t\t\t\t\t\t\t\t\tdownload\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{selectedFile === undefined || downloadUrl\n\t\t\t\t\t\t\t\t\t\t\t? \"Download\"\n\t\t\t\t\t\t\t\t\t\t\t: \"Loading...\"}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className={classes.fileBox}>\n\t\t\t\t\t\t{this.state.prompt && (\n\t\t\t\t\t\t\t<div className={classes.dialog}>\n\t\t\t\t\t\t\t\t<div className={classes.dialogMessage}>\n\t\t\t\t\t\t\t\t\t{this.state.prompt.message}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvalue={this.state.prompt.value}\n\t\t\t\t\t\t\t\t\tonChange={(newValue) =>\n\t\t\t\t\t\t\t\t\t\tthis.state.prompt &&\n\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\tprompt: { ...this.state.prompt, value: newValue || \"\" },\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={classes.dialogInput}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className={classes.dialogButtons}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dialogButton}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.state.prompt &&\n\t\t\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tprompt: { ...this.state.prompt, result: false },\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.emitter.call(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"promptDone\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.prompt as Prompt\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tclassName={`${classes.dialogButton} ${classes.dialogButtonPrimary}`}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.state.prompt &&\n\t\t\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tprompt: { ...this.state.prompt, result: true },\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.emitter.call(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"promptDone\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.prompt as Prompt\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{this.state.confirm && (\n\t\t\t\t\t\t\t<div className={classes.dialog}>\n\t\t\t\t\t\t\t\t<div className={classes.dialogMessage}>\n\t\t\t\t\t\t\t\t\t{this.state.confirm.message}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.dialogButtons}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dialogButton}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t\t\t(state) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.confirm?.message\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfirm: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: state.confirm.message,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: {},\n\t\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.emitter.call(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"confirmDone\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.confirm as Confirm\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tclassName={`${classes.dialogButton} ${classes.dialogButtonPrimary}`}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t\t\t(state) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.confirm?.message\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfirm: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: state.confirm.message,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: {},\n\t\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.emitter.call(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"confirmDone\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.confirm as Confirm\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{!this.state.prompt && !this.state.confirm && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className={classes.fileContainer}>\n\t\t\t\t\t\t\t\t\t{files.map((file, index) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={`${classes.file} ${\n\t\t\t\t\t\t\t\t\t\t\t\tfileIsOverFile === index || selectedFile === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? classes.fileActive\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t} ${\n\t\t\t\t\t\t\t\t\t\t\t\tthis.state.dragedFile === file\n\t\t\t\t\t\t\t\t\t\t\t\t\t? classes.transparent\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\tdraggable\n\t\t\t\t\t\t\t\t\t\t\tonDrag={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ dragedFile: file });\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonDrop={() => this.onDrop(file)}\n\t\t\t\t\t\t\t\t\t\t\tonDragOverCapture={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.onFileDragOver(file, index);\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonDragLeave={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (fileIsOverFile === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ fileIsOverFile: undefined });\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (selectedFile !== index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...file,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullPath: `${currentPath}${platformPathSeparator}${file.name}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ selectedFile: index, downloadUrl: undefined },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!this.selectedFile.isFolder\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonRequestDownloadLink(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile.fullPath\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).then((result) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdownloadUrl: `${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treactFullstackConnectionManager.https\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"https\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"http\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}://${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treactFullstackConnectionManager.host\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}:${result.port}${result.path}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedFile: undefined,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdownloadUrl: undefined,\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonDoubleClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (file.isFolder) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeCurrentPath(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${currentPath}${platformPathSeparator}${file.name}${platformPathSeparator}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (type === \"select-file\" && onSelect) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${currentPath}${platformPathSeparator}${file.name}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.fileName}>{file.name}</div>\n\t\t\t\t\t\t\t\t\t\t\t{file.isFolder ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fileIcon}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfileIsOverFile === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"FcOpenedFolder\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"FcFolder\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon className={classes.fileIcon} name=\"FcDocument\" />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{type !== \"explore\" && (\n\t\t\t\t\t\t\t\t\t<div className={classes.stickyActionBarContainer}>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={`${classes.actionBar} ${classes.actionBarNoBorder}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.openButton}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t((type === \"select-file\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!this.selectedFile.isFolder) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(type === \"select-folder\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile.isFolder))\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect(this.selectedFile.fullPath);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tOpen\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Explorer);\n","import React from \"react\";\nimport { Component, View } from \"@react-fullstack/fullstack\";\nimport { FileViewerBase } from \"@web-desktop-environment/interfaces/lib/shared/fileViewer\";\nimport { createStyles, WithStyles } from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport Button from \"@components/button\";\n\nexport const makeFileViewerStyles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tbackground: theme.background.main,\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\tborderTop: \"none\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t\tpaddingBottom: 2,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(15px)\" : \"none\",\n\t\t\tdisplay: \"grid\",\n\t\t\tgridTemplateRows: \"44px calc(100% - 44px)\",\n\t\t},\n\t\theadlineContainer: {\n\t\t\twidth: \"100%\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t},\n\t\tmenuContainer: {\n\t\t\twidth: \"100%\",\n\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\tborderRight: \"none\",\n\t\t\tborderLeft: \"none\",\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(10px)\" : \"none\",\n\t\t\toverflow: \"hidden\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t\theadline: {\n\t\t\tfontSize: 25,\n\t\t\twidth: \"70%\",\n\t\t\tborderRadius: 7,\n\t\t\theight: 33,\n\t\t\tuserSelect: \"none\",\n\t\t\tcolor: theme.background.darkText || theme.background.text,\n\t\t\ttextAlign: \"center\",\n\t\t\tbackground: theme.background.light,\n\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t\talignItems: \"center\",\n\t\t\tposition: \"sticky\",\n\t\t},\n\t\tbackButton: {\n\t\t\tposition: \"relative\",\n\t\t\tright: 0,\n\t\t\tborderRight: `1px solid ${theme.windowBorderColor} !important`,\n\t\t\twidth: 150,\n\t\t\theight: \"100%\",\n\t\t\tminHeight: \"0 !important\",\n\t\t\tborderRadius: \"5px !important\",\n\t\t\tpadding: \"0 !important\",\n\t\t\tminWidth: \"110px !important\",\n\t\t\tborderTopRightRadius: \"0 !important\",\n\t\t\tborderBottomRightRadius: \"0 !important\",\n\t\t},\n\t\topenFileContainer: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\toverflow: \"hidden\",\n\t\t},\n\t\topenFileContainerBody: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tboxShadow: `inset 0px 0 8px 2px ${theme.shadowColor}`,\n\t\t\tbackground: theme.background.light,\n\t\t},\n\t\tfilename: {\n\t\t\twidth: \"100%\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\tuserSelect: \"none\",\n\t\t\toverflow: \"hidden\",\n\t\t},\n\t});\n\nabstract class FileViewer<\n\tViewType extends View<FileViewerBase>,\n\tStyles extends WithStyles<typeof makeFileViewerStyles>\n> extends Component<ViewType, {}, Styles> {\n\tabstract renderViewer(): JSX.Element;\n\trender() {\n\t\tconst { classes, isSelectingFile, onReselectFile, name } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t{isSelectingFile ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className={classes.headlineContainer}>\n\t\t\t\t\t\t\t<div className={classes.headline}>\n\t\t\t\t\t\t\t\t<div className={classes.filename}>\n\t\t\t\t\t\t\t\t\tPlease select file to edit\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={classes.openFileContainer}>\n\t\t\t\t\t\t\t<div className={classes.openFileContainerBody}>\n\t\t\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className={classes.menuContainer}>\n\t\t\t\t\t\t\t<div className={classes.headline}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName={classes.backButton}\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tonClick={() => onReselectFile()}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{\"<- back\"}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<div className={classes.filename}>Editing {name}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{this.renderViewer()}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default FileViewer;\n","import React from \"react\";\nimport NotepadInterface from \"@web-desktop-environment/interfaces/lib/views/apps/utils/Notepad\";\nimport {\n\twithStyles,\n\tcreateStyles,\n\tWithStyles,\n\twithTheme,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport FileViewer, { makeFileViewerStyles } from \"../shared/FileViewer\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\t...makeFileViewerStyles(theme),\n\t\ttextAreaContainer: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tposition: \"relative\",\n\t\t\ttop: 1,\n\t\t\talignItems: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t},\n\t\ttextAreaContainerBody: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tbackground: theme.background.light,\n\t\t\tpaddingBottom: 2,\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t},\n\t\ttextArea: {\n\t\t\twidth: \"100%\",\n\t\t\tborder: \"none\",\n\t\t\tboxShadow: `${theme.shadowColor} 0px 7px 20px 1px inset`,\n\t\t\tresize: \"none\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tpadding: 0,\n\t\t\tbackground:\n\t\t\t\ttheme.type === \"transparent\"\n\t\t\t\t\t? theme.background.main\n\t\t\t\t\t: theme.background.light,\n\t\t\tcolor: theme.background.text,\n\t\t\toutline: \"none\",\n\t\t\theight: \"calc(100% + 2px)\",\n\t\t},\n\t\tfilename: {\n\t\t\twidth: \"100%\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\tuserSelect: \"none\",\n\t\t\toverflow: \"hidden\",\n\t\t},\n\t});\n\nclass Notepad extends FileViewer<NotepadInterface, WithStyles<typeof styles>> {\n\tconstructor(props: Notepad[\"props\"]) {\n\t\tsuper(props);\n\t}\n\n\trenderViewer() {\n\t\tconst { classes, onSave, defaultValue } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.textAreaContainer}>\n\t\t\t\t<div className={classes.textAreaContainerBody}>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tdefaultValue={defaultValue}\n\t\t\t\t\t\tonChange={(e) => onSave(e.target.value)}\n\t\t\t\t\t\tclassName={classes.textArea}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withTheme(withStyles(styles, { withTheme: true })(Notepad));\n","import React from \"react\";\nimport MediaPlayerInterface from \"@web-desktop-environment/interfaces/lib/views/apps/media/MediaPlayer\";\nimport {\n\twithStyles,\n\tcreateStyles,\n\tWithStyles,\n\twithTheme,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport FileViewer, { makeFileViewerStyles } from \"../shared/FileViewer\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\t...makeFileViewerStyles(theme),\n\t\tvideoAreaContanier: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"97%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\toverflow: \"hidden\",\n\t\t},\n\t\tvideoAreaContanierBody: {\n\t\t\twidth: \"94%\",\n\t\t\theight: \"95%\",\n\t\t\tborderRadius: 10,\n\t\t\tboxShadow: `inset 0px -1px 9px 2px ${theme.shadowColor}`,\n\t\t\tpadding: 15,\n\t\t\tbackground: theme.background.light,\n\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\toverflow: \"hidden\",\n\t\t},\n\t\tvideoArea: {\n\t\t\twidth: \"95%\",\n\t\t\tmaxWidth: \"100%\",\n\t\t\tmaxHeight: \"95%\",\n\t\t\tborder: \"none\",\n\t\t\tresize: \"none\",\n\t\t\tbackground: theme.background.light,\n\t\t\tcolor:\n\t\t\t\ttheme.type === \"transparent\"\n\t\t\t\t\t? theme.windowBorderColor\n\t\t\t\t\t: theme.background.text,\n\t\t\tborderRadius: 10,\n\t\t\toutline: \"none\",\n\t\t},\n\t});\n\nclass MediaPlayer extends FileViewer<\n\tMediaPlayerInterface,\n\tWithStyles<typeof styles>\n> {\n\trenderViewer() {\n\t\tconst { classes, source, port } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.videoAreaContanier}>\n\t\t\t\t<div className={classes.videoAreaContanierBody}>\n\t\t\t\t\t<video controls className={classes.videoArea}>\n\t\t\t\t\t\t<source\n\t\t\t\t\t\t\tsrc={`${\n\t\t\t\t\t\t\t\treactFullstackConnectionManager.https ? \"https\" : \"http\"\n\t\t\t\t\t\t\t}://${reactFullstackConnectionManager.host}:${port}/${source}`}\n\t\t\t\t\t\t></source>\n\t\t\t\t\t</video>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withTheme(withStyles(styles, { withTheme: true })(MediaPlayer));\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport SettingsInterface from \"@web-desktop-environment/interfaces/lib/views/apps/system/Settings\";\nimport {\n\tSettings as SettingsConfiguration,\n\tColor as ColorType,\n} from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { withStyles, createStyles, WithStyles } from \"@material-ui/styles\";\nimport { Themes, Colors } from \"@root/theme\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport StateComponent from \"@components/stateComponent\";\nimport Button from \"@components/button\";\nimport axios from \"axios\";\nimport Color from \"@ctrl/tinycolor\";\nimport { SketchPicker } from \"react-color\";\nimport { invertColor } from \"@utils/colors\";\n\nconst makeColor = (baseColor: RGBArray | string): ColorType => {\n\tconst color =\n\t\ttypeof baseColor === \"string\"\n\t\t\t? Color(baseColor)\n\t\t\t: Color({ r: baseColor[0], g: baseColor[1], b: baseColor[2] });\n\treturn {\n\t\tmain: color.toHex8String(),\n\t\tdark: color.darken(0.25).toHex8String(),\n\t\tlight: color.lighten(0.25).toHex8String(),\n\t\ttext: Color(invertColor(color.toHexString())).darken(0.3).toHexString(),\n\t\tdarkText: Color(invertColor(color.toHexString())).darken(0.5).toHexString(),\n\t\ttransparentLight: color.isDark() ? \"#fff\" : \"#444\",\n\t\ttransparent: color.setAlpha(color.getAlpha() * 0.6).toHex8String(),\n\t\ttransparentDark: color.setAlpha(color.getAlpha() * 0.9).toHex8String(),\n\t};\n};\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: theme.background.main,\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(3px)\" : \"none\",\n\t\t},\n\t\tcategorySelection: {\n\t\t\tbackground: theme.background.dark,\n\t\t\tborderRight: `solid 1px ${theme.windowBorderColor}`,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(16px)\" : \"none\",\n\t\t\tborderRadius: \"0 0 0 10px\",\n\t\t\theight: \"100%\",\n\t\t\twidth: 250,\n\t\t},\n\t\tselectCategoryButton: {\n\t\t\tfontSize: 24,\n\t\t\tpaddingTop: 5,\n\t\t\tpaddingBottom: 5,\n\t\t\tuserSelect: \"none\",\n\t\t\tcursor: \"pointer\",\n\t\t\twidth: \"100%\",\n\t\t\ttextAlign: \"center\",\n\t\t\tborderBottom: `solid 1px ${theme.windowBorderColor}`,\n\t\t\tcolor: theme.background.text,\n\t\t\t\"&:hover\":\n\t\t\t\ttheme.type === \"transparent\"\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tbackdropFilter: \"blur(3px)\",\n\t\t\t\t\t  }\n\t\t\t\t\t: {\n\t\t\t\t\t\t\tbackground: theme.background.main,\n\t\t\t\t\t  },\n\t\t},\n\t\tselectCategoryButtonSelected: {\n\t\t\tcolor: theme.secondary.text,\n\t\t\tbackground: `${theme.secondary.main} !important`,\n\t\t},\n\t\tcategory: {\n\t\t\twidth: \"100%\",\n\t\t\tmaxHeight: \"100%\",\n\t\t\toverflowY: \"auto\",\n\t\t\tbackground: theme.background.main,\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\talignItems: \"center\",\n\t\t\tborderRadius: \"0 0 15px 0\",\n\t\t},\n\t\tcategoryTitle: {\n\t\t\tmarginTop: 7,\n\t\t\twidth: \"90%\",\n\t\t\tuserSelect: \"none\",\n\t\t\tborderBottom: `solid 2px ${theme.background.transparent}`,\n\t\t\tcolor: theme.background.text,\n\t\t\tfontSize: 40,\n\t\t},\n\t\tcategorySubtitle: {\n\t\t\twidth: \"85%\",\n\t\t\tmargin: 9,\n\t\t\tuserSelect: \"none\",\n\t\t\tborderBottom: `solid 1px ${theme.background.transparent}`,\n\t\t\tcolor: theme.background.text,\n\t\t\tfontSize: 25,\n\t\t},\n\t\tmarginBlock: {\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tflexDirection: \"column\",\n\t\t\talignItems: \"center\",\n\t\t\twidth: \"100%\",\n\t\t\tmarginTop: 30,\n\t\t\tmarginBottom: 10,\n\t\t},\n\t\tmargin: {\n\t\t\tmargin: 14,\n\t\t},\n\t\tsettingsBlock: {\n\t\t\twidth: \"80%\",\n\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\tbackground: theme.background.dark,\n\t\t\tpadding: 20,\n\t\t\tborderRadius: 9,\n\t\t},\n\t\tsettingsProperty: {\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t\talignItems: \"center\",\n\t\t\tfontSize: 25,\n\t\t\tcolor: theme.background.darkText || theme.background.text,\n\t\t\tminHeight: 45,\n\t\t\tmarginBottom: 5,\n\t\t\tborderBottom: `solid 1px ${theme.primary.transparent}`,\n\t\t},\n\t\tsettingsPropertyCol: {\n\t\t\tflexDirection: \"column\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"space-between\",\n\t\t},\n\t\tsettingsPropertyName: {},\n\t\tsettingsPropertyNameCol: {\n\t\t\tfontSize: \"1.8vw\",\n\t\t},\n\t\tsettingsPropertyValueCol: {\n\t\t\twidth: \"100% !important\",\n\t\t\tmargin: 5,\n\t\t\theight: \"auto\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t\ttext: {\n\t\t\tfontSize: 17,\n\t\t\tcolor: theme.background.text,\n\t\t\tmargin: 5,\n\t\t},\n\t\tsettingsPropertyValue: {\n\t\t\twordBreak: \"break-all\",\n\t\t\twidth: \"50%\",\n\t\t\theight: \"100%\",\n\t\t\tbackground: \"transparent\",\n\t\t\ttextAlign: \"center\",\n\t\t\t\"& input\": {\n\t\t\t\ttextAlign: \"center\",\n\t\t\t\tcolor: theme.background.darkText || theme.background.text,\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tborder: \"none\",\n\t\t\t\tborderBottom: `solid 1px ${theme.primary.transparent}`,\n\t\t\t\toutline: \"none\",\n\t\t\t\tfontSize: 23,\n\t\t\t\tbackground: \"transparent\",\n\t\t\t},\n\t\t\t\"& select\": {\n\t\t\t\ttextAlign: \"center\",\n\t\t\t\tcolor: theme.background.darkText || theme.background.text,\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tborder: \"none\",\n\t\t\t\tborderBottom: `solid 1px ${theme.primary.transparent}`,\n\t\t\t\toutline: \"none\",\n\t\t\t\tfontSize: 23,\n\t\t\t\tbackground: \"transparent\",\n\t\t\t\t\"& option\": {\n\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t\tbackground: theme.background.dark,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tsettingsPropertyValueError: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: theme.error.main,\n\t\t},\n\t\tcolorsTable: {\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t},\n\t\tcolor: {\n\t\t\twidth: 30,\n\t\t\theight: 30,\n\t\t\tmargin: 5,\n\t\t\tborderRadius: \"50%\",\n\t\t\tborder: `solid 1px ${theme.windowBorderColor}`,\n\t\t\t\"&:hover\": {\n\t\t\t\ttransform: \"scale(1.2)\",\n\t\t\t},\n\t\t},\n\t\tthemeGrid: {\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"grid\",\n\t\t\tpadding: 20,\n\t\t\tboxShadow: `inset 0 0 20px 0px ${theme.shadowColor}`,\n\t\t\tjustifyContent: \"center\",\n\t\t\tgridTemplateColumns: \"repeat(auto-fit, minmax(80px, 180px))\",\n\t\t\tgridGap: 15,\n\t\t\tgap: \"15px\",\n\t\t},\n\t\tthemeButton: {\n\t\t\theight: 130,\n\t\t},\n\t});\n\ntype SettingsCategory = \"desktop\" | \"network\" | \"systemInfo\";\n\ninterface SettingsState {\n\tselectedCategory: SettingsCategory;\n\tsettings: SettingsConfiguration;\n}\n\ntype ColormindResponse = {\n\tresult: [RGBArray, RGBArray, RGBArray, RGBArray, RGBArray];\n};\ntype RGBArray = [number, number, number];\n\nclass Settings extends Component<\n\tSettingsInterface,\n\tSettingsState,\n\tWithStyles<typeof styles>\n> {\n\tconstructor(props: Settings[\"props\"]) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselectedCategory: \"desktop\",\n\t\t\tsettings: props.settings,\n\t\t};\n\t}\n\n\tgenerateCustomTheme = () => {\n\t\taxios\n\t\t\t.post<ColormindResponse>(\n\t\t\t\t\"http://colormind.io/api/\",\n\t\t\t\tJSON.stringify({ model: \"default\" })\n\t\t\t)\n\t\t\t.then((response) => {\n\t\t\t\tconst colors = response.data.result;\n\t\t\t\tthis.setState((state) => {\n\t\t\t\t\tstate.settings.desktop.customTheme = {\n\t\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\t\tname: \"custom\",\n\t\t\t\t\t\tshadowColor: \"#000\",\n\t\t\t\t\t\tbackground: makeColor(colors[0]),\n\t\t\t\t\t\tprimary: makeColor(colors[1]),\n\t\t\t\t\t\tsecondary: makeColor(colors[2]),\n\t\t\t\t\t\twindowBorderColor: makeColor(colors[0]).text,\n\t\t\t\t\t\tsuccess: makeColor(colors[3]),\n\t\t\t\t\t\twindowBarColor: Color({\n\t\t\t\t\t\t\tr: colors[4][0],\n\t\t\t\t\t\t\tg: colors[4][1],\n\t\t\t\t\t\t\tb: colors[4][2],\n\t\t\t\t\t\t}).toHex8String(),\n\t\t\t\t\t\terror: Themes.transparent.error,\n\t\t\t\t\t\twarning: Themes.transparent.warning,\n\t\t\t\t\t\twindowBorder: true,\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.setSettings(state.settings);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\trenderDesktopCategory = () => {\n\t\tconst { classes, setSettings } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.category}>\n\t\t\t\t<div className={classes.categoryTitle}>Desktop Settings</div>\n\t\t\t\t<div className={classes.marginBlock}>\n\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>background</div>\n\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.settings.desktop.background}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst value = e.target.value;\n\t\t\t\t\t\t\t\t\t\tthis.setState((state) => {\n\t\t\t\t\t\t\t\t\t\t\tstate.settings.desktop.background = value;\n\t\t\t\t\t\t\t\t\t\t\tsetSettings(state.settings);\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`${classes.settingsProperty} ${classes.settingsPropertyCol}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={classes.settingsPropertyNameCol}>theme</div>\n\t\t\t\t\t\t\t<div className={classes.settingsPropertyValueCol}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classes.themeGrid}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackground: this.state.settings.desktop.background,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{(Object.keys(Themes) as (keyof typeof Themes)[]).map(\n\t\t\t\t\t\t\t\t\t\t(key) => (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.themeButton}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: Themes[key].background.main,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: Themes[key].background.text,\n\t\t\t\t\t\t\t\t\t\t\t\t\tboxShadow: `0 0 20px 0px ${Themes[key].shadowColor}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackdropFilter:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tThemes[key].type === \"transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"blur(5px)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\",\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState((state) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.settings.desktop.theme = key;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettings(state.settings);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{Themes[key].name}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{this.state.settings.desktop.theme === \"custom\" && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${classes.settingsProperty} ${classes.settingsPropertyCol}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyNameCol}>\n\t\t\t\t\t\t\t\t\t\tCustom Theme\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={`${classes.settingsPropertyValue} ${classes.settingsPropertyValueCol}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Button border onClick={this.generateCustomTheme}>\n\t\t\t\t\t\t\t\t\t\t\tGenarate custom theme\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${classes.settingsPropertyValue} ${classes.settingsPropertyValueCol}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{this.renderCreateCustomTheme()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\trenderCreateCustomTheme = () => {\n\t\tconst { classes } = this.props;\n\t\tconst { background, primary, secondary, error, success, warning } =\n\t\t\tthis.props.settings.desktop.customTheme || Themes.transparent;\n\t\treturn (\n\t\t\t<StateComponent<{\n\t\t\t\tselectedColor: Colors;\n\t\t\t\tcolors: { name: Colors; value: string }[];\n\t\t\t}>\n\t\t\t\tdefaultState={{\n\t\t\t\t\tselectedColor: \"background\",\n\t\t\t\t\tcolors: [\n\t\t\t\t\t\t{ name: \"background\", value: background.main },\n\t\t\t\t\t\t{ name: \"primary\", value: primary.main },\n\t\t\t\t\t\t{ name: \"secondary\", value: secondary.main },\n\t\t\t\t\t\t{ name: \"error\", value: error.main },\n\t\t\t\t\t\t{ name: \"success\", value: success.main },\n\t\t\t\t\t\t{ name: \"warning\", value: warning.main },\n\t\t\t\t\t],\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{(state, setState) => {\n\t\t\t\t\tconst saveToTheme = () => {\n\t\t\t\t\t\tconst getColor = (color: Colors) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tstate.colors.find((currentColor) => currentColor.name === color)\n\t\t\t\t\t\t\t\t\t?.value || Themes.transparent[color].main\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.setState((fullState) => {\n\t\t\t\t\t\t\tfullState.settings.desktop.customTheme = {\n\t\t\t\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\t\t\t\tname: \"custom\",\n\t\t\t\t\t\t\t\tshadowColor: \"#000\",\n\t\t\t\t\t\t\t\tbackground: makeColor(getColor(\"background\")),\n\t\t\t\t\t\t\t\tprimary: makeColor(getColor(\"primary\")),\n\t\t\t\t\t\t\t\tsecondary: makeColor(getColor(\"secondary\")),\n\t\t\t\t\t\t\t\tsuccess: makeColor(getColor(\"success\")),\n\t\t\t\t\t\t\t\terror: makeColor(getColor(\"error\")),\n\t\t\t\t\t\t\t\twarning: makeColor(getColor(\"warning\")),\n\t\t\t\t\t\t\t\twindowBarColor: getColor(\"background\"),\n\t\t\t\t\t\t\t\twindowBorderColor: Color(getColor(\"background\")).isDark()\n\t\t\t\t\t\t\t\t\t? \"#fff\"\n\t\t\t\t\t\t\t\t\t: \"#000\",\n\t\t\t\t\t\t\t\twindowBorder: true,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.props.setSettings(fullState.settings);\n\t\t\t\t\t\t\treturn {}; // no need to rerender\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className={classes.categorySubtitle}>\n\t\t\t\t\t\t\t\tCreate custom theme\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={classes.colorsTable}>\n\t\t\t\t\t\t\t\t{state.colors.map((color, index) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.color}\n\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: color.value }}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setState({ selectedColor: color.name })}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={classes.text}>\n\t\t\t\t\t\t\t\tslected color: {state.selectedColor}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<SketchPicker\n\t\t\t\t\t\t\t\tonChange={(color) => {\n\t\t\t\t\t\t\t\t\tconst originalColor = state.colors.find(\n\t\t\t\t\t\t\t\t\t\t(color) => color.name === state.selectedColor\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (originalColor) {\n\t\t\t\t\t\t\t\t\t\toriginalColor.value =\n\t\t\t\t\t\t\t\t\t\t\tcolor.hex +\n\t\t\t\t\t\t\t\t\t\t\tMath.round((color.rgb.a || 0) * 255).toString(16);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetState({ colors: state.colors });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\t\t\tstate.colors.find(\n\t\t\t\t\t\t\t\t\t\t(color) => color.name === state.selectedColor\n\t\t\t\t\t\t\t\t\t)?.value\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></SketchPicker>\n\t\t\t\t\t\t\t<Button border className={classes.margin} onClick={saveToTheme}>\n\t\t\t\t\t\t\t\tSave custom theme\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</StateComponent>\n\t\t);\n\t};\n\n\trenderNetworkCategory = () => {\n\t\tconst { classes, setSettings } = this.props;\n\t\treturn (\n\t\t\t<StateComponent\n\t\t\t\tdefaultState={{\n\t\t\t\t\terrorMainPort: \"\",\n\t\t\t\t\terrorStartPort: \"\",\n\t\t\t\t\terrorEndPort: \"\",\n\t\t\t\t\tmainPort: this.state.settings.network.ports.mainPort,\n\t\t\t\t\tstartPort: this.state.settings.network.ports.startPort,\n\t\t\t\t\tendPort: this.state.settings.network.ports.endPort,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{(state, setState) => (\n\t\t\t\t\t<div className={classes.category}>\n\t\t\t\t\t\t<div className={classes.categoryTitle}>Network Settings</div>\n\t\t\t\t\t\t<div className={classes.marginBlock}>\n\t\t\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>Main Port</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={state.mainPort || \"\"}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = Number(e.target.value) || 0;\n\t\t\t\t\t\t\t\t\t\t\t\tsetState({ mainPort: value });\n\t\t\t\t\t\t\t\t\t\t\t\tif (value >= 1025 && value <= 65534) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({ errorMainPort: \"\" });\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState((state) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.settings.network.ports.mainPort = value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettings(state.settings);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terrorMainPort:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"please enter a number between 1025 to 65,534\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValueError}>\n\t\t\t\t\t\t\t\t\t\t\t{state.errorMainPort}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>Start Port</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={state.startPort || \"\"}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = Number(e.target.value) || 0;\n\t\t\t\t\t\t\t\t\t\t\t\tsetState({ startPort: value });\n\t\t\t\t\t\t\t\t\t\t\t\tif (value >= 1025 && value <= 65534) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({ errorStartPort: \"\" });\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState((state) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.settings.network.ports.startPort = value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettings(state.settings);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terrorStartPort:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"please enter a number between 1025 to 65,534\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValueError}>\n\t\t\t\t\t\t\t\t\t\t\t{state.errorMainPort}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>End Port</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={state.endPort || \"\"}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = Number(e.target.value) || 0;\n\t\t\t\t\t\t\t\t\t\t\t\tsetState({ endPort: value });\n\t\t\t\t\t\t\t\t\t\t\t\tif (value >= 1025 && value <= 65534) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({ errorEndPort: \"\" });\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState((state) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.settings.network.ports.endPort = value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettings(state.settings);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terrorEndPort:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"please enter a number between 1025 to 65,534\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValueError}>\n\t\t\t\t\t\t\t\t\t\t\t{state.errorMainPort}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</StateComponent>\n\t\t);\n\t};\n\n\trenderSystemInfoCategory = () => {\n\t\tconst { classes, systemInfo } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.category}>\n\t\t\t\t<div className={classes.categoryTitle}>System Information</div>\n\t\t\t\t{systemInfo?.os && (\n\t\t\t\t\t<div className={classes.marginBlock}>\n\t\t\t\t\t\t<div className={classes.categorySubtitle}>OS</div>\n\t\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t\t{systemInfo.os.hostname && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tcomputer hostname\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.os.hostname}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.os.platform && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>running os</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.os.platform}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.os.kernel && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\trunning kernel\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.os.kernel}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{systemInfo?.cpu && (\n\t\t\t\t\t<div className={classes.marginBlock}>\n\t\t\t\t\t\t<div className={classes.categorySubtitle}>CPU</div>\n\t\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t\t{systemInfo.cpu?.brandName && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>name</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.brandName}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.manufacturer && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tmanufacturer name\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.manufacturer}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.cores && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tnumber of cores\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.cores}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.physicalCores && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tnumber of physical cores\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.physicalCores}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.speed && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tprcessor speed\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.speed} GHz\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.speedMax && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tprcessor maximum speed\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.speedMax} GHz\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.speedMin && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tprcessor minimum speed\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.speedMin} GHz\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{systemInfo?.ram && (\n\t\t\t\t\t<div className={classes.marginBlock}>\n\t\t\t\t\t\t<div className={classes.categorySubtitle}>Memory</div>\n\t\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t\t{systemInfo.ram.total && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\ttotal memory amout\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.ram.total}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.ram.free && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tfree memory amout\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.ram.free}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{systemInfo?.disks &&\n\t\t\t\t\tsystemInfo.disks.map(\n\t\t\t\t\t\t(disk, index) =>\n\t\t\t\t\t\t\tdisk && (\n\t\t\t\t\t\t\t\t<div className={classes.marginBlock} key={index}>\n\t\t\t\t\t\t\t\t\t<div className={classes.categorySubtitle}>\n\t\t\t\t\t\t\t\t\t\tDisk {index + 1}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\t\t\tdisk name\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t\t\t{disk.name}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\t\t\tdisk vendor\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t\t\t{disk.vendor}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\t\t\tdisk size\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t\t\t{disk.total}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t};\n\n\trender() {\n\t\tconst { classes } = this.props;\n\t\tconst { selectedCategory } = this.state;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<div className={classes.categorySelection}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`${classes.selectCategoryButton} ${\n\t\t\t\t\t\t\tselectedCategory === \"desktop\"\n\t\t\t\t\t\t\t\t? classes.selectCategoryButtonSelected\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => this.setState({ selectedCategory: \"desktop\" })}\n\t\t\t\t\t>\n\t\t\t\t\t\tDesktop\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`${classes.selectCategoryButton} ${\n\t\t\t\t\t\t\tselectedCategory === \"network\"\n\t\t\t\t\t\t\t\t? classes.selectCategoryButtonSelected\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => this.setState({ selectedCategory: \"network\" })}\n\t\t\t\t\t>\n\t\t\t\t\t\tNetwork\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`${classes.selectCategoryButton} ${\n\t\t\t\t\t\t\tselectedCategory === \"systemInfo\"\n\t\t\t\t\t\t\t\t? classes.selectCategoryButtonSelected\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => this.setState({ selectedCategory: \"systemInfo\" })}\n\t\t\t\t\t>\n\t\t\t\t\t\tInformation\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{selectedCategory === \"desktop\" && this.renderDesktopCategory()}\n\t\t\t\t{selectedCategory === \"network\" && this.renderNetworkCategory()}\n\t\t\t\t{selectedCategory === \"systemInfo\" && this.renderSystemInfoCategory()}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport IframeInterface from \"@web-desktop-environment/interfaces/lib/views/apps/thirdParty/Iframe\";\nimport {\n\twithStyles,\n\tcreateStyles,\n\tWithStyles,\n\twithTheme,\n\tWithTheme,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\tborderTop: \"none\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tbackground: theme.background.main,\n\t\t\tbackdropFilter: \"blur(15px)\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t},\n\t});\n\nclass Iframe extends Component<\n\tIframeInterface,\n\t{},\n\tWithStyles<typeof styles> & WithTheme<Theme>\n> {\n\tprivate iframeRef = React.createRef<HTMLIFrameElement>();\n\n\tprivate intervalsToClear: NodeJS.Timeout[] = [];\n\n\tcomponentDidMount = () => {\n\t\tthis.intervalsToClear.push(\n\t\t\tsetInterval(() => {\n\t\t\t\tconst activeElement = document.activeElement;\n\t\t\t\tif (\n\t\t\t\t\tthis.iframeRef.current &&\n\t\t\t\t\tactiveElement &&\n\t\t\t\t\tactiveElement !== document.body &&\n\t\t\t\t\tthis.iframeRef.current === activeElement\n\t\t\t\t) {\n\t\t\t\t\tthis.iframeRef.current.click();\n\t\t\t\t}\n\t\t\t}, 50)\n\t\t);\n\t};\n\n\tcomponentWillUnmount = () => {\n\t\tthis.intervalsToClear.forEach(clearInterval);\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\tclasses,\n\t\t\thost,\n\t\t\tport,\n\t\t\tpath,\n\t\t\thttps = reactFullstackConnectionManager.https,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<iframe\n\t\t\t\tref={this.iframeRef}\n\t\t\t\tallowFullScreen\n\t\t\t\tallowTransparency\n\t\t\t\tsandbox=\"allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-presentation allow-scripts allow-same-origin\"\n\t\t\t\tallow=\"clipboard-read; clipboard-write; geolocation; allow-forms; allow-pointer-lock; fullscreen; camera; microphone; layout-animations; unoptimized-images; oversized-images; sync-script; sync-xhr; unsized-media;\"\n\t\t\t\tclassName={classes.root}\n\t\t\t\tsrc={`${https ? \"https\" : \"http\"}://${\n\t\t\t\t\thost || reactFullstackConnectionManager.host\n\t\t\t\t}${port ? \":\" + port : \"\"}${path || \"\"}`}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default withTheme(withStyles(styles, { withTheme: true })(Iframe));\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport LoadingScreenInterface from \"@web-desktop-environment/interfaces/lib/views/apps/shared/LoadingScreen\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { WithStyles, withStyles, createStyles } from \"@material-ui/styles\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: theme.background.main,\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\tgap: 20,\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(3px)\" : \"none\",\n\t\t},\n\t\tanimationWave: {\n\t\t\twidth: \"15%\",\n\t\t\tpadding: \"15%\",\n\t\t\tboxSizing: \"border-box\",\n\t\t\tbackgroundColor: theme.secondary.main,\n\t\t\tborderRadius: \"20% 20% 10% 10%\",\n\t\t\tposition: \"relative\",\n\t\t\tboxShadow: `inset 0 0 30px 0 ${theme.shadowColor}, 0 4px 10px 0 ${theme.shadowColor}`,\n\t\t\toverflow: \"hidden\",\n\t\t\t\"&:before\": {\n\t\t\t\tcontent: \"''\",\n\t\t\t\tposition: \"absolute\",\n\t\t\t\twidth: \"120%\",\n\t\t\t\theight: \"110%\",\n\t\t\t\ttop: \"-75%\",\n\t\t\t\tright: \"-10%\",\n\t\t\t\tborderRadius: \"50%\",\n\t\t\t\tbackground: theme.background.main,\n\t\t\t\tanimation: \"$wave 5s linear infinite\",\n\t\t\t},\n\t\t\t\"&:after\": {\n\t\t\t\tcontent: \"''\",\n\t\t\t\tposition: \"absolute\",\n\t\t\t\twidth: \"120%\",\n\t\t\t\tright: \"-10%\",\n\t\t\t\theight: \"107%\",\n\t\t\t\ttop: \"-75%\",\n\t\t\t\tborderRadius: \"50%\",\n\t\t\t\tbackground: theme.background.light,\n\t\t\t\tanimation: \"$wave 5s linear infinite\",\n\t\t\t},\n\t\t},\n\t\t\"@keyframes wave\": {\n\t\t\tfrom: {\n\t\t\t\ttransform: \"rotate(0)\",\n\t\t\t},\n\t\t\tto: {\n\t\t\t\ttransform: \"rotate(360deg)\",\n\t\t\t},\n\t\t},\n\t\tjumpingCube: {\n\t\t\twidth: 50,\n\t\t\theight: 50,\n\t\t\tposition: \"relative\",\n\t\t\ttop: -10,\n\t\t\t\"&:before\": {\n\t\t\t\tcontent: \"''\",\n\t\t\t\twidth: 50,\n\t\t\t\theight: 5,\n\t\t\t\tbackground: theme.primary.dark,\n\t\t\t\topacity: 0.1,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\ttop: 59,\n\t\t\t\tleft: 0,\n\t\t\t\tborderRadius: \"50%\",\n\t\t\t\tanimation: \"$shadowStretch .5s linear infinite\",\n\t\t\t},\n\t\t\t\"&:after\": {\n\t\t\t\tcontent: \"''\",\n\t\t\t\twidth: 50,\n\t\t\t\theight: 50,\n\t\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\t\tbackground: theme.primary.main,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\tborderRadius: 9,\n\t\t\t\tanimation: \"$boxJump .5s linear infinite\",\n\t\t\t},\n\t\t},\n\t\t\"@keyframes boxJump\": {\n\t\t\t\"17%\": {\n\t\t\t\tborderBottomRightRadius: 3,\n\t\t\t},\n\t\t\t\"25%\": {\n\t\t\t\ttransform: \"translateY(9px) rotate(22.5deg)\",\n\t\t\t},\n\t\t\t\"50%\": {\n\t\t\t\ttransform: \"translateY(18px) scale(1, .9) rotate(45deg)\",\n\t\t\t\tborderBottomRightRadius: 40,\n\t\t\t},\n\t\t\t\"75%\": {\n\t\t\t\ttransform: \"translateY(9px) rotate(67.5deg)\",\n\t\t\t},\n\t\t\t\"100%\": {\n\t\t\t\ttransform: \" translateY(0) rotate(90deg)\",\n\t\t\t},\n\t\t},\n\t\t\"@keyframes shadow\": {\n\t\t\t\"0%, 100%\": {\n\t\t\t\ttransform: \"scale(1, 1)\",\n\t\t\t},\n\t\t\t\"50%\": {\n\t\t\t\ttransform: \"scale(1.2, 1)\",\n\t\t\t},\n\t\t},\n\t\tmessage: {\n\t\t\tfontSize: 30,\n\t\t\tcolor: theme.background.text,\n\t\t},\n\t});\n\nclass LoadingScreen extends Component<\n\tLoadingScreenInterface,\n\t{},\n\tWithStyles<typeof styles>\n> {\n\trender() {\n\t\tconst { classes, message, variant } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tvariant === \"water\" ? classes.animationWave : classes.jumpingCube\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<div className={classes.message}>{message}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(LoadingScreen);\n","import React, { useState } from \"react\";\nimport { WindowBar } from \"@views/Desktop\";\nimport { Explorer, Notepad, Settings, Window } from \"@views/index\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { Window as WindowState } from \"@web-desktop-environment/interfaces/lib/shared/window\";\nimport { WindowState as WindowStateUpdate } from \"@web-desktop-environment/interfaces/lib/views/Window\";\nimport { Themes } from \"@root/theme\";\nimport { ThemeProvider } from \"@material-ui/styles\";\n\nconst emptyFunction = async () => {\n\t/* empty body */\n};\nconst defaultWindowProps = {\n\tbackground: \"\",\n\tsetWindowState: emptyFunction,\n\tonClose: emptyFunction,\n\tonLaunchApp: emptyFunction,\n\twindow: {},\n};\n\nconst useWindow = (initialState: WindowState) => {\n\tconst [state, setState] = useState(initialState);\n\treturn {\n\t\tstate,\n\t\tsetWindowState: async (newWindowState: WindowStateUpdate) => {\n\t\t\tsetState({\n\t\t\t\t...state,\n\t\t\t\t...newWindowState.size,\n\t\t\t\tposition: newWindowState.position || state.position,\n\t\t\t});\n\t\t},\n\t};\n};\n\nconst App = () => {\n\tconst [background, setBackground] = useState(\n\t\t'url(\"https://picsum.photos/id/1039/1920/1080\")'\n\t);\n\tconst [theme, setTheme] = useState<Theme>(Themes.dark);\n\n\tconst explorerWindow = useWindow({\n\t\tposition: { x: 50, y: 100 },\n\t\tminWidth: 600,\n\t\tminHeight: 550,\n\t\theight: 500,\n\t\twidth: 800,\n\t});\n\tconst notepadWindow = useWindow({\n\t\tposition: { x: 950, y: 50 },\n\t\tminWidth: 600,\n\t\tminHeight: 550,\n\t\theight: 750,\n\t\twidth: 700,\n\t});\n\tconst settingsWindow = useWindow({\n\t\tposition: { x: 700, y: 300 },\n\t\tminWidth: 600,\n\t\tminHeight: 550,\n\t\theight: 600,\n\t\twidth: 900,\n\t});\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tbackground,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"100%\",\n\t\t\t}}\n\t\t>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<Window\n\t\t\t\t\ttitle={\"explorer\"}\n\t\t\t\t\tname={\"explorer\"}\n\t\t\t\t\ticon={{\n\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\ticon: \"FcFolder\",\n\t\t\t\t\t}}\n\t\t\t\t\t{...defaultWindowProps}\n\t\t\t\t\twindow={explorerWindow.state}\n\t\t\t\t\tsetWindowState={explorerWindow.setWindowState}\n\t\t\t\t>\n\t\t\t\t\t<Explorer\n\t\t\t\t\t\tcurrentPath={\"/home/web-desktop-environment\"}\n\t\t\t\t\t\tfiles={[\n\t\t\t\t\t\t\t{ isFolder: true, name: \"Documents\" },\n\t\t\t\t\t\t\t{ isFolder: true, name: \"Desktop\" },\n\t\t\t\t\t\t\t{ isFolder: true, name: \"Music\" },\n\t\t\t\t\t\t\t{ isFolder: false, name: \"passwords.txt\" },\n\t\t\t\t\t\t\t{ isFolder: false, name: \"secrets.txt\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tonChangeCurrentPath={emptyFunction}\n\t\t\t\t\t\tonCopy={emptyFunction}\n\t\t\t\t\t\tonCreateFile={emptyFunction}\n\t\t\t\t\t\tonCreateFolder={emptyFunction}\n\t\t\t\t\t\tonDelete={emptyFunction}\n\t\t\t\t\t\tonMove={emptyFunction}\n\t\t\t\t\t\tonRequestDownloadLink={() => new Promise(emptyFunction)}\n\t\t\t\t\t\tonUpload={emptyFunction}\n\t\t\t\t\t\tplatformPathSeparator={\"/\"}\n\t\t\t\t\t\ttype={\"explore\"}\n\t\t\t\t\t/>\n\t\t\t\t</Window>\n\t\t\t\t<Window\n\t\t\t\t\ttitle={\"notepad\"}\n\t\t\t\t\tname={\"notepad\"}\n\t\t\t\t\ticon={{\n\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\ticon: \"FcFile\",\n\t\t\t\t\t}}\n\t\t\t\t\t{...defaultWindowProps}\n\t\t\t\t\twindow={notepadWindow.state}\n\t\t\t\t\tsetWindowState={notepadWindow.setWindowState}\n\t\t\t\t>\n\t\t\t\t\t<Notepad\n\t\t\t\t\t\tdefaultValue={\n\t\t\t\t\t\t\t\"list of all my passwords:\\n1. 12345Password\\n2. passworD12345\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisSelectingFile={false}\n\t\t\t\t\t\tname=\"passwords.txt\"\n\t\t\t\t\t\tonReselectFile={emptyFunction}\n\t\t\t\t\t\tonSave={emptyFunction}\n\t\t\t\t\t\tpath={\"/home/web-desktop-environment/passwords.txt\"}\n\t\t\t\t\t/>\n\t\t\t\t</Window>\n\t\t\t\t<Window\n\t\t\t\t\ttitle={\"settings\"}\n\t\t\t\t\tname={\"settings\"}\n\t\t\t\t\ticon={{\n\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\ticon: \"FcSettings\",\n\t\t\t\t\t}}\n\t\t\t\t\t{...defaultWindowProps}\n\t\t\t\t\twindow={settingsWindow.state}\n\t\t\t\t\tsetWindowState={settingsWindow.setWindowState}\n\t\t\t\t>\n\t\t\t\t\t<Settings\n\t\t\t\t\t\tonReload={emptyFunction}\n\t\t\t\t\t\tsetSettings={async (newSettings) => {\n\t\t\t\t\t\t\tsetBackground(newSettings.desktop.background);\n\t\t\t\t\t\t\tif (newSettings.desktop.theme !== theme.name) {\n\t\t\t\t\t\t\t\tif (newSettings.desktop.theme === \"custom\") {\n\t\t\t\t\t\t\t\t\tsetTheme(newSettings.desktop.customTheme || Themes.dark);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetTheme(Themes[newSettings.desktop.theme]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsettings={{\n\t\t\t\t\t\t\tdesktop: {\n\t\t\t\t\t\t\t\ttheme: theme.type,\n\t\t\t\t\t\t\t\tbackground,\n\t\t\t\t\t\t\t\tnativeBackground: \"\",\n\t\t\t\t\t\t\t\tcustomTheme: theme,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tnetwork: {\n\t\t\t\t\t\t\t\tports: {\n\t\t\t\t\t\t\t\t\tendPort: 9300,\n\t\t\t\t\t\t\t\t\tmainPort: 5000,\n\t\t\t\t\t\t\t\t\tstartPort: 9200,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Window>\n\t\t\t\t<WindowBar\n\t\t\t\t\tisStartMenuOpen={false}\n\t\t\t\t\ttoggleStartMenu={() => {\n\t\t\t\t\t\t/* intently empty */\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</ThemeProvider>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React from \"react\";\nimport DesktopInterface from \"@web-desktop-environment/interfaces/lib/views/Desktop\";\nimport { Client } from \"@react-fullstack/fullstack-socket-client\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport { withStyles, createStyles, WithStyles } from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport TextField from \"@components/textField\";\nimport Icon from \"@components/icon\";\nimport windowManager, { Window } from \"@state/WindowManager\";\nimport { Icon as IconType } from \"@web-desktop-environment/interfaces/lib/shared/icon\";\nimport { ConnectionContext } from \"@root/contexts\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\nimport { Link } from \"react-router-dom\";\nimport { windowsBarHeight } from \"@views/Desktop\";\nimport { transparent } from \"@utils/colors\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tright: 0,\n\t\t\tleft: 0,\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t\tappContainer: {\n\t\t\tbackground: theme.background.main,\n\t\t\toverflowY: \"auto\",\n\t\t\tborderRadius: 10,\n\t\t\tboxShadow: \"-5px 6px 10px -1px #0007\",\n\t\t\tpadding: 10,\n\t\t\twidth: \"90%\",\n\t\t\theight: \"90%\",\n\t\t},\n\t\thr: {\n\t\t\tborder: `solid 1px ${theme.background.dark}`,\n\t\t},\n\t\tswitchToDesktopButton: {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 10 - windowsBarHeight,\n\t\t\ttransition: \"top 300ms\",\n\t\t\tright: 45,\n\t\t\theight: windowsBarHeight,\n\t\t\tcursor: \"pointer\",\n\t\t\twidth: 80,\n\t\t\tborderRadius: \"0 0 15px 15px\",\n\t\t\tfontSize: 40,\n\t\t\tpaddingTop: 5,\n\t\t\tborderBottom: \"none\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tcolor: theme.background.text,\n\t\t\tboxShadow: `0 0px 3px 0px ${theme.shadowColor}`,\n\t\t\tborder: `1px solid ${theme.transparentBorder || \"#eee2\"}`,\n\t\t\tbackdropFilter: \"blur(10px)\",\n\t\t\tbackground: transparent(\n\t\t\t\ttheme.background.transparent || theme.background.main,\n\t\t\t\ttheme.type === \"transparent\" ? 0.15 : 0.6\n\t\t\t),\n\t\t\t\"&:hover\": {\n\t\t\t\ttop: 0,\n\t\t\t\tbackground: theme.background.transparent,\n\t\t\t},\n\t\t\tzIndex: 2,\n\t\t},\n\t\tappFilter: {\n\t\t\theight: 55,\n\t\t},\n\t\tappGrid: {\n\t\t\tdisplay: \"grid\",\n\t\t\tgridTemplateColumns: \"repeat(auto-fit, minmax(80px, 120px))\",\n\t\t\tmargin: 15,\n\t\t\tjustifyContent: \"center\",\n\t\t\tgridGap: 30,\n\t\t\tgap: \"20px\",\n\t\t\tgridAutoRows: 100,\n\t\t},\n\t\tapp: {\n\t\t\tborderRadius: 7,\n\t\t\tpadding: 2,\n\t\t\tcolor: theme.secondary.text,\n\t\t\tcursor: \"pointer\",\n\t\t\tboxShadow: `-1px 2px 10px 1px ${theme.shadowColor}`,\n\t\t\ttransition: \"background 280ms, color 280ms, transform 450ms\",\n\t\t\t\"&:hover\": {\n\t\t\t\tboxShadow: `0px 0px 20px 9px ${theme.shadowColor}`,\n\t\t\t\tbackground: theme.secondary.main,\n\t\t\t\tcolor: theme.secondary.text,\n\t\t\t\ttransform: \"scale(1.25) translateY(-20px)\",\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t},\n\t\t\theight: 90,\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column-reverse\",\n\t\t},\n\t\topenApp: {\n\t\t\tborderBottom: `2px solid ${theme.secondary.main}`,\n\t\t\t\"&:hover\": {\n\t\t\t\tborderBottom: `2px solid ${theme.secondary.text}`,\n\t\t\t},\n\t\t},\n\t\tappIcon: {\n\t\t\tuserSelect: \"none\",\n\t\t\ttextAlign: \"center\",\n\t\t\tmaxWidth: 100,\n\t\t\tfontSize: 50,\n\t\t},\n\t\tappName: {\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\tmaxWidth: \"100%\",\n\t\t\ttextAlign: \"center\",\n\t\t\tuserSelect: \"none\",\n\t\t},\n\t});\n\ninterface DesktopState {\n\topenWindows: Window[];\n\tfilterAppQuery: string;\n}\n\nclass Desktop extends Component<\n\tDesktopInterface,\n\tDesktopState,\n\tWithStyles<typeof styles>\n> {\n\tconstructor(props: Desktop[\"props\"]) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topenWindows: windowManager.windows,\n\t\t\tfilterAppQuery: \"\",\n\t\t};\n\t\twindowManager.emitter.on(\"addWindow\", this.updateWindow);\n\t\twindowManager.emitter.on(\"closeWindow\", this.updateWindow);\n\t\twindowManager.emitter.on(\"maximizeWindow\", this.updateWindow);\n\t\twindowManager.emitter.on(\"minimizeWindow\", this.updateWindow);\n\t}\n\n\tupdateWindow = () =>\n\t\tthis.setState({ openWindows: [...windowManager.windows] });\n\n\trenderAppGrid = (\n\t\tapp: { name: string; icon: IconType },\n\t\tisOpen: boolean,\n\t\tonClick: () => void,\n\t\tindex: number\n\t) => {\n\t\tconst { classes } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={index}\n\t\t\t\tclassName={`${classes.app} ${isOpen ? classes.openApp : \"\"}`}\n\t\t\t\tonClick={onClick}\n\t\t\t>\n\t\t\t\t{app.icon.type === \"img\" ? (\n\t\t\t\t\t<img alt={`${app.name} icon`} src={app.icon.icon} />\n\t\t\t\t) : (\n\t\t\t\t\t<Icon className={classes.appIcon} name={app.icon.icon}></Icon>\n\t\t\t\t)}\n\t\t\t\t<div className={classes.appName}>{app.name}</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\trender() {\n\t\tconst { background, openApps, classes, apps, onLaunchApp } = this.props;\n\t\tconst { openWindows, filterAppQuery } = this.state;\n\t\treturn (\n\t\t\t<div className={classes.root} style={{ background }}>\n\t\t\t\t{openApps.map((app) => (\n\t\t\t\t\t<ConnectionContext.Provider\n\t\t\t\t\t\tkey={app.id}\n\t\t\t\t\t\tvalue={{\n\t\t\t\t\t\t\thost: reactFullstackConnectionManager.host,\n\t\t\t\t\t\t\tport: app.port,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t{...reactFullstackConnectionManager.connect(\n\t\t\t\t\t\t\t\tapp.port,\n\t\t\t\t\t\t\t\t\"nativeHost\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t))}\n\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t<div className={classes.switchToDesktopButton}>\n\t\t\t\t\t\t<Icon width={40} height={40} name=\"VscMultipleWindows\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Link>\n\t\t\t\t<div className={classes.appContainer}>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tclassName={classes.appFilter}\n\t\t\t\t\t\tborderBottom={false}\n\t\t\t\t\t\tplaceholder=\"search app\"\n\t\t\t\t\t\tvalue={filterAppQuery}\n\t\t\t\t\t\tonChange={(filterAppQuery) => this.setState({ filterAppQuery })}\n\t\t\t\t\t></TextField>\n\t\t\t\t\t{openWindows.length !== 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className={classes.appGrid}>\n\t\t\t\t\t\t\t\t{openWindows\n\t\t\t\t\t\t\t\t\t.filter((app) =>\n\t\t\t\t\t\t\t\t\t\tfilterAppQuery ? app.name.includes(filterAppQuery) : true\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.map((openWindow, index) =>\n\t\t\t\t\t\t\t\t\t\tthis.renderAppGrid(\n\t\t\t\t\t\t\t\t\t\t\topenWindow,\n\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\twindowManager.updateState(openWindow.id, {\n\t\t\t\t\t\t\t\t\t\t\t\t\tminimized: !openWindow.state.minimized,\n\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<hr className={classes.hr} />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className={classes.appGrid}>\n\t\t\t\t\t\t{apps\n\t\t\t\t\t\t\t.filter((app) =>\n\t\t\t\t\t\t\t\tfilterAppQuery\n\t\t\t\t\t\t\t\t\t? app.displayName.includes(filterAppQuery) ||\n\t\t\t\t\t\t\t\t\t  app.description.includes(filterAppQuery) ||\n\t\t\t\t\t\t\t\t\t  app.appName.includes(filterAppQuery)\n\t\t\t\t\t\t\t\t\t: true\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((app, index) =>\n\t\t\t\t\t\t\t\tthis.renderAppGrid(\n\t\t\t\t\t\t\t\t\t{ name: app.displayName, icon: app.icon },\n\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t() => app && onLaunchApp({ name: app.appName, params: {} }),\n\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Desktop);\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport WindowInterface from \"@web-desktop-environment/interfaces/lib/views/Window\";\nimport windowManager from \"@state/WindowManager\";\nimport { ConnectionContext } from \"@root/contexts\";\n\nclass Window extends Component<WindowInterface, {}> {\n\tid!: number;\n\twindow?: globalThis.Window;\n\n\tstatic contextType = ConnectionContext;\n\tcontext!: React.ContextType<typeof ConnectionContext>;\n\n\tisUnmounted = false;\n\topenWindow = () => {\n\t\tthis.window =\n\t\t\twindow.open(\n\t\t\t\t`${window.location.origin}/native/client/connect/${this.context?.host}/${this.context?.port}`,\n\t\t\t\t\"\",\n\t\t\t\t`width=${this.props.window.width},height=${this.props.window.height}`\n\t\t\t) || undefined;\n\t\tif (this.window) {\n\t\t\tconst { position } = this.props.window;\n\t\t\tif (position) {\n\t\t\t\tthis.window.moveTo(position.x, position.y);\n\t\t\t}\n\t\t\tconst closeInterval = setInterval(() => {\n\t\t\t\tif (this.window?.closed) {\n\t\t\t\t\tif (!this.isUnmounted) {\n\t\t\t\t\t\tthis.props.onClose();\n\t\t\t\t\t\twindowManager.closeWindow(this.id);\n\t\t\t\t\t}\n\t\t\t\t\tclearInterval(closeInterval);\n\t\t\t\t}\n\t\t\t}, 250);\n\t\t}\n\t};\n\n\tcomponentDidMount = () => {\n\t\twindow.addEventListener(\"unload\", () => {\n\t\t\tthis.window?.close();\n\t\t});\n\t\tthis.id = windowManager.addWindow(this.props.name, this.props.icon, {\n\t\t\tminimized: this.props.window.minimized || false,\n\t\t});\n\t\twindowManager.emitter.on(\"maximizeWindow\", ({ id }) => {\n\t\t\tif (id === this.id) {\n\t\t\t\tif (!this.window) {\n\t\t\t\t\tthis.openWindow();\n\t\t\t\t} else {\n\t\t\t\t\tthis.window.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\twindowManager.emitter.on(\"minimizeWindow\", ({ id }) => {\n\t\t\tif (id === this.id) {\n\t\t\t\tif (!this.window) {\n\t\t\t\t\tthis.openWindow();\n\t\t\t\t}\n\t\t\t\tthis.window?.blur();\n\t\t\t}\n\t\t});\n\t\tthis.openWindow();\n\t};\n\n\tcomponentWillUnmount = () => {\n\t\tthis.isUnmounted = true;\n\t\tthis.window?.close();\n\t\twindowManager.closeWindow(this.id);\n\t};\n\n\trender() {\n\t\treturn <></>;\n\t}\n}\n\nexport default Window;\n","import WindowInterface, {\n\tWindowState,\n} from \"@web-desktop-environment/interfaces/lib/views/Window\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n\twithStyles,\n\tWithStyles,\n\tcreateStyles,\n\tWithTheme,\n\twithTheme,\n\tmakeStyles,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\tcontainer: {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tright: 0,\n\t\t\tleft: 0,\n\t\t\tjustifyContent: \"center\",\n\t\t\tbackground: theme.background.main,\n\t\t\tdisplay: \"flex\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tzIndex: 2,\n\t\t},\n\t});\n\nconst useStyle = makeStyles({\n\timage: {\n\t\tposition: \"absolute\",\n\t\ttransition: \"transform 400ms\",\n\t\tzIndex: 1,\n\t},\n});\n\nexport const LocationBasedImage = ({ background }: { background: string }) => {\n\tconst classes = useStyle();\n\tconst [top, setTop] = useState(0);\n\tconst [left, setLeft] = useState(0);\n\tuseEffect(() => {\n\t\tconst loop = setInterval(() => {\n\t\t\tif (window.screen.availWidth - window.innerWidth === 0) {\n\t\t\t\tsetTop(0);\n\t\t\t\tsetLeft(0);\n\t\t\t} else {\n\t\t\t\tsetTop(window.screenY);\n\t\t\t\tsetLeft(window.screenX);\n\t\t\t}\n\t\t}, 500);\n\t\treturn () => clearInterval(loop);\n\t}, []);\n\treturn (\n\t\t<div\n\t\t\tclassName={classes.image}\n\t\t\tstyle={{\n\t\t\t\tbackground,\n\t\t\t\twidth: window.screen.width,\n\t\t\t\theight: window.screen.height,\n\t\t\t\ttransform: `translate(\n\t\t\t\t  -${left && left % window.screen.availWidth}px,\n\t\t\t\t  -${top && top - 70}px\n\t\t\t\t   )`,\n\t\t\t}}\n\t\t/>\n\t);\n};\n\nclass Window extends Component<\n\tWindowInterface,\n\t{},\n\tWithStyles<typeof styles> & WithTheme<Theme>\n> {\n\tget windowState(): WindowState {\n\t\treturn {\n\t\t\tsize: { height: window.innerHeight, width: window.innerWidth },\n\t\t\tminimized: window.document.hidden,\n\t\t\tposition: {\n\t\t\t\tx: window.screenX,\n\t\t\t\ty: window.screenY,\n\t\t\t},\n\t\t};\n\t}\n\tcomponentDidMount = () => {\n\t\tif (window.opener) {\n\t\t\twindow.addEventListener(\"resize\", () => {\n\t\t\t\tthis.props.setWindowState(this.windowState);\n\t\t\t});\n\t\t\twindow.addEventListener(\"visibilitychange\", () => {\n\t\t\t\tthis.props.setWindowState(this.windowState);\n\t\t\t});\n\t\t\tlet positionX = window.screenX;\n\t\t\tlet positionY = window.screenY;\n\t\t\tsetInterval(() => {\n\t\t\t\tif (positionX !== window.screenX || positionY !== window.screenY) {\n\t\t\t\t\tpositionX = window.screenX;\n\t\t\t\t\tpositionY = window.screenY;\n\t\t\t\t\tthis.props.setWindowState(this.windowState);\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { classes, background } = this.props;\n\t\tdocument.title = this.props.title;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className={classes.container}>{this.props.children}</div>\n\t\t\t\t{this.props.theme.type === \"transparent\" && (\n\t\t\t\t\t<LocationBasedImage background={background} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withTheme(withStyles(styles, { withTheme: true })(Window));\n","import \"./crossByPassHack\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Login from \"@root/loginScreen/Login\";\nimport Demo from \"@root/demo/App\";\nimport \"@root/index.css\";\nimport * as webViews from \"@root/views\";\nimport * as webViewsWindow from \"@root/views/windowViews\";\nimport * as nativeViewsHost from \"@root/views/native/hostViews\";\nimport * as nativeViewsClient from \"@root/views/native/clientViews\";\nimport \"typeface-jetbrains-mono\";\nimport { defaultTheme } from \"@root/theme\";\nimport { ThemeProvider as TP } from \"@material-ui/styles\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { ConnectionContext } from \"./contexts\";\nimport { Client } from \"@react-fullstack/fullstack-socket-client\";\nimport StateComponent from \"@components/stateComponent\";\nimport setUpDocument from \"@utils/setupDocument\";\n\ntype Views = \"web\" | \"webWindow\" | \"nativeHost\" | \"nativeClient\";\n\nconst viewsMap = {\n\tweb: webViews,\n\tnativeHost: nativeViewsHost,\n\tnativeClient: nativeViewsClient,\n\twebWindow: webViewsWindow,\n};\n\nclass ReactFullstackConnectionManager {\n\tpublic readonly host: string;\n\tpublic readonly https: boolean;\n\tconstructor(host: string, https: boolean) {\n\t\tthis.host = host;\n\t\tthis.https = https;\n\t}\n\tconnect = <V extends Views>(\n\t\tport: number,\n\t\tviews: V\n\t): {\n\t\tport: number;\n\t\thost: string;\n\t\tviews: typeof viewsMap[V];\n\t\tsocketOptions: SocketIOClient.ConnectOpts;\n\t} => {\n\t\treturn {\n\t\t\thost: `${this.https ? \"https\" : \"http\"}://${this.host}`,\n\t\t\tport,\n\t\t\tviews: { ...viewsMap[views] },\n\t\t\tsocketOptions: {\n\t\t\t\ttransports: [\"websocket\"],\n\t\t\t},\n\t\t};\n\t};\n}\n\nexport let reactFullstackConnectionManager: ReactFullstackConnectionManager;\n\nexport const connectToServer = (\n\thost: string,\n\tuseHttps: boolean,\n\tport: number,\n\tviews: Views\n) => {\n\treactFullstackConnectionManager = new ReactFullstackConnectionManager(\n\t\thost,\n\t\tuseHttps\n\t);\n\treturn reactFullstackConnectionManager.connect(port, views);\n};\n\nconst App = () => {\n\tconst [login, setLogin] = useState<{\n\t\tisLoggedIn: boolean;\n\t\thost: string;\n\t\tport: number;\n\t}>({ host: \"localhost\", port: 5000, isLoggedIn: false });\n\treturn (\n\t\t<TP theme={defaultTheme}>\n\t\t\t<Router>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/demo\">{() => <Demo />}</Route>\n\t\t\t\t\t<Route path=\"/native\">\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/native/connect/:host/:port/\"\n\t\t\t\t\t\t\t\trender={(login) => {\n\t\t\t\t\t\t\t\t\tconst { host, port } = login.match?.params;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<StateComponent<{}> defaultState={{}}>\n\t\t\t\t\t\t\t\t\t\t\t{() => (\n\t\t\t\t\t\t\t\t\t\t\t\t<ConnectionContext.Provider\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={{ host, port: Number(port) }}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...connectToServer(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thost,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(port),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"nativeHost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</StateComponent>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></Route>\n\t\t\t\t\t\t\t<Route path=\"/native/client/connect/:host/:port/\">\n\t\t\t\t\t\t\t\t{(login) => {\n\t\t\t\t\t\t\t\t\tconst { host, port } = login.match?.params || {};\n\n\t\t\t\t\t\t\t\t\tif (host && port) {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<ConnectionContext.Provider\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={{ host, port: Number(port) }}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{...connectToServer(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thost,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(port),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"nativeClient\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t<Route>\n\t\t\t\t\t\t\t\t{() =>\n\t\t\t\t\t\t\t\t\tlogin.isLoggedIn ? (\n\t\t\t\t\t\t\t\t\t\t<ConnectionContext.Provider value={login}>\n\t\t\t\t\t\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t\t\t\t\t\t{...connectToServer(\n\t\t\t\t\t\t\t\t\t\t\t\t\tlogin.host,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(login.port),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"nativeHost\"\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Login\n\t\t\t\t\t\t\t\t\t\t\tonLogin={(host, port) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetLogin({ host, port, isLoggedIn: true })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route>\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route path=\"/connect/:host/:port/\">\n\t\t\t\t\t\t\t\t{(login) => {\n\t\t\t\t\t\t\t\t\tconst { host, port } = login.match?.params || {};\n\t\t\t\t\t\t\t\t\tif (host && port) {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<ConnectionContext.Provider\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={{ host, port: Number(port) }}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{...connectToServer(host, false, Number(port), \"web\")}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t<Route>\n\t\t\t\t\t\t\t\t{() =>\n\t\t\t\t\t\t\t\t\tlogin.isLoggedIn ? (\n\t\t\t\t\t\t\t\t\t\t<ConnectionContext.Provider value={login}>\n\t\t\t\t\t\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t\t\t\t\t\t{...connectToServer(\n\t\t\t\t\t\t\t\t\t\t\t\t\tlogin.host,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(login.port),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"web\"\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Login\n\t\t\t\t\t\t\t\t\t\t\tonLogin={(host, port) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetLogin({ host, port, isLoggedIn: true })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t\t</TP>\n\t);\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\nsetUpDocument();\n","export default function setUpDocument() {\n\tdocument.addEventListener(\"contextmenu\", (e) => {\n\t\te.preventDefault();\n\t});\n}\n","import Emitter from \"@utils/Emitter\";\n\ntype ConnectionStatus = \"disconnected\" | \"connected\" | \"connecting\";\n\ninterface GTKBridgeEvents {\n\tstatus: ConnectionStatus;\n}\n\nexport const GTKBridgeEmitter = new Emitter<GTKBridgeEvents>();\n\nexport let status: ConnectionStatus = \"disconnected\";\n\nGTKBridgeEmitter.on(\"status\", (newStatus) => (status = newStatus));\n"],"sourceRoot":""}