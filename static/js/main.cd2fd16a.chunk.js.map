{"version":3,"sources":["utils/Emitter.ts","components/card.tsx","components/textField.tsx","components/button.tsx","loginScreen/Login.tsx","components/icon.tsx","components/mountUnmountAnimation.tsx","contexts.ts","components/stateComponent.tsx","utils/colors.ts","gtk-broadway-display/index.js","views/Desktop.tsx","theme.ts","views/wrapper/ThemeProvider.tsx","views/Window.tsx","utils/tasks.ts","views/apps/utils/Terminal.tsx","views/apps/utils/Explorer.tsx","views/apps/shared/FileViewer.tsx","views/apps/utils/Notepad.tsx","views/apps/media/MediaPlayer.tsx","views/apps/system/Settings.tsx","views/apps/thirdParty/Iframe.tsx","views/apps/shared/LoadingScreen.tsx","demo/App.tsx","views/native/host/Desktop.tsx","views/native/host/Window.tsx","views/native/client/Window.tsx","index.tsx","utils/setupDocument.ts","state/WindowManager.ts","gtk-broadway-display/state.ts"],"names":["emitter","setMaxListeners","call","event","data","emit","on","listener","remove","off","useStyle","makeStyles","theme","root","padding","borderRadius","boxShadow","shadowColor","mainBackground","background","main","darkBackground","dark","lightBackground","light","mainBackgroundTransparent","transparent","darkBackgroundTransparent","transparentDark","lightBackgroundTransparent","transparentLight","children","className","colorVariant","classes","backgroundClassesMap","color","variant","value","onChange","defaultValue","border","placeholder","borderBottom","selectedColor","useTheme","textColor","text","borderValue","borderBottomValue","backgroundColor","maxHeight","fontSize","outline","currentValue","setCurrentValue","e","newValue","target","onClick","style","shadow","backgroundColorMap","backgroundColorHover","minHeight","minWidth","display","justifyContent","alignItems","cursor","backgroundBlendMode","useStyles","position","width","height","card","maxWidth","flexDirection","backdropFilter","userSelect","barButtonsContainer","top","left","barButton","zIndex","barButtonExit","error","flex","barButtonCollaps","success","link","textDecoration","props","host","setHost","port","setPort","https","String","Number","onLogin","to","containerClassName","createElement","name","mount","setMount","onAnimationEnd","ConnectionContext","createContext","undefined","realstate","defaultState","state","updateState","setState","componentDidMount","onMount","render","this","Component","alpha","setAlpha","toHex8","padZero","str","Array","join","slice","invertColor","hex","indexOf","length","Error","r","parseInt","toString","g","b","inflateRaw","default","GTKBridgeEmitter","rootDiv","document","body","appendChild","id","grab","Object","window","ownerEvents","implicit","lastState","keyDownList","lastSerial","lastX","lastY","lastTimeStamp","realWindowWithMouse","windowWithMouse","surfaces","stackingOrder","outstandingCommands","inputSocket","fakeInput","showKeyboard","showKeyboardChanged","firstTouchDownId","getButtonMask","button","sendConfigureNotify","surface","sendInput","x","y","cmdCreateSurface","isTemp","positioned","transientParent","visible","imageData","toplevelElement","canvas","layer","addWindow","type","icon","minimized","currentId","currentLayer","addEventListener","setActiveWindow","reloadWindowsLayers","focus","doBeforeEveryFrame","requestAnimationFrame","i","setInterval","contains","closeWindow","clearInterval","push","cmdShowSurface","xOffset","yOffset","restackWindows","cmdHideSurface","doUngrab","cmdSetTransientFor","parentId","moveToHelper","filter","v","cid","splice","child","cmdDeleteSurface","parentNode","removeChild","cmdMoveResizeSurface","has_pos","has_size","w","h","tmpCanvas","ownerDocument","tmpContext","getContext","globalCompositeOperation","drawImage","context","resizeCanvas","element","cmdRaiseSurface","cmdLowerSurface","copyRect","src","srcX","srcY","dest","destX","destY","srcRect","destRect","line","subarray","set","markRun","start","markRect","decodeBuffer","oldData","debug","createImageData","len","cmd","blockid","block_stride","console","cmdPutBuffer","compressed","putImageData","cmdGrabPointer","doGrab","active","handleCommands","oncontextmenu","onMouseMove","onMouseOver","onMouseDown","onMouseUp","onKeyDown","onKeyPress","onKeyUp","onMouseWheel","onTouchStart","onTouchMove","onTouchEnd","attachEvent","setupDocument","innerWidth","innerHeight","onresize","ev","pos","command","get_char","get_32","innerHTML","get_16","log","get_16s","get_bool","ops","get_flags","get_data","BinCommands","message","arraybuffer","u8","Uint8Array","handleMessage","shift","unshift","handleOutstanding","getSurfaceId","args","fullArgs","charCodeAt","concat","buffer","ArrayBuffer","view","DataView","forEach","arg","setInt32","send","getPositionsFromAbsCoord","absX","absY","relativeId","res","rootX","rootY","winX","winY","getPositionsFromEvent","pageX","pageY","getEffectiveEventTarget","updateKeyboardStatus","blur","updateForEvent","shiftKey","ctrlKey","altKey","timeStamp","prototype","fromCharCode","size","unicodeTable","specialKeyTable","8","13","9","27","46","36","35","33","34","45","37","38","39","40","16","17","18","112","113","114","115","116","117","118","119","120","121","122","123","getEventKeySym","which","keyCode","getKeysymSpecial","flags","keysym","keyLocation","ignoreKeyEvent","handleKeyDown","fev","suppress","members","obj","copyKeyEvent","pushKeyEvent","cancelEvent","handleKeyPress","kdlen","getKeysym","handleKeyUp","pop","getKeyEvent","dir","detail","wheelDelta","preventDefault","changedTouches","touch","item","origId","isEmulated","identifier","connect","ws","WebSocket","binaryType","onopen","onclose","onmessage","test","navigator","userAgent","stopGDK","useWindowBarStyles","windowsBar","animation","bottom","right","transparentBorder","paddingLeft","windowsMinMaxLayer","max","overflowX","overflowY","from","windowsBarButton","transition","margin","marginRight","marginLeft","windowsBarButtonHover","transform","windowBorderColor","textAlign","opacity","windowsBarButtonActive","secondary","windowsBarButtonOpen","windowsBarButtonCloseMinimized","renderAppListCell","app","index","onLaunchApp","key","appCell","appName","params","alt","displayName","appIcon","appContent","description","willUnmount","componentWillUnmount","forceUpdate","tryToStartGtkServer","componentDidUpdate","gtkBridge","reactFullstackConnectionManager","openApps","apps","map","Provider","switchToNativeButton","isStartMenuOpen","startMenuQuery","WindowBar","toggleStartMenu","startMenu","slideIn","slideOut","startMenuBody","startMenuSearch","includes","windows","openWindows","setOpenWindows","selectedButton","setSelectedButton","updateWindow","openWindow","onContextMenu","activeWindowId","withStyles","createStyles","paddingTop","marginTop","appList","boxSizing","flexShrink","overflow","flexGrow","whiteSpace","textOverflow","darkTheme","windowBarColor","primary","warning","windowBorder","defaultTheme","Themes","nord","darkText","customTheme","defaultWindowSize","percentageToNumber","replace","screenSizesToNumbers","getSize","windowProperties","collapse","getPosition","useLocalWindowState","screen","availWidth","availHeight","handleClickOutside","isActive","setActive","updateWindowPositionORSizeQueuer","lastTask","stop","isIdle","continueEmitter","Emitter","queueTask","newTask","idle","Promise","currentTask","lastTaskQueuer","snapWindow","snap","forceState","allowLocalScreenSnapping","currentSnap","snapNow","switchToAbsolutePosition","rndElement","getElementsByClassName","randomClassNameForRndContainer","newStyles","getWindowTransformStyles","keys","keyNameAsString","Math","random","getWindowPosition","getWindowSize","onDrag","newPosition","clientX","clientY","updatedPosition","deltaX","deltaY","windowBarHeight","touchTop","farFromTop","touchMinimumLeft","farFromMinimumLeft","touchMinimumRight","farFromMinimumRight","setWindowState","onResize","ele","delta","localWindowState","newSize","lastResizeDelta","shouldCollapse","isResizing","canDrag","domContainer","getElementById","wrapperRef","switchPosition","serverWindowProperties","title","onClose","createPortal","ref","smoothMove","disableDragging","onDragStart","onDragStop","then","defaultSize","onResizeStart","onResizeStop","onMouseEnter","onMouseLeave","onDoubleClick","bar","barCollapse","barButtonCollapse","barButtonInactive","barTitle","barTitleIcon","contextType","fullscreenWindowPosition","withTheme","getTermTheme","foreground","containerElement","term","open","termFit","fit","socket","close","clientWidth","cols","transports","fontFamily","allowTransparency","loadAddon","write","onData","setOption","div","borderTop","confirm","resolve","reject","confirmDone","result","prompt","promptFinish","getBreadcrumbLocations","maxLength","currentPath","platformPathSeparator","onChangeCurrentPath","currentLocation","pathArray","split","path","pathPartPath","isFirst","isLast","selectedFile","onDrop","onDropPath","onMove","dragedFile","isFolder","newPath","originalPath","fileIsOverFile","onFileDragOver","file","deleteSelected","onDelete","createFolder","promptCreate","onCreateFolder","createFile","onCreateFile","Past","cutPath","copyPath","onCopy","fullPath","files","onRequestDownloadLink","onSelect","downloadUrl","locationBarContainer","locationBar","breadcrumbFilesContainer","breadcrumbItem","breadcrumbButtonItem","breadcrumbButtonItemFirst","breadcrumbButtonItemLast","onDragOverCapture","fileBoxContainer","actionBarContainer","actionBar","actionButton","rel","href","download","fileBox","dialog","dialogMessage","dialogInput","dialogButtons","dialogButton","dialogButtonPrimary","fileContainer","fileActive","draggable","onDragLeave","fileName","fileIcon","stickyActionBarContainer","actionBarNoBorder","openButton","gridTemplateRows","borderRight","paddingBottom","borderLeft","borderBottomRightRadius","gridTemplateColumns","gridGap","gap","gridAutoRows","fileBreadcrumb","paddingRight","makeFileViewerStyles","headlineContainer","menuContainer","headline","backButton","borderTopRightRadius","openFileContainer","openFileContainerBody","filename","isSelectingFile","onReselectFile","renderViewer","onSave","textAreaContainer","textAreaContainerBody","textArea","resize","source","videoAreaContanier","videoAreaContanierBody","controls","videoArea","makeColor","baseColor","toHex8String","darken","lighten","toHexString","isDark","getAlpha","generateCustomTheme","a","post","JSON","stringify","model","response","colors","settings","desktop","setSettings","renderDesktopCategory","category","categoryTitle","marginBlock","settingsBlock","settingsProperty","settingsPropertyName","settingsPropertyValue","settingsPropertyCol","settingsPropertyNameCol","settingsPropertyValueCol","themeGrid","themeButton","renderCreateCustomTheme","categorySubtitle","colorsTable","originalColor","find","round","rgb","getColor","currentColor","fullState","renderNetworkCategory","errorMainPort","errorStartPort","errorEndPort","mainPort","network","ports","startPort","endPort","settingsPropertyValueError","renderSystemInfoCategory","systemInfo","os","hostname","platform","kernel","cpu","brandName","manufacturer","cores","physicalCores","speed","speedMax","speedMin","ram","total","free","disks","disk","vendor","selectedCategory","categorySelection","selectCategoryButton","selectCategoryButtonSelected","marginBottom","wordBreak","iframeRef","createRef","intervalsToClear","activeElement","current","click","allowFullScreen","sandbox","allow","animationWave","jumpingCube","content","emptyFunction","defaultWindowProps","useWindow","initialState","newWindowState","setBackground","setTheme","explorerWindow","notepadWindow","settingsWindow","onUpload","onReload","newSettings","nativeBackground","renderAppGrid","isOpen","openApp","filterAppQuery","switchToDesktopButton","appContainer","appFilter","appGrid","hr","isUnmounted","location","origin","moveTo","closed","image","LocationBasedImage","setTop","setLeft","loop","screenY","screenX","opener","windowState","hidden","container","viewsMap","web","nativeHost","nativeClient","webWindow","views","socketOptions","connectToServer","useHttps","ReactFullstackConnectionManager","isLoggedIn","login","setLogin","match","windowsLayers","min","currentZIndex","reverse","idIndex","newWindow","windowToClose","newState","currentWindow","WindowManager","status","newStatus"],"mappings":"+QAAA,qBAEA,wBACS,KAAAA,SAAU,IAAI,KAASC,gBAAgB,GAExC,KAAAC,KAAO,SAA4BC,EAAUC,GACnD,SAAKJ,QAAQK,KAAKF,EAAiBC,IAE7B,KAAAE,GAAK,SACXH,EACAI,GAGA,OADA,EAAKP,QAAQM,GAAGH,EAAiBI,GAC1B,CACNC,OAAQ,WAAM,SAAKC,IAAIN,EAAOI,IAC9BD,GAAI,EAAKA,GACTJ,KAAM,SAACE,GAAuB,SAAKF,KAAKC,EAAOC,MAI1C,KAAAK,IAAM,SACZN,EACAI,GACI,SAAKP,QAAQS,IAAIN,EAAiBI,K,w6DClBlCG,EAAW,OAAAC,EAAA,IAAW,SAACC,GAAiB,OAC7CC,KAAM,CACLC,QAAS,EACTC,aAAc,GACdC,UAAW,sBAAsBJ,EAAMK,aAExCC,eAAgB,CACfC,WAAYP,EAAMO,WAAWC,MAE9BC,eAAgB,CACfF,WAAYP,EAAMO,WAAWG,MAE9BC,gBAAiB,CAChBJ,WAAYP,EAAMO,WAAWK,OAE9BC,0BAA2B,CAC1BN,WAAYP,EAAMO,WAAWO,aAAed,EAAMO,WAAWC,MAE9DO,0BAA2B,CAC1BR,WAAYP,EAAMO,WAAWS,iBAAmBhB,EAAMO,WAAWG,MAElEO,2BAA4B,CAC3BV,WAAYP,EAAMO,WAAWW,kBAAoBlB,EAAMO,WAAWK,WAmCrD,EA1BF,SAAC,G,IACbO,EAAQ,WACRC,EAAS,YACTC,EAAY,eAENC,EAAUxB,IAEVyB,EAA6D,CAClEb,KAAMY,EAAQb,eACdG,MAAOU,EAAQX,gBACfH,KAAMc,EAAQhB,eACdQ,YAAaQ,EAAQT,0BACrBG,gBAAiBM,EAAQP,0BACzBG,iBAAkBI,EAAQL,4BAE3B,OACC,yBACCG,UAAcE,EAAQrB,KAAI,IACzBsB,EAAqBF,GAAgB,QAAO,KACzCD,GAAa,KAEhBD,I,SC+BW,EAlDG,SAAC,G,IAClBA,EAAQ,WACRC,EAAS,YACTI,EAAK,QACLC,EAAO,UACPC,EAAK,QACLC,EAAQ,WACRC,EAAY,eACZC,EAAM,SACNf,EAAW,cACXgB,EAAW,cACXC,EAAY,eAGNC,EADe,OAAAC,EAAA,KACOT,GAAS,cAC/BU,EAAYF,EAAcG,KAC1BC,EAAcP,EAAS,aAAaK,EAAc,OAClDG,GACY,IAAjBN,EAAyB,aAAaG,EAAc,OAI/CZ,EAvDU,SAChBY,EACAI,EACAT,EACAE,GAEA,cAAAhC,EAAA,IAAW,WAAM,OAChBE,KAAM,CACLsC,UAAW,GACXC,SAAU,GACVhB,MAAOU,EACPI,gBAAe,EACfT,OAAM,EACNE,aAAY,EACZ,UAAW,CACVU,QAAS,aAwCI,CACfP,EAJuBpB,EACrBkB,EAAcP,GAAW,SAAWO,EAAcxB,KAClD,cAIF4B,EACAC,EAJe,GAOV,EAAkC,mBAAST,GAAgB,IAA1Dc,EAAY,KAAEC,EAAe,KASpC,OACC,2BACCb,YAAaA,EACbJ,MAAOA,GAASgB,EAChBf,SAZmB,SAACiB,GACrB,IAAMC,EAAWD,EAAEE,OAAOpB,MAC1BiB,EAAgBE,GACZlB,GACHA,EAASkB,EAAUD,IASnBxB,UAAcE,EAAQrB,KAAI,KAAImB,GAAa,KAE1CD,ICaW,EAhDA,SAAC,G,IACfA,EAAQ,WACRC,EAAS,YACTI,EAAK,QACLC,EAAO,UACPI,EAAM,SACNf,EAAW,cACXiC,EAAO,UACPC,EAAK,QACLC,EAAM,SAGAjB,EADe,OAAAC,EAAA,KACOT,GAAS,cAC/BU,EAAYF,EAAcG,KAC1BC,EAAcP,EAAS,aAAaK,EAAc,OAClDgB,EAAwD,CAC7DxC,KAAMsB,EAAchB,iBAAmBgB,EAActB,KACrDF,KAAMwB,EAAclB,aAAekB,EAAcxB,KACjDI,MAAOoB,EAAcd,kBAAoBc,EAAcpB,OAUlDU,EAvEU,SAChBY,EACAI,EACAa,EACAtB,GAEA,cAAA9B,EAAA,IAAW,SAACC,GAAiB,OAC5BC,KAAM,CACLE,aAAc,EACdiD,UAAW,GACXC,SAAU,GACVnD,QAAS,EACToD,QAAS,OACTC,eAAgB,SAChB/B,MAAOU,EACP3B,WAAY+B,EACZT,OAAM,EACN2B,WAAY,SACZC,OAAQ,UACR,UAAW,CACV5B,OAAM,EACN6B,oBAAqB,WACrBpB,gBAAiBa,IAGnBF,OAAQ,CACP7C,UAAW,qBAAqBJ,EAAMK,iBA6CxB,CACf6B,GARgB,IAAhBpB,EACGoC,EAAmBzB,GAAW,SAC9BO,EAAclB,aACdkB,EAAcxB,KACd,cAEHwB,EAAcP,GAAW,SAAWO,EAAcxB,KAKlD4B,EAJe,GAOhB,OACC,yBACCW,QAASA,EACTC,MAAOA,EACP5B,UAAcE,EAAQrB,KAAI,KAAIgD,EAAS3B,EAAQ2B,OAAS,IAAE,KACzD7B,GAAa,KAGbD,I,QC/EEwC,EAAY,OAAA5D,EAAA,IAAW,SAACC,GAAiB,OAC9CC,KAAM,CACL2D,SAAU,QACVN,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZK,MAAO,OACPC,OAAQ,OACRvD,WAAY,kDAEbwD,KAAM,CACLF,MAAO,IACPG,SAAU,MACVF,OAAQ,IACRvB,UAAW,MACXrC,QAAS,YACToD,QAAS,OACT9B,MAAOxB,EAAMO,WAAW4B,KACxB8B,cAAe,SACfV,eAAgB,gBAChBW,eAAgB,YAChBC,WAAY,QAEbC,oBAAqB,CACpBR,SAAU,WACVS,IAAK,GACLC,KAAM,MACNT,MAAO,GACPC,OAAQ,GACRR,QAAS,OACTC,eAAgB,iBAEjBgB,UAAW,CACVV,MAAO,GACPC,OAAQ,GACR3D,aAAc,MACdqE,OAAQ,EACR3C,OAAQ,mBAET4C,cAAe,CACdhB,OAAQ,UACRlD,WAAYP,EAAM0E,MAAMlE,KACxB,UAAW,CACVD,WAAYP,EAAM0E,MAAMhE,OAG1BiE,KAAM,CACLrB,QAAS,QAEVsB,iBAAkB,CACjBnB,OAAQ,UACRlD,WAAYP,EAAM6E,QAAQrE,KAC1B,UAAW,CACVD,WAAYP,EAAM6E,QAAQnE,OAG5BoE,KAAM,CACLC,eAAgB,YAuDH,EAnDD,SAACC,GACd,IAAM1D,EAAUqC,IACV,EAAkB,mBAAS,aAA1BsB,EAAI,KAAEC,EAAO,KACd,EAAkB,mBAAS,KAA1BC,EAAI,KAAEC,EAAO,KACbC,EAA0B,oBAAS,GAAM,GAChD,OACC,yBAAKjE,UAAWE,EAAQrB,MACvB,6BACC,yBAAKmB,UAAWE,EAAQ8C,qBACvB,yBAAKhD,UAAcE,EAAQiD,UAAS,IAAIjD,EAAQsD,mBAChD,yBAAKxD,UAAcE,EAAQiD,UAAS,IAAIjD,EAAQmD,iBAEjD,kBAAC,EAAI,CAACrD,UAAWE,EAAQyC,MACxB,oDACA,kBAAC,EAAS,CACTrC,MAAOuD,EACPtD,SAAU,SAACkB,GAAa,OAAAqC,EAAQrC,GAAY,KAC5Cf,YAAY,SAEb,kBAAC,EAAS,CACTJ,MAAO4D,OAAOH,GAAQ,IACtBxD,SAAU,SAACkB,GAAa,OAAAuC,EAAQG,OAAO1C,KACvCf,YAAY,SAUb,kBAAC,EAAM,CACNL,QAAQ,OACRsB,QAAS,WAAM,OAAAiC,EAAMQ,QAAQP,EAAME,EAAME,IACzC7D,MAAM,aACNK,QAAM,YAIP,kBAAC,IAAI,CAAC4D,GAAG,QAAQrE,UAAWE,EAAQwD,MACnC,kBAAC,EAAM,CAACrD,QAAQ,OAAOD,MAAM,aAAaK,QAAM,6C,4QCzFvC,EAjBF,SACZmD,GAMA,OACC,0BAAM5D,UAAW,gBAAe4D,EAAMU,oBAAsB,KAC1D,IAAMC,cAEN,OAAK,GAAY,GAAWX,EAAMY,OAAS,WAC3CZ,K,OCFW,EAhBe,SAC7BA,GAEM,MAAoB,mBAASA,EAAMa,OAAlCA,EAAK,KAAEC,EAAQ,KACtB,OAAOD,GAASb,EAAMa,MACrB,yBACCzE,UAAW4D,EAAM5D,UACjB2E,eAAgB,WACfD,EAASd,EAAMa,SAGfb,EAAM7D,UAEL,M,QCbQ6E,EAAoB,IAAMC,mBAErCC,G,yqBC4Ba,EA9Bf,uE,OAWC,EAAAC,UAAY,EAAKnB,MAAMoB,aACvB,EAAAC,MAAQ,EAAKrB,MAAMoB,aAEnB,EAAAE,YAAc,SAACD,GACd,EAAKE,SAAS,OAAK,EAAKF,OAAUA,IAClC,EAAKF,UAAY,OAAK,EAAKA,WAAcE,IAG1C,EAAAG,kBAAoB,WACf,EAAKxB,MAAMyB,SACd,EAAKzB,MAAMyB,QAAQ,EAAKN,UAAW,EAAKG,c,EAO3C,OA5BmD,OAyBlD,YAAAI,OAAA,WACC,OAAOC,KAAK3B,MAAM7D,SAASwF,KAAKR,UAAWQ,KAAKL,cAElD,EA5BA,CAAmD,IAAMM,W,QCA5C,EAAc,SAACpF,EAAeqF,GAC1C,YAD0C,IAAAA,MAAA,IAC1C,IAAM,kBAAMrF,GAAOsF,SAASD,GAAOE,UAI9BC,EAAU,SAACC,GAGhB,OADc,IAAIC,MADN,GACiBC,KAAK,KAClBF,GAAKG,OAFT,IAKAC,EAAc,SAACC,GAQ3B,GAPyB,IAArBA,EAAIC,QAAQ,OACfD,EAAMA,EAAIF,MAAM,IAGE,IAAfE,EAAIE,SACPF,EAAMA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAErC,IAAfA,EAAIE,OACP,MAAM,IAAIC,MAAM,sBAGjB,IAAMC,GAAK,IAAMC,SAASL,EAAIF,MAAM,EAAG,GAAI,KAAKQ,SAAS,IACxDC,GAAK,IAAMF,SAASL,EAAIF,MAAM,EAAG,GAAI,KAAKQ,SAAS,IACnDE,GAAK,IAAMH,SAASL,EAAIF,MAAM,EAAG,GAAI,KAAKQ,SAAS,IAEpD,MAAO,IAAMZ,EAAQU,GAAKV,EAAQa,GAAKb,EAAQc,IC1BhD,MAAM,WAAEC,GAAe,EAAQ,MACvBC,QAAS,GAAkB,EAAQ,IACrC,iBAAEC,GAAqB,EAAQ,IAG/BC,EAAUC,SAASxC,cAAc,OACvCwC,SAASC,KAAKC,YAAYH,GAC1BA,EAAQI,GAAK,UA0Fb,IAAIC,EAAO,IAAIC,OACfD,EAAKE,OAAS,KACdF,EAAKG,aAAc,EACnBH,EAAKI,UAAW,EAChB,IAIIC,EAJAC,EAAc,GACdC,EAAa,EACbC,EAAQ,EACRC,EAAQ,EAERC,EAAgB,EAChBC,EAAsB,EACtBC,EAAkB,EAClBC,EAAW,GACXC,EAAgB,GAChBC,GAAsB,IAAIpC,MACnBqC,GAAc,KAErBC,GAAY,KACZC,IAAe,EACfC,IAAsB,EACtBC,GAAmB,KAyBvB,SAASC,GAAcC,GACtB,OAAc,GAAVA,EAXkB,IAYR,GAAVA,EAXkB,IAYR,GAAVA,EAXkB,KAYR,GAAVA,EAXkB,KAYR,GAAVA,EAXkB,KAYf,EAGR,SAASC,GAAoBC,GAC5BC,GAAU,IAAK,CACdD,EAAQzB,GACRyB,EAAQE,EACRF,EAAQG,EACRH,EAAQlG,MACRkG,EAAQjG,SA0CV,SAASqG,GAAiB7B,EAAI2B,EAAGC,EAAGrG,EAAOC,EAAQsG,GAClD,IAAIL,EAAU,CACbzB,GAAIA,EACJ2B,EAAGA,EACHC,EAAGA,EACHrG,MAAOA,EACPC,OAAQA,EACRsG,OAAQA,GAETL,EAAQM,WAAaD,EACrBL,EAAQO,gBAAkB,EAC1BP,EAAQQ,SAAU,EAClBR,EAAQS,UAAY,KAEpB,IAKIC,EALAC,EAASvC,SAASxC,cAAc,UACpC+E,EAAO7G,MAAQA,EACf6G,EAAO5G,OAASA,EAChB4G,EAAOX,QAAUA,EACjBA,EAAQW,OAASA,EAGjBD,EAAkBC,EAClBxC,EAAQG,YAAYqC,GAEpBX,EAAQU,gBAAkBA,EACrBL,GA3DN,SAAmBL,GAClB,IAAIY,EAAQ,EACZ,MAAMrC,EAAK,EAAcsC,UACxB,eACA,CAAEC,KAAM,OAAQC,KAAM,WACtB,CAAEC,WAAW,IAEd,EAAc3L,QAAQM,GACrB,eACA,EAAG4I,GAAI0C,EAAWL,MAAOM,MACpBD,IAAc1C,IACjBqC,EAAQM,KAIXlB,EAAQU,gBAAgBS,iBAAiB,YAAa,KACrD,EAAcC,gBAAgB7C,KAE/B,EAAc8C,sBACdrB,EAAQU,gBAAgBY,QACxB,MAAMC,EAAqB,KAC1BvB,EAAQU,gBAAgBzH,MAAMwB,OAASc,OAAOqF,GAC9CY,sBAAsBD,IAEvBA,IACA,MAAME,EAAIC,YAAY,KAChBvD,EAAQwD,SAAS3B,EAAQU,mBAC7B,EAAckB,YAAYrD,GAC1BsD,cAAcJ,MAgCfZ,CAAUb,GAEXU,EAAgBzH,MAAgB,SAAI,WAGpCyH,EAAgBzH,MAAY,KAAI+G,EAAQE,EAAI,KAC5CQ,EAAgBzH,MAAW,IAAI+G,EAAQG,EAAI,KAC3CO,EAAgBzH,MAAe,QAAI,SAEnCyH,EAAgBzH,MAAkB,WAAI,SAEtCoG,EAASd,GAAMyB,EACfV,EAAcwC,KAAK9B,GAEnBD,GAAoBC,GAGrB,SAAS+B,GAAexD,GACvB,IAAIyB,EAAUX,EAASd,GAEvB,IAAIyB,EAAQQ,QAAZ,CACAR,EAAQQ,SAAU,EAElB,IAAIwB,EAAUhC,EAAQE,EAClB+B,EAAUjC,EAAQG,EAEtBH,EAAQU,gBAAgBzH,MAAY,KAAI+I,EAAU,KAClDhC,EAAQU,gBAAgBzH,MAAW,IAAIgJ,EAAU,KACjDjC,EAAQU,gBAAgBzH,MAAkB,WAAI,UAE9CiJ,MAGD,SAASC,GAAe5D,GACnBC,EAAKE,QAAUH,GAAI6D,KAEvB,IAAIpC,EAAUX,EAASd,GAElByB,EAAQQ,UACbR,EAAQQ,SAAU,EAEJR,EAAQU,gBAEdzH,MAAkB,WAAI,UAG/B,SAASoJ,GAAmB9D,EAAI+D,GAC/B,IAAItC,EAAUX,EAASd,GAEnByB,EAAQO,iBAAmB+B,IAE/BtC,EAAQO,gBAAkB+B,EACV,GAAZA,GAAiBjD,EAASiD,IAC7BC,GAAavC,EAASV,EAAc9B,QAAQ6B,EAASiD,IAAa,GAG/DtC,EAAQQ,SACX0B,MAIF,SAASA,KACR5C,EAAgBA,EAAckD,OAAQC,GAAMA,GAC5C,IAAK,IAAIhB,EAAI,EAAGA,EAAInC,EAAc7B,OAAQgE,IAAK,CAChCnC,EAAcmC,GACpBf,gBAAgBzH,MAAMwB,OAASgH,GAIzC,SAASc,GAAavC,EAASnG,GAC9B,IAAI4H,EAAInC,EAAc9B,QAAQwC,GAK9B,IAAK,IAAI0C,KAJTpD,EAAcqD,OAAOlB,EAAG,QACRtF,GAAZtC,EAAuByF,EAAcqD,OAAO9I,EAAU,EAAGmG,GACxDV,EAAcwC,KAAK9B,GAERX,EAAU,CACzB,IAAIuD,EAAQvD,EAASqD,GACjBE,EAAMrC,kBAAoBP,EAAUA,EAAQzB,GAAK,OACpDgE,GAAaK,EAAOtD,EAAc9B,QAAQwC,GAAW,IAIxD,SAAS6C,GAAiBtE,GACrBC,EAAKE,QAAUH,GAAI6D,KAEvB,IAAIpC,EAAUX,EAASd,GACnBkD,EAAInC,EAAc9B,QAAQwC,GAC1ByB,GAAK,GAAGnC,EAAcqD,OAAOlB,EAAG,GACpC,IAAId,EAASX,EAAQW,OACrBA,EAAOmC,WAAWC,YAAYpC,UACvBtB,EAASd,GAGjB,SAASyE,GAAqBzE,EAAI0E,EAAS/C,EAAGC,EAAG+C,EAAUC,EAAGC,GAC7D,IAAIpD,EAAUX,EAASd,GAavB,GAZI0E,IACHjD,EAAQM,YAAa,EACrBN,EAAQE,EAAIA,EACZF,EAAQG,EAAIA,GAET+C,IACHlD,EAAQlG,MAAQqJ,EAChBnD,EAAQjG,OAASqJ,GAGdF,GA3PL,SAAsBvC,EAAQwC,EAAGC,GAEhC,IAAIC,EAAY1C,EAAO2C,cAAc1H,cAAc,UACnDyH,EAAUvJ,MAAQ6G,EAAO7G,MACzBuJ,EAAUtJ,OAAS4G,EAAO5G,OAC1B,IAAIwJ,EAAaF,EAAUG,WAAW,MACtCD,EAAWE,yBAA2B,OACtCF,EAAWG,UAAU/C,EAAQ,EAAG,EAAG0C,EAAUvJ,MAAOuJ,EAAUtJ,QAE9D4G,EAAO7G,MAAQqJ,EACfxC,EAAO5G,OAASqJ,EAEhB,IAAIO,EAAUhD,EAAO6C,WAAW,MAEhCG,EAAQF,yBAA2B,OACnCE,EAAQD,UAAUL,EAAW,EAAG,EAAGA,EAAUvJ,MAAOuJ,EAAUtJ,QA4OhD6J,CAAa5D,EAAQW,OAAQwC,EAAGC,GAE1CpD,EAAQQ,SACPyC,EAAS,CACZ,IAAIjB,EAAUhC,EAAQE,EAClB+B,EAAUjC,EAAQG,EAElB0D,EAAU7D,EAAQW,OAEtBkD,EAAQ5K,MAAY,KAAI+I,EAAU,KAClC6B,EAAQ5K,MAAW,IAAIgJ,EAAU,KAInClC,GAAoBC,GAGrB,SAAS8D,GAAgBvF,GAGxBgE,GAFclD,EAASd,IAGvB2D,KAGD,SAAS6B,GAAgBxF,GAGxBgE,GAFclD,EAASd,GAED,GACtB2D,KAGD,SAAS8B,GAASC,EAAKC,EAAMC,EAAMC,EAAMC,EAAOC,EAAOxK,EAAOC,GAEzDmK,EAAOpK,EAAQmK,EAAInK,QAAOA,EAAQmK,EAAInK,MAAQoK,GAC9CC,EAAOpK,EAASkK,EAAIlK,SAAQA,EAASkK,EAAIlK,OAASoK,GAGlDE,EAAQvK,EAAQsK,EAAKtK,QAAOA,EAAQsK,EAAKtK,MAAQuK,GACjDC,EAAQvK,EAASqK,EAAKrK,SAAQA,EAASqK,EAAKrK,OAASuK,GAKzD,IAHA,IAAIC,EAAsB,EAAZN,EAAInK,MAAYqK,EAAc,EAAPD,EACjCM,EAAwB,EAAbJ,EAAKtK,MAAYwK,EAAgB,EAARD,EAE/B5C,EAAI,EAAGA,EAAI1H,EAAQ0H,IAAK,CAChC,IAAIgD,EAAOR,EAAIxO,KAAKiP,SAASH,EAASA,EAAkB,EAARzK,GAChDsK,EAAK3O,KAAKkP,IAAIF,EAAMD,GACpBD,GAAuB,EAAZN,EAAInK,MACf0K,GAAyB,EAAbJ,EAAKtK,OAInB,SAAS8K,GAAQR,EAAMS,EAAOpH,EAAQE,EAAGG,EAAGC,GAC3C,IAAK,IAAI0D,EAAIoD,EAAOpD,EAAIoD,EAAiB,EAATpH,EAAYgE,GAAK,EAChD2C,EAAK3C,EAAI,GAAM2C,EAAK3C,EAAI,GAAK,EAAM,EAAI9D,EACvCyG,EAAK3C,EAAI,GAAM2C,EAAK3C,EAAI,GAAK,EAAM,EAAI3D,EACvCsG,EAAK3C,EAAI,GAAM2C,EAAK3C,EAAI,GAAK,EAAM,EAAI1D,EAIzC,SAAS+G,GAASb,EAAKC,EAAMC,EAAMC,EAAMC,EAAOC,EAAOxK,EAAOC,EAAQ4D,EAAGG,EAAGC,GAEvEmG,EAAOpK,EAAQmK,EAAInK,QAAOA,EAAQmK,EAAInK,MAAQoK,GAC9CC,EAAOpK,EAASkK,EAAIlK,SAAQA,EAASkK,EAAIlK,OAASoK,GAGlDE,EAAQvK,EAAQsK,EAAKtK,QAAOA,EAAQsK,EAAKtK,MAAQuK,GACjDC,EAAQvK,EAASqK,EAAKrK,SAAQA,EAASqK,EAAKrK,OAASuK,GAIzD,IAFA,IAAIE,EAAwB,EAAbJ,EAAKtK,MAAYwK,EAAgB,EAARD,EAE/B5C,EAAI,EAAGA,EAAI1H,EAAQ0H,IAClB,GAALA,GAAUA,GAAK1H,EAAS,EAAG6K,GAAQR,EAAK3O,KAAM+O,EAAU1K,EAAO,EAAG,EAAG,IAExE8K,GAAQR,EAAK3O,KAAM+O,EAAU,EAAG,EAAG,EAAG,GACtCI,GAAQR,EAAK3O,KAAM+O,EAAW,EAAG1K,EAAQ,EAAG6D,EAAGG,EAAGC,GAClD6G,GAAQR,EAAK3O,KAAM+O,EAAW,EAAI1K,EAAQ,EAAG,EAAG,EAAG,EAAG,IAEvD0K,GAAyB,EAAbJ,EAAKtK,MAInB,SAASiL,GAAapB,EAASqB,EAAS7B,EAAGC,EAAG3N,EAAMwP,GACnD,IAAIxD,EACAhB,EAAYkD,EAAQuB,gBAAgB/B,EAAGC,GAE5B,MAAX4B,GAEHhB,GAASgB,EAAS,EAAG,EAAGvE,EAAW,EAAG,EAAGuE,EAAQlL,MAAOkL,EAAQjL,QAMjE,IAHA,IAAIkK,EAAM,EACNG,EAAO,EAEJH,EAAMxO,EAAKgI,QAAQ,CACzB,IAII0H,EAAKN,EAJL9G,EAAItI,EAAKwO,KACTnG,EAAIrI,EAAKwO,KACTtG,EAAIlI,EAAKwO,KACTnH,EAAQrH,EAAKwO,KAGjB,GAAa,GAATnH,EAECmI,IAEHnH,EAAKA,EAAI,EAAK,EACdC,GAFAJ,EAAKA,EAAI,EAAK,KAEL,EAAK,GAGf8C,EAAUhL,KAAK2O,KAAUzG,EACzB8C,EAAUhL,KAAK2O,KAAUtG,EACzB2C,EAAUhL,KAAK2O,KAAUrG,EACzB0C,EAAUhL,KAAK2O,KAAUtH,MACnB,CACN,IAAIsI,EAAU,IAAJzH,EACV,OAAQyH,GACP,KAAK,EAEJ3E,EAAUhL,KAAK2O,KAAU,EACzB3D,EAAUhL,KAAK2O,KAAU,EACzB3D,EAAUhL,KAAK2O,KAAU,EACzB3D,EAAUhL,KAAK2O,KAAU,EACzB,MAED,KAAK,GAGJA,GAAc,GAFde,GAAY,GAAJxH,IAAY,GAAOG,GAAK,EAAKC,GAGrC,MAED,KAAK,GACJ,IAAIsH,GAAgB,GAAJ1H,IAAY,GAAOG,GAAK,EAAKC,EAEzCuH,GAAiBN,EAAQlL,MAAQ,GAAK,GAAK,GAAM,EACjDqK,EAAwC,IAA/BkB,EAAUC,EAAgB,GACnCpB,EAAsC,IAA9BmB,EAAUC,EAAe,GAErCvH,EAAItI,EAAKwO,KACTnG,EAAIrI,EAAKwO,KACTtG,EAAIlI,EAAKwO,KAGT,IAAII,GAFJvH,EAAQrH,EAAKwO,OAES,EAAKtG,EACvB2G,EAASxG,GAAK,EAAKC,EAEvBiG,GAASgB,EAASd,EAAMC,EAAM1D,EAAW4D,EAAOC,EAAO,GAAI,IACvDW,GAEHH,GACCE,EACAd,EACAC,EACA1D,EACA4D,EACAC,EACA,GACA,GACA,EACA,IACA,GAKF,MAED,KAAK,GAWJ,IAVAa,GAAY,GAAJxH,IAAY,GAAOG,GAAK,EAAKC,EAGrCA,EAAItI,EAAKwO,KACTnG,EAAIrI,EAAKwO,KACTtG,EAAIlI,EAAKwO,KACTnH,EAAQrH,EAAKwO,KAEbY,EAAQT,EAEH3C,EAAI,EAAGA,EAAI0D,EAAK1D,IACpBhB,EAAUhL,KAAK2O,KAAUzG,EACzB8C,EAAUhL,KAAK2O,KAAUtG,EACzB2C,EAAUhL,KAAK2O,KAAUrG,EACzB0C,EAAUhL,KAAK2O,KAAUtH,EAGtBmI,GAEHL,GAAQnE,EAAUhL,KAAMoP,EAAOM,EAAK,EAAM,EAAM,KAEjD,MAED,KAAK,GAWJ,IAVAA,GAAY,GAAJxH,IAAY,GAAOG,GAAK,EAAKC,EAGrCA,EAAItI,EAAKwO,KACTnG,EAAIrI,EAAKwO,KACTtG,EAAIlI,EAAKwO,KACTnH,EAAQrH,EAAKwO,KAEbY,EAAQT,EAEH3C,EAAI,EAAGA,EAAI0D,EAAK1D,IACpBhB,EAAUhL,KAAK2O,GAAS3D,EAAUhL,KAAK2O,GAAQzG,EAAK,IACpDyG,IACA3D,EAAUhL,KAAK2O,GAAS3D,EAAUhL,KAAK2O,GAAQtG,EAAK,IACpDsG,IACA3D,EAAUhL,KAAK2O,GAAS3D,EAAUhL,KAAK2O,GAAQrG,EAAK,IACpDqG,IACA3D,EAAUhL,KAAK2O,GAAS3D,EAAUhL,KAAK2O,GAAQtH,EAAS,IACxDsH,IAEGa,GAEHL,GAAQnE,EAAUhL,KAAMoP,EAAOM,EAAK,IAAM,EAAM,KACjD,MAED,QACCI,QAAQ5K,MAAM,0BAA4ByK,KAK9C,OAAO3E,EAGR,SAAS+E,GAAajH,EAAI4E,EAAGC,EAAGqC,GAC/B,IAAIzF,EAAUX,EAASd,GACnBoF,EAAU3D,EAAQW,OAAO6C,WAAW,MAExCxF,EAAWyH,EAAY,CAAC5M,EAAGpD,KAC1B,IAAIgL,EAAYsE,GACfpB,EACA3D,EAAQS,UACR0C,EACAC,EACA3N,GAnciB,GAsclBkO,EAAQ+B,aAAajF,EAAW,EAAG,GAKnCT,EAAQS,UAAYA,IAItB,SAASkF,GAAepH,EAAII,GAC3BiH,GAAOrH,EAAII,GAAa,GACxBsB,GAAU,IAAK,IAQhB,IAAI4F,IAAS,EACb,SAASC,GAAeV,GAMvB,IALKS,MAqtEN,WAGC,IAAI1C,EAAGC,GAnCR,SAAuBhF,GACtBA,EAAS2H,cAAgB,WACxB,OAAO,GAWJ3H,EAAS+C,kBACZ/C,EAAS+C,iBAAiB,YAAa6E,IAAa,GACpD5H,EAAS+C,iBAAiB,YAAa8E,IAAa,GACpD7H,EAAS+C,iBAAiB,YAAa+E,IAAa,GACpD9H,EAAS+C,iBAAiB,UAAWgF,IAAW,GAChD/H,EAAS+C,iBAAiB,UAAWiF,IAAW,GAChDhI,EAAS+C,iBAAiB,WAAYkF,IAAY,GAClDjI,EAAS+C,iBAAiB,QAASmF,IAAS,GAE5ClI,EAAS+C,iBAAiB,iBAAkBoF,IAAc,GAC1DnI,EAAS+C,iBAAiB,aAAcoF,IAAc,GACtDnI,EAAS+C,iBAAiB,aAAcqF,IAAc,GACtDpI,EAAS+C,iBAAiB,YAAasF,IAAa,GACpDrI,EAAS+C,iBAAiB,WAAYuF,IAAY,IACxCtI,EAASuI,aACnB9C,QAAQ8C,YAAY,eAAgBJ,KAKrCK,CAAcxI,UAGd+E,EAAIzE,OAAOmI,WACXzD,EAAI1E,OAAOoI,YACXpI,OAAOqI,SAAW,SAAUC,GAI3B/G,GAAU,IAAK,CAFXvB,OAAOmI,WACPnI,OAAOoI,eAGZ7G,GAAU,IAAK,CAACkD,EAAGC,IAhuElByB,GACAgB,IAAS,GAGHT,EAAI6B,IAAM7B,EAAI3H,QAAQ,CAC5B,IAAIc,EAAI2B,EAAGC,EAAGgD,EAAGC,EACb8D,EAAU9B,EAAI+B,WAElB,OADApI,EAAaqG,EAAIgC,SACTF,GACP,IAAK,IACJ1H,GAAc,KACdtB,EAAiB3I,KAAK,SAAU,gBAChC4I,EAAQkJ,UAAY,GACpB,MAED,IAAK,IACJ9I,EAAK6G,EAAIkC,SACT/B,QAAQgC,IAAIhJ,GAMZ6B,GAAiB7B,EALjB2B,EAAIkF,EAAIoC,UACRrH,EAAIiF,EAAIoC,UACRrE,EAAIiC,EAAIkC,SACRlE,EAAIgC,EAAIkC,SACKlC,EAAIqC,YAEjB,MAED,IAAK,IAEJ1F,GADAxD,EAAK6G,EAAIkC,UAET,MAED,IAAK,IAEJnF,GADA5D,EAAK6G,EAAIkC,UAET,MAED,IAAK,IAGJjF,GAFA9D,EAAK6G,EAAIkC,SACMlC,EAAIkC,UAEnB,MAED,IAAK,IAEJzE,GADAtE,EAAK6G,EAAIkC,UAET,MAED,IAAK,IACJ/I,EAAK6G,EAAIkC,SACT,IAAII,EAAMtC,EAAIuC,YACV1E,EAAgB,EAANyE,EACVzE,IACH/C,EAAIkF,EAAIoC,UACRrH,EAAIiF,EAAIoC,WAET,IAAItE,EAAiB,EAANwE,EACXxE,IACHC,EAAIiC,EAAIkC,SACRlE,EAAIgC,EAAIkC,UAETtE,GAAqBzE,EAAI0E,EAAS/C,EAAGC,EAAG+C,EAAUC,EAAGC,GACrD,MAED,IAAK,IAEJU,GADAvF,EAAK6G,EAAIkC,UAET,MAED,IAAK,IAEJvD,GADAxF,EAAK6G,EAAIkC,UAET,MAED,IAAK,IAKJ9B,GAJAjH,EAAK6G,EAAIkC,SACTnE,EAAIiC,EAAIkC,SACRlE,EAAIgC,EAAIkC,SACGlC,EAAIwC,YAEf,MAED,IAAK,IAIJjC,GAHApH,EAAK6G,EAAIkC,SACSlC,EAAIqC,YAGtB,MAED,IAAK,IA/FPxH,GAAU,IAAK,IACXzB,EAAKE,QAAQ0D,KAgGd,MAED,IAAK,IACJ1C,GAA+B,GAAhB0F,EAAIkC,SACnB3H,IAAsB,EACtB,MAED,QACC4F,QAAQ5K,MACP,cAAgBuM,IAIpB,OAAO,EAaR,SAASW,GAAYC,GACpBlL,KAAKmL,YAAcD,EACnBlL,KAAKoL,GAAK,IAAIC,WAAWH,GACzBlL,KAAKa,OAASb,KAAKoL,GAAGvK,OACtBb,KAAKqK,IAAM,EAsCZ,SAASiB,GAAcJ,GACtB,IAAI1C,EAAM,IAAIyC,GAAYC,GAC1BvI,GAAoBuC,KAAKsD,GACS,GAA9B7F,GAAoB9B,QAvDzB,WACC,KAAO8B,GAAoB9B,OAAS,GAAG,CACtC,IAAI2H,EAAM7F,GAAoB4I,QAC9B,IAAKrC,GAAeV,GAEnB,YADA7F,GAAoB6I,QAAQhD,IAoD7BiD,GAIF,SAASC,GAAatB,GACrB,IAAIhH,EAAUgH,EAAGjO,OAAOiH,QACxB,YAAe7D,GAAX6D,EAA6BA,EAAQzB,GAClC,EAGR,SAAS0B,GAAUmF,EAAKmD,GACvB,GAAmB,MAAf/I,GAAJ,CAEA,IAAIgJ,EAAW,CAACpD,EAAIqD,WAAW,GAAI1J,EAAYG,GAAewJ,OAAOH,GACjEI,EAAS,IAAIC,YAA8B,EAAlBJ,EAAS/K,QAClCoL,EAAO,IAAIC,SAASH,GACxBH,EAASO,SAAQ,SAAUC,EAAKvH,GAC/BoH,EAAKI,SAAa,EAAJxH,EAAOuH,GAAK,MAG3BxJ,GAAY0J,KAAKP,IAGlB,SAASQ,GAAyBC,EAAMC,EAAMC,GAC7C,IAAIC,EAAM9K,SAMV,GAJA8K,EAAIC,MAAQJ,EACZG,EAAIE,MAAQJ,EACZE,EAAIG,KAAON,EACXG,EAAII,KAAON,EACO,GAAdC,EAAiB,CACpB,IAAItJ,EAAUX,EAASiK,GACvBC,EAAIG,KAAOH,EAAIG,KAAO1J,EAAQE,EAC9BqJ,EAAII,KAAOJ,EAAII,KAAO3J,EAAQG,EAG/B,OAAOoJ,EAGR,SAASK,GAAsB5C,EAAIsC,GAClC,IAGIC,EAAMJ,GAFHnC,EAAG6C,MACH7C,EAAG8C,MACqCR,GAK/C,OAHAtK,EAAQuK,EAAIC,MACZvK,EAAQsK,EAAIE,MAELF,EAGR,SAASQ,GAAwBxL,GAChC,GAAmB,MAAfC,EAAKE,OAAgB,CACxB,IAAKF,EAAKG,YAAa,OAAOH,EAAKE,OACnC,GAAU,GAANH,EAAS,OAAOC,EAAKE,OAE1B,OAAOH,EAGR,SAASyL,KACS,MAAbvK,IAAqBE,KACxBA,IAAsB,EAClBD,GAAcD,GAAU6B,QACvB7B,GAAUwK,QAIjB,SAASC,GAAelD,GACvBnI,IAAa,GACTmI,EAAGmD,WAAUtL,GAxrBG,GAyrBhBmI,EAAGoD,UAASvL,GAvrBM,GAwrBlBmI,EAAGqD,SAAQxL,GAvrBI,GAyrBnBK,EAAgB8H,EAAGsD,UAGpB,SAAStE,GAAYgB,GACpBkD,GAAelD,GACf,IAAIzI,EAAK+J,GAAatB,GAElBC,EAAM2C,GAAsB5C,EADhCzI,EAAKwL,GAAwBxL,IAE7B0B,GAAU,IAAK,CACdd,EACAZ,EACA0I,EAAIuC,MACJvC,EAAIwC,MACJxC,EAAIyC,KACJzC,EAAI0C,KACJ9K,IAIF,SAASoH,GAAYe,GACpBkD,GAAelD,GAEf,IAAIzI,EAAK+J,GAAatB,GACtB7H,EAAsBZ,EAEtB,IAAI0I,EAAM2C,GAAsB5C,EADhCzI,EAAKwL,GAAwBxL,IAGN,IADvBa,EAAkBb,IAEjB0B,GAAU,IAAK,CACdd,EACAZ,EACA0I,EAAIuC,MACJvC,EAAIwC,MACJxC,EAAIyC,KACJzC,EAAI0C,KACJ9K,EApuBuB,IAiwB1B,SAAS+G,GAAOrH,EAAII,EAAaC,GAChC,IAAIqI,EAEA7H,GAAmBb,IACC,GAAnBa,IACH6H,EAAMkC,GAAyBnK,EAAOC,EAAOG,GAC7Ca,GAAU,IAAK,CACdd,EACAC,EACA6H,EAAIuC,MACJvC,EAAIwC,MACJxC,EAAIyC,KACJzC,EAAI0C,KACJ9K,EA7wBoB,KAixBtBoI,EAAMkC,GAAyBnK,EAAOC,EAAOV,GAC7C0B,GAAU,IAAK,CACdd,EACAZ,EACA0I,EAAIuC,MACJvC,EAAIwC,MACJxC,EAAIyC,KACJzC,EAAI0C,KACJ9K,EAzxBqB,IA4xBtBO,EAAkBb,GAGnBC,EAAKE,OAASH,EACdC,EAAKG,YAAcA,EACnBH,EAAKI,SAAWA,EAGjB,SAASwD,KACR,IAAI6E,EACA9H,GAAuBC,IACH,GAAnBA,IACH6H,EAAMkC,GAAyBnK,EAAOC,EAAOG,GAC7Ca,GAAU,IAAK,CACdd,EACAC,EACA6H,EAAIuC,MACJvC,EAAIwC,MACJxC,EAAIyC,KACJzC,EAAI0C,KACJ9K,EA/yBsB,KAmzBG,GAAvBM,IACH8H,EAAMkC,GAAyBnK,EAAOC,EAAOE,GAC7Cc,GAAU,IAAK,CACdd,EACAA,EACA8H,EAAIuC,MACJvC,EAAIwC,MACJxC,EAAIyC,KACJzC,EAAI0C,KACJ9K,EA5zBsB,KAg0BxBO,EAAkBD,GAEnBX,EAAKE,OAAS,KAGf,SAASwH,GAAYc,GACpBkD,GAAelD,GACf,IAAIlH,EAASkH,EAAGlH,OAAS,EACzBjB,GAAwBgB,GAAcC,GACtC,IAAIvB,EAAK+J,GAAatB,GAGlBC,EAAM2C,GAAsB5C,EAFhCzI,EAAKwL,GAAwBxL,IAc7B,OAXmB,MAAfC,EAAKE,QAAgBkH,GAAOrH,GAAI,GAAO,GAC3C0B,GAAU,IAAK,CACdd,EACAZ,EACA0I,EAAIuC,MACJvC,EAAIwC,MACJxC,EAAIyC,KACJzC,EAAI0C,KACJ9K,EACAiB,KAEM,EAGR,SAASqG,GAAUa,GAClBkD,GAAelD,GACf,IAAIlH,EAASkH,EAAGlH,OAAS,EACzBjB,IAAyBgB,GAAcC,GAEvC,IAAIvB,EAAKwL,GADEzB,GAAatB,IAExB,IAAIC,EAAM2C,GAAsB5C,EAAIzI,GAepC,OAbA0B,GAAU,IAAK,CACdd,EACAZ,EACA0I,EAAIuC,MACJvC,EAAIwC,MACJxC,EAAIyC,KACJzC,EAAI0C,KACJ9K,EACAiB,IAGkB,MAAftB,EAAKE,QAAkBF,EAAKI,UAAUwD,MAEnC,EAjSRyF,GAAY0C,UAAUpD,SAAW,WAChC,OAAO5L,OAAOiP,aAAa5N,KAAKoL,GAAGpL,KAAKqK,SAEzCY,GAAY0C,UAAU9C,SAAW,WAChC,OAA8B,GAAvB7K,KAAKoL,GAAGpL,KAAKqK,QAErBY,GAAY0C,UAAU5C,UAAY,WACjC,OAAO/K,KAAKoL,GAAGpL,KAAKqK,QAErBY,GAAY0C,UAAUjD,OAAS,WAC9B,IAAI7E,EAAI7F,KAAKoL,GAAGpL,KAAKqK,MAAQrK,KAAKoL,GAAGpL,KAAKqK,IAAM,IAAM,GAEtD,OADArK,KAAKqK,IAAMrK,KAAKqK,IAAM,EACfxE,GAERoF,GAAY0C,UAAU/C,QAAU,WAC/B,IAAI/E,EAAI7F,KAAK0K,SACb,OAAI7E,EAAI,MAAcA,EAAI,MACdA,GAEboF,GAAY0C,UAAUnD,OAAS,WAC9B,IAAI3E,EACH7F,KAAKoL,GAAGpL,KAAKqK,MACZrK,KAAKoL,GAAGpL,KAAKqK,IAAM,IAAM,IACzBrK,KAAKoL,GAAGpL,KAAKqK,IAAM,IAAM,KACzBrK,KAAKoL,GAAGpL,KAAKqK,IAAM,IAAM,IAE3B,OADArK,KAAKqK,IAAMrK,KAAKqK,IAAM,EACfxE,GAERoF,GAAY0C,UAAU3C,SAAW,WAChC,IAAI6C,EAAO7N,KAAKwK,SACZ3R,EAAO,IAAIwS,WAAWrL,KAAKmL,YAAanL,KAAKqK,IAAKwD,GAEtD,OADA7N,KAAKqK,IAAMrK,KAAKqK,IAAMwD,EACfhV,GA0QR,IAAIiV,GAAe,CAClB,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,IAAQ,SACR,KAAQ,SACR,IAAQ,SACR,IAAQ,SACR,KAAQ,SACR,IAAQ,SACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,KAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,MAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,QACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,KAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,IACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,IAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,MAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,MAAQ,KACR,KAAQ,KACR,KAAQ,KACR,MAAQ,KACR,MAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,KAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,IAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,KACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,SACR,MAAQ,UAKLC,GAAkB,CAErBC,EAAG,CAAC,MAJY,GAKhBC,GAAI,CAAC,MALW,GAQhBC,EAAG,CAAC,MARY,GAUhBC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,OAGN,SAASC,GAAezF,GACvB,MAAwB,qBAAbA,EAAG0F,OAAyB1F,EAAG0F,MAAQ,EAAU1F,EAAG0F,MACxD1F,EAAG2F,QAQX,SAASC,GAAiB5F,GACzB,GAAIA,EAAG2F,WAAWhC,GAAiB,CAClC,IAAIhN,EAAIgN,GAAgB3D,EAAG2F,SACvBE,EAAQ,EAKZ,GAJgB,iBAALlP,IACVkP,EAAQlP,EAAE,GACVA,EAAIA,EAAE,IAES,YAAZqJ,EAAGlG,MAxDQ,EAwDc+L,EAAoB,OAAOlP,EAIzD,IAAKqJ,EAAGoD,UAAYpD,EAAGqD,OAAQ,OAAO,KAEtC,IAAIyC,EAASL,GAAezF,GAG5B,OAAQ8F,GACP,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IAGL,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GAKX,GAAM9F,EAAGmD,SACR,OAAQ2C,GACP,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,IACT,MACD,KAAK,GACJA,EAAS,IACT,MACD,KAAK,GACJA,EAAS,IACT,MACD,KAAK,GACJA,EAAS,IACT,MACD,KAAK,GACJA,EAAS,QAGL,GAAIA,GAAU,IAAMA,GAAU,GAEpCA,GAAU,QACJ,GAAuB,IAAnB9F,EAAG+F,YAEb,OAAQD,GACP,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,GACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,EAAS,GACT,MACD,KAAK,IACJA,E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","file":"static/js/main.cd2fd16a.chunk.js","sourcesContent":["import Events from \"events\";\n\nexport default class Emitter<EventList> {\n\tprivate emitter = new Events().setMaxListeners(0); // Infinity\n\n\tpublic call = <T extends keyof EventList>(event: T, data: EventList[T]) =>\n\t\tthis.emitter.emit(event as string, data);\n\n\tpublic on = <T extends keyof EventList>(\n\t\tevent: T,\n\t\tlistener: (data: EventList[T]) => void\n\t) => {\n\t\tthis.emitter.on(event as string, listener);\n\t\treturn {\n\t\t\tremove: () => this.off(event, listener),\n\t\t\ton: this.on,\n\t\t\tcall: (data: EventList[T]) => this.call(event, data),\n\t\t};\n\t};\n\n\tpublic off = <T extends keyof EventList>(\n\t\tevent: T,\n\t\tlistener: (data: EventList[T]) => void\n\t) => this.emitter.off(event as string, listener);\n}\n","import React, { PropsWithChildren } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { ColorVariants } from \"@root/theme\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\n\nconst useStyle = makeStyles((theme: Theme) => ({\n\troot: {\n\t\tpadding: 5,\n\t\tborderRadius: 14,\n\t\tboxShadow: `-5px 6px 10px -1px ${theme.shadowColor}`,\n\t},\n\tmainBackground: {\n\t\tbackground: theme.background.main,\n\t},\n\tdarkBackground: {\n\t\tbackground: theme.background.dark,\n\t},\n\tlightBackground: {\n\t\tbackground: theme.background.light,\n\t},\n\tmainBackgroundTransparent: {\n\t\tbackground: theme.background.transparent || theme.background.main,\n\t},\n\tdarkBackgroundTransparent: {\n\t\tbackground: theme.background.transparentDark || theme.background.dark,\n\t},\n\tlightBackgroundTransparent: {\n\t\tbackground: theme.background.transparentLight || theme.background.light,\n\t},\n}));\n\ninterface CardProps {\n\tclassName?: string;\n\tcolorVariant?: ColorVariants;\n}\n\nconst Card = ({\n\tchildren,\n\tclassName,\n\tcolorVariant,\n}: PropsWithChildren<CardProps>) => {\n\tconst classes = useStyle();\n\n\tconst backgroundClassesMap: { [Color in ColorVariants]: string } = {\n\t\tdark: classes.darkBackground,\n\t\tlight: classes.lightBackground,\n\t\tmain: classes.mainBackground,\n\t\ttransparent: classes.mainBackgroundTransparent,\n\t\ttransparentDark: classes.darkBackgroundTransparent,\n\t\ttransparentLight: classes.lightBackgroundTransparent,\n\t};\n\treturn (\n\t\t<div\n\t\t\tclassName={`${classes.root} ${\n\t\t\t\tbackgroundClassesMap[colorVariant || \"main\"]\n\t\t\t} ${className || \"\"}`}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nexport default Card;\n","import React, { useState, PropsWithChildren } from \"react\";\nimport { useTheme, makeStyles } from \"@material-ui/styles\";\nimport { Colors, ColorVariants } from \"@root/theme\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\n\nconst useStyle = (\n\ttextColor: string,\n\tbackgroundColor: string,\n\tborder: string,\n\tborderBottom: string\n) =>\n\tmakeStyles(() => ({\n\t\troot: {\n\t\t\tmaxHeight: 35,\n\t\t\tfontSize: 25,\n\t\t\tcolor: textColor,\n\t\t\tbackgroundColor,\n\t\t\tborder,\n\t\t\tborderBottom,\n\t\t\t\"&:focus\": {\n\t\t\t\toutline: \"none\",\n\t\t\t},\n\t\t},\n\t}));\n\ninterface TextFieldProps {\n\tonChange?: (newValue: string, e: React.ChangeEvent<HTMLInputElement>) => void;\n\tvalue?: string | number | string[] | undefined;\n\tplaceholder?: string;\n\tclassName?: string;\n\tcolor?: Colors;\n\tvariant?: ColorVariants;\n\tborder?: boolean;\n\tborderBottom?: boolean;\n\ttransparent?: boolean;\n\tdefaultValue?: string | number | string[] | undefined;\n}\n\nconst TextField = ({\n\tchildren,\n\tclassName,\n\tcolor,\n\tvariant,\n\tvalue,\n\tonChange,\n\tdefaultValue,\n\tborder,\n\ttransparent,\n\tplaceholder,\n\tborderBottom,\n}: PropsWithChildren<TextFieldProps>) => {\n\tconst theme: Theme = useTheme();\n\tconst selectedColor = theme[color || \"background\"];\n\tconst textColor = selectedColor.text;\n\tconst borderValue = border ? `1px solid ${textColor}` : \"none\";\n\tconst borderBottomValue =\n\t\tborderBottom !== false ? `1px solid ${textColor}` : \"none\";\n\tconst backgroundColor = transparent\n\t\t? selectedColor[variant || \"main\"] || selectedColor.main\n\t\t: \"transparent\";\n\tconst classes = useStyle(\n\t\ttextColor,\n\t\tbackgroundColor,\n\t\tborderValue,\n\t\tborderBottomValue\n\t)();\n\n\tconst [currentValue, setCurrentValue] = useState(defaultValue || \"\");\n\tconst onInputEvent = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\tconst newValue = e.target.value;\n\t\tsetCurrentValue(newValue);\n\t\tif (onChange) {\n\t\t\tonChange(newValue, e);\n\t\t}\n\t};\n\n\treturn (\n\t\t<input\n\t\t\tplaceholder={placeholder}\n\t\t\tvalue={value || currentValue}\n\t\t\tonChange={onInputEvent}\n\t\t\tclassName={`${classes.root} ${className || \"\"}`}\n\t\t>\n\t\t\t{children}\n\t\t</input>\n\t);\n};\n\nexport default TextField;\n","import React, { CSSProperties, PropsWithChildren } from \"react\";\nimport { useTheme, makeStyles } from \"@material-ui/styles\";\nimport { Colors } from \"@root/theme\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\n\nconst useStyle = (\n\ttextColor: string,\n\tbackgroundColor: string,\n\tbackgroundColorHover: string,\n\tborder: string\n) =>\n\tmakeStyles((theme: Theme) => ({\n\t\troot: {\n\t\t\tborderRadius: 4,\n\t\t\tminHeight: 35,\n\t\t\tminWidth: 80,\n\t\t\tpadding: 4,\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tcolor: textColor,\n\t\t\tbackground: backgroundColor,\n\t\t\tborder,\n\t\t\talignItems: \"center\",\n\t\t\tcursor: \"pointer\",\n\t\t\t\"&:hover\": {\n\t\t\t\tborder,\n\t\t\t\tbackgroundBlendMode: \"multiply\",\n\t\t\t\tbackgroundColor: backgroundColorHover,\n\t\t\t},\n\t\t},\n\t\tshadow: {\n\t\t\tboxShadow: `-3px 4px 6px -1px ${theme.shadowColor}`,\n\t\t},\n\t}));\n\ntype Variants = \"main\" | \"dark\" | \"light\";\n\ninterface ButtonProps {\n\tonClick?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n\tclassName?: string;\n\tcolor?: Colors;\n\tvariant?: Variants;\n\tborder?: boolean;\n\ttransparent?: boolean;\n\tshadow?: boolean;\n\tstyle?: CSSProperties;\n}\n\nconst Button = ({\n\tchildren,\n\tclassName,\n\tcolor,\n\tvariant,\n\tborder,\n\ttransparent,\n\tonClick,\n\tstyle,\n\tshadow,\n}: PropsWithChildren<ButtonProps>) => {\n\tconst theme: Theme = useTheme();\n\tconst selectedColor = theme[color || \"background\"];\n\tconst textColor = selectedColor.text;\n\tconst borderValue = border ? `1px solid ${textColor}` : \"none\";\n\tconst backgroundColorMap: { [Variant in Variants]: string } = {\n\t\tdark: selectedColor.transparentDark || selectedColor.dark,\n\t\tmain: selectedColor.transparent || selectedColor.main,\n\t\tlight: selectedColor.transparentLight || selectedColor.light,\n\t};\n\tconst backgroundColor =\n\t\ttransparent !== true\n\t\t\t? backgroundColorMap[variant || \"main\"] ||\n\t\t\t  selectedColor.transparent ||\n\t\t\t  selectedColor.main\n\t\t\t: \"transparent\";\n\tconst backgroundColorHover =\n\t\tselectedColor[variant || \"main\"] || selectedColor.main;\n\tconst classes = useStyle(\n\t\ttextColor,\n\t\tbackgroundColor,\n\t\tbackgroundColorHover,\n\t\tborderValue\n\t)();\n\n\treturn (\n\t\t<div\n\t\t\tonClick={onClick}\n\t\t\tstyle={style}\n\t\t\tclassName={`${classes.root} ${shadow ? classes.shadow : \"\"} ${\n\t\t\t\tclassName || \"\"\n\t\t\t}`}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nexport default Button;\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport Card from \"@components/card\";\nimport TextField from \"@components/textField\";\nimport Button from \"@components/button\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { Link } from \"react-router-dom\";\n\ninterface LoginProps {\n\tonLogin: (host: string, port: number, useHttps: boolean) => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n\troot: {\n\t\tposition: \"fixed\",\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tbackground: 'url(\"https://picsum.photos/id/1039/1920/1080\")',\n\t},\n\tcard: {\n\t\twidth: 500,\n\t\tmaxWidth: \"80%\",\n\t\theight: 400,\n\t\tmaxHeight: \"70%\",\n\t\tpadding: \"70px 60px\",\n\t\tdisplay: \"flex\",\n\t\tcolor: theme.background.text,\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"space-between\",\n\t\tbackdropFilter: \"blur(5px)\",\n\t\tuserSelect: \"none\",\n\t},\n\tbarButtonsContainer: {\n\t\tposition: \"relative\",\n\t\ttop: 30,\n\t\tleft: \"91%\",\n\t\twidth: 40,\n\t\theight: 20,\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"space-between\",\n\t},\n\tbarButton: {\n\t\twidth: 15,\n\t\theight: 15,\n\t\tborderRadius: \"50%\",\n\t\tzIndex: 2,\n\t\tborder: \"1px solid #0004\",\n\t},\n\tbarButtonExit: {\n\t\tcursor: \"pointer\",\n\t\tbackground: theme.error.main,\n\t\t\"&:hover\": {\n\t\t\tbackground: theme.error.dark,\n\t\t},\n\t},\n\tflex: {\n\t\tdisplay: \"flex\",\n\t},\n\tbarButtonCollaps: {\n\t\tcursor: \"pointer\",\n\t\tbackground: theme.success.main,\n\t\t\"&:hover\": {\n\t\t\tbackground: theme.success.dark,\n\t\t},\n\t},\n\tlink: {\n\t\ttextDecoration: \"none\",\n\t},\n}));\n\nconst Login = (props: LoginProps) => {\n\tconst classes = useStyles();\n\tconst [host, setHost] = useState(\"localhost\");\n\tconst [port, setPort] = useState(5000);\n\tconst [https /* , setHttps */] = useState(false);\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<div>\n\t\t\t\t<div className={classes.barButtonsContainer}>\n\t\t\t\t\t<div className={`${classes.barButton} ${classes.barButtonCollaps}`} />\n\t\t\t\t\t<div className={`${classes.barButton} ${classes.barButtonExit}`} />\n\t\t\t\t</div>\n\t\t\t\t<Card className={classes.card}>\n\t\t\t\t\t<h2>Login to your server</h2>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvalue={host}\n\t\t\t\t\t\tonChange={(newValue) => setHost(newValue || \"\")}\n\t\t\t\t\t\tplaceholder=\"host\"\n\t\t\t\t\t></TextField>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvalue={String(port || \"\")}\n\t\t\t\t\t\tonChange={(newValue) => setPort(Number(newValue))}\n\t\t\t\t\t\tplaceholder=\"port\"\n\t\t\t\t\t></TextField>\n\t\t\t\t\t{/* <div className={classes.flex}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tchecked={https}\n\t\t\t\t\t\t\tonChange={(e) => setHttps(e.target.checked)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<label>Use HTTPS</label>\n\t\t\t\t\t</div> */}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"main\"\n\t\t\t\t\t\tonClick={() => props.onLogin(host, port, https)}\n\t\t\t\t\t\tcolor=\"background\"\n\t\t\t\t\t\tborder\n\t\t\t\t\t>\n\t\t\t\t\t\tLogin\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Link to=\"/demo\" className={classes.link}>\n\t\t\t\t\t\t<Button variant=\"main\" color=\"background\" border>\n\t\t\t\t\t\t\tor instead you can visit the Demo\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Link>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Login;\n","import React from \"react\";\nimport { IconBaseProps } from \"react-icons\";\nimport * as FcIcons from \"react-icons/fc\";\nimport * as VSCIcons from \"react-icons/vsc\";\nimport { IconBase } from \"react-icons/lib/cjs/iconBase\";\nimport { IconNames } from \"@web-desktop-environment/interfaces/lib/shared/icon\";\nimport \"./icon.css\";\n\nconst Icon = (\n\tprops: IconBaseProps & {\n\t\tname: IconNames;\n\t\tcontainerClassName?: string;\n\t\tparentFill?: boolean;\n\t}\n) => {\n\treturn (\n\t\t<span className={`icon-parent ${props.containerClassName || \"\"}`}>\n\t\t\t{React.createElement(\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-var-requires\n\t\t\t\t{ ...FcIcons, ...VSCIcons }[props.name] || IconBase,\n\t\t\t\tprops\n\t\t\t)}\n\t\t</span>\n\t);\n};\nexport default Icon;\n","import React, { PropsWithChildren, useState } from \"react\";\n\nconst MountUnmountAnimation = (\n\tprops: PropsWithChildren<{ className: string; mount: boolean }>\n) => {\n\tconst [mount, setMount] = useState(props.mount);\n\treturn mount || props.mount ? (\n\t\t<div\n\t\t\tclassName={props.className}\n\t\t\tonAnimationEnd={() => {\n\t\t\t\tsetMount(props.mount);\n\t\t\t}}\n\t\t>\n\t\t\t{props.children}\n\t\t</div>\n\t) : null;\n};\n\nexport default MountUnmountAnimation;\n","import React from \"react\";\n\nexport const ConnectionContext = React.createContext<\n\t{ port: number; host: string } | undefined\n>(undefined);\n","import React from \"react\";\n\nclass StateComponent<State extends object> extends React.Component<\n\t{\n\t\tdefaultState: State;\n\t\tonMount?: (state: State, setState: (state: Partial<State>) => void) => void;\n\t\tchildren: (\n\t\t\tstate: State,\n\t\t\tsetState: (state: Partial<State>) => void\n\t\t) => JSX.Element;\n\t},\n\tState\n> {\n\trealstate = this.props.defaultState;\n\tstate = this.props.defaultState;\n\n\tupdateState = (state: Partial<State>) => {\n\t\tthis.setState({ ...this.state, ...state });\n\t\tthis.realstate = { ...this.realstate, ...state };\n\t};\n\n\tcomponentDidMount = () => {\n\t\tif (this.props.onMount) {\n\t\t\tthis.props.onMount(this.realstate, this.updateState);\n\t\t}\n\t};\n\n\trender() {\n\t\treturn this.props.children(this.realstate, this.updateState);\n\t}\n}\n\nexport default StateComponent;\n","import Color from \"@ctrl/tinycolor\";\n\nexport const transparent = (color: string, alpha = 0.6) =>\n\t\"#\" + Color(color).setAlpha(alpha).toHex8();\n\n// from https://stackoverflow.com/questions/35969656/how-can-i-generate-the-opposite-color-according-to-current-color\n\nconst padZero = (str: string) => {\n\tconst len = 2;\n\tconst zeros = new Array(len).join(\"0\");\n\treturn (zeros + str).slice(-len);\n};\n\nexport const invertColor = (hex: string) => {\n\tif (hex.indexOf(\"#\") === 0) {\n\t\thex = hex.slice(1);\n\t}\n\t// convert 3-digit hex to 6-digits.\n\tif (hex.length === 3) {\n\t\thex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n\t}\n\tif (hex.length !== 6) {\n\t\tthrow new Error(\"Invalid HEX color.\");\n\t}\n\t// invert color components\n\tconst r = (255 - parseInt(hex.slice(0, 2), 16)).toString(16),\n\t\tg = (255 - parseInt(hex.slice(2, 4), 16)).toString(16),\n\t\tb = (255 - parseInt(hex.slice(4, 6), 16)).toString(16);\n\t// pad each with zeros and return\n\treturn \"#\" + padZero(r) + padZero(g) + padZero(b);\n};\n","/* eslint-disable */\n/* Helper functions for debugging */\n\nconst { inflateRaw } = require(\"zlib\");\nconst { default: WindowManager } = require(\"../state/WindowManager\");\nconst { GTKBridgeEmitter } = require(\"./state\");\n\n\nconst rootDiv = document.createElement(\"div\");\ndocument.body.appendChild(rootDiv);\nrootDiv.id = \"gtkRoot\";\n\nvar logDiv = null;\nfunction log(str) {\n\tif (!logDiv) {\n\t\tlogDiv = document.createElement(\"div\");\n\t\trootDiv.appendChild(logDiv);\n\t\tlogDiv.style[\"position\"] = \"absolute\";\n\t\tlogDiv.style[\"right\"] = \"0px\";\n\t}\n\tlogDiv.appendChild(document.createTextNode(str));\n\tlogDiv.appendChild(document.createElement(\"br\"));\n}\n\nfunction getStackTrace() {\n\tvar callstack = [];\n\tvar isCallstackPopulated = false;\n\ttry {\n\t\ti.dont.exist += 0;\n\t} catch (e) {\n\t\tif (e.stack) {\n\t\t\t// Firefox\n\t\t\tvar lines = e.stack.split(\"\\n\");\n\t\t\tfor (var i = 0, len = lines.length; i < len; i++) {\n\t\t\t\tif (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n\t\t\t\t\tcallstack.push(lines[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove call to getStackTrace()\n\t\t\tcallstack.shift();\n\t\t\tisCallstackPopulated = true;\n\t\t} else if (window.opera && e.message) {\n\t\t\t// Opera\n\t\t\tvar lines = e.message.split(\"\\n\");\n\t\t\tfor (var i = 0, len = lines.length; i < len; i++) {\n\t\t\t\tif (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n\t\t\t\t\tvar entry = lines[i];\n\t\t\t\t\t// Append next line also since it has the file info\n\t\t\t\t\tif (lines[i + 1]) {\n\t\t\t\t\t\tentry += \" at \" + lines[i + 1];\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t\tcallstack.push(entry);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove call to getStackTrace()\n\t\t\tcallstack.shift();\n\t\t\tisCallstackPopulated = true;\n\t\t}\n\t}\n\tif (!isCallstackPopulated) {\n\t\t//IE and Safari\n\t\tvar currentFunction = arguments.callee.caller;\n\t\twhile (currentFunction) {\n\t\t\tvar fn = currentFunction.toString();\n\t\t\tvar fname =\n\t\t\t\tfn.substring(fn.indexOf(\"function\") + 8, fn.indexOf(\"(\")) ||\n\t\t\t\t\"anonymous\";\n\t\t\tcallstack.push(fname);\n\t\t\tcurrentFunction = currentFunction.caller;\n\t\t}\n\t}\n\treturn callstack;\n}\n\nfunction logStackTrace(len) {\n\tvar callstack = getStackTrace();\n\tvar end = callstack.length;\n\tif (len > 0) end = Math.min(len + 1, end);\n\tfor (var i = 1; i < end; i++) log(callstack[i]);\n}\n\nfunction resizeCanvas(canvas, w, h) {\n\t/* Canvas resize clears the data, so we need to save it first */\n\tvar tmpCanvas = canvas.ownerDocument.createElement(\"canvas\");\n\ttmpCanvas.width = canvas.width;\n\ttmpCanvas.height = canvas.height;\n\tvar tmpContext = tmpCanvas.getContext(\"2d\");\n\ttmpContext.globalCompositeOperation = \"copy\";\n\ttmpContext.drawImage(canvas, 0, 0, tmpCanvas.width, tmpCanvas.height);\n\n\tcanvas.width = w;\n\tcanvas.height = h;\n\n\tvar context = canvas.getContext(\"2d\");\n\n\tcontext.globalCompositeOperation = \"copy\";\n\tcontext.drawImage(tmpCanvas, 0, 0, tmpCanvas.width, tmpCanvas.height);\n}\n\nvar grab = new Object();\ngrab.window = null;\ngrab.ownerEvents = false;\ngrab.implicit = false;\nvar keyDownList = [];\nvar lastSerial = 0;\nvar lastX = 0;\nvar lastY = 0;\nvar lastState;\nvar lastTimeStamp = 0;\nvar realWindowWithMouse = 0;\nvar windowWithMouse = 0;\nvar surfaces = {};\nvar stackingOrder = [];\nvar outstandingCommands = new Array();\nexport var inputSocket = null;\nvar debugDecoding = false;\nvar fakeInput = null;\nvar showKeyboard = false;\nvar showKeyboardChanged = false;\nvar firstTouchDownId = null;\n\nvar GDK_CROSSING_NORMAL = 0;\nvar GDK_CROSSING_GRAB = 1;\nvar GDK_CROSSING_UNGRAB = 2;\n\n// GdkModifierType\nvar GDK_SHIFT_MASK = 1 << 0;\nvar GDK_LOCK_MASK = 1 << 1;\nvar GDK_CONTROL_MASK = 1 << 2;\nvar GDK_MOD1_MASK = 1 << 3;\nvar GDK_MOD2_MASK = 1 << 4;\nvar GDK_MOD3_MASK = 1 << 5;\nvar GDK_MOD4_MASK = 1 << 6;\nvar GDK_MOD5_MASK = 1 << 7;\nvar GDK_BUTTON1_MASK = 1 << 8;\nvar GDK_BUTTON2_MASK = 1 << 9;\nvar GDK_BUTTON3_MASK = 1 << 10;\nvar GDK_BUTTON4_MASK = 1 << 11;\nvar GDK_BUTTON5_MASK = 1 << 12;\nvar GDK_SUPER_MASK = 1 << 26;\nvar GDK_HYPER_MASK = 1 << 27;\nvar GDK_META_MASK = 1 << 28;\nvar GDK_RELEASE_MASK = 1 << 30;\n\nfunction getButtonMask(button) {\n\tif (button == 1) return GDK_BUTTON1_MASK;\n\tif (button == 2) return GDK_BUTTON2_MASK;\n\tif (button == 3) return GDK_BUTTON3_MASK;\n\tif (button == 4) return GDK_BUTTON4_MASK;\n\tif (button == 5) return GDK_BUTTON5_MASK;\n\treturn 0;\n}\n\nfunction sendConfigureNotify(surface) {\n\tsendInput(\"w\", [\n\t\tsurface.id,\n\t\tsurface.x,\n\t\tsurface.y,\n\t\tsurface.width,\n\t\tsurface.height,\n\t]);\n}\n\n/**\n * register web-desktop-environment window\n * @param {{ toplevelElement: HTMLElement }} surface\n */\nfunction addWindow(surface) {\n\tlet layer = 0;\n\tconst id = WindowManager.addWindow(\n\t\t\"gnome-window\",\n\t\t{ type: \"icon\", icon: \"FcLinux\" },\n\t\t{ minimized: false }\n\t);\n\tWindowManager.emitter.on(\n\t\t\"updateZIndex\",\n\t\t({ id: currentId, layer: currentLayer }) => {\n\t\t\tif (currentId === id) {\n\t\t\t\tlayer = currentLayer;\n\t\t\t}\n\t\t}\n\t);\n\tsurface.toplevelElement.addEventListener(\"mousedown\", () => {\n\t\tWindowManager.setActiveWindow(id);\n\t});\n\tWindowManager.reloadWindowsLayers();\n\tsurface.toplevelElement.focus();\n\tconst doBeforeEveryFrame = () => {\n\t\tsurface.toplevelElement.style.zIndex = String(layer);\n\t\trequestAnimationFrame(doBeforeEveryFrame);\n\t};\n\tdoBeforeEveryFrame();\n\tconst i = setInterval(() => {\n\t\tif (!rootDiv.contains(surface.toplevelElement)) {\n\t\t\tWindowManager.closeWindow(id);\n\t\t\tclearInterval(i);\n\t\t}\n\t});\n}\n\nvar positionIndex = 0;\nfunction cmdCreateSurface(id, x, y, width, height, isTemp) {\n\tvar surface = {\n\t\tid: id,\n\t\tx: x,\n\t\ty: y,\n\t\twidth: width,\n\t\theight: height,\n\t\tisTemp: isTemp,\n\t};\n\tsurface.positioned = isTemp;\n\tsurface.transientParent = 0;\n\tsurface.visible = false;\n\tsurface.imageData = null;\n\n\tvar canvas = document.createElement(\"canvas\");\n\tcanvas.width = width;\n\tcanvas.height = height;\n\tcanvas.surface = surface;\n\tsurface.canvas = canvas;\n\tvar toplevelElement;\n\n\ttoplevelElement = canvas;\n\trootDiv.appendChild(canvas);\n\n\tsurface.toplevelElement = toplevelElement;\n\tif (!isTemp) {\n\t\taddWindow(surface);\n\t}\n\ttoplevelElement.style[\"position\"] = \"absolute\";\n\t/* This positioning isn't strictly right for apps in another topwindow,\n\t * but that will be fixed up when showing. */\n\ttoplevelElement.style[\"left\"] = surface.x + \"px\";\n\ttoplevelElement.style[\"top\"] = surface.y + \"px\";\n\ttoplevelElement.style[\"display\"] = \"inline\";\n\n\ttoplevelElement.style[\"visibility\"] = \"hidden\";\n\n\tsurfaces[id] = surface;\n\tstackingOrder.push(surface);\n\n\tsendConfigureNotify(surface);\n}\n\nfunction cmdShowSurface(id) {\n\tvar surface = surfaces[id];\n\n\tif (surface.visible) return;\n\tsurface.visible = true;\n\n\tvar xOffset = surface.x;\n\tvar yOffset = surface.y;\n\n\tsurface.toplevelElement.style[\"left\"] = xOffset + \"px\";\n\tsurface.toplevelElement.style[\"top\"] = yOffset + \"px\";\n\tsurface.toplevelElement.style[\"visibility\"] = \"visible\";\n\n\trestackWindows();\n}\n\nfunction cmdHideSurface(id) {\n\tif (grab.window == id) doUngrab();\n\n\tvar surface = surfaces[id];\n\n\tif (!surface.visible) return;\n\tsurface.visible = false;\n\n\tvar element = surface.toplevelElement;\n\n\telement.style[\"visibility\"] = \"hidden\";\n}\n\nfunction cmdSetTransientFor(id, parentId) {\n\tvar surface = surfaces[id];\n\n\tif (surface.transientParent == parentId) return;\n\n\tsurface.transientParent = parentId;\n\tif (parentId != 0 && surfaces[parentId]) {\n\t\tmoveToHelper(surface, stackingOrder.indexOf(surfaces[parentId]) + 1);\n\t}\n\n\tif (surface.visible) {\n\t\trestackWindows();\n\t}\n}\n\nfunction restackWindows() {\n\tstackingOrder = stackingOrder.filter((v) => v);\n\tfor (var i = 0; i < stackingOrder.length; i++) {\n\t\tvar surface = stackingOrder[i];\n\t\tsurface.toplevelElement.style.zIndex = i;\n\t}\n}\n\nfunction moveToHelper(surface, position) {\n\tvar i = stackingOrder.indexOf(surface);\n\tstackingOrder.splice(i, 1);\n\tif (position != undefined) stackingOrder.splice(position, 0, surface);\n\telse stackingOrder.push(surface);\n\n\tfor (var cid in surfaces) {\n\t\tvar child = surfaces[cid];\n\t\tif (child.transientParent == (surface ? surface.id : null))\n\t\t\tmoveToHelper(child, stackingOrder.indexOf(surface) + 1);\n\t}\n}\n\nfunction cmdDeleteSurface(id) {\n\tif (grab.window == id) doUngrab();\n\n\tvar surface = surfaces[id];\n\tvar i = stackingOrder.indexOf(surface);\n\tif (i >= 0) stackingOrder.splice(i, 1);\n\tvar canvas = surface.canvas;\n\tcanvas.parentNode.removeChild(canvas);\n\tdelete surfaces[id];\n}\n\nfunction cmdMoveResizeSurface(id, has_pos, x, y, has_size, w, h) {\n\tvar surface = surfaces[id];\n\tif (has_pos) {\n\t\tsurface.positioned = true;\n\t\tsurface.x = x;\n\t\tsurface.y = y;\n\t}\n\tif (has_size) {\n\t\tsurface.width = w;\n\t\tsurface.height = h;\n\t}\n\n\tif (has_size) resizeCanvas(surface.canvas, w, h);\n\n\tif (surface.visible) {\n\t\tif (has_pos) {\n\t\t\tvar xOffset = surface.x;\n\t\t\tvar yOffset = surface.y;\n\n\t\t\tvar element = surface.canvas;\n\n\t\t\telement.style[\"left\"] = xOffset + \"px\";\n\t\t\telement.style[\"top\"] = yOffset + \"px\";\n\t\t}\n\t}\n\n\tsendConfigureNotify(surface);\n}\n\nfunction cmdRaiseSurface(id) {\n\tvar surface = surfaces[id];\n\n\tmoveToHelper(surface);\n\trestackWindows();\n}\n\nfunction cmdLowerSurface(id) {\n\tvar surface = surfaces[id];\n\n\tmoveToHelper(surface, 0);\n\trestackWindows();\n}\n\nfunction copyRect(src, srcX, srcY, dest, destX, destY, width, height) {\n\t// Clip to src\n\tif (srcX + width > src.width) width = src.width - srcX;\n\tif (srcY + height > src.height) height = src.height - srcY;\n\n\t// Clip to dest\n\tif (destX + width > dest.width) width = dest.width - destX;\n\tif (destY + height > dest.height) height = dest.height - destY;\n\n\tvar srcRect = src.width * 4 * srcY + srcX * 4;\n\tvar destRect = dest.width * 4 * destY + destX * 4;\n\n\tfor (var i = 0; i < height; i++) {\n\t\tvar line = src.data.subarray(srcRect, srcRect + width * 4);\n\t\tdest.data.set(line, destRect);\n\t\tsrcRect += src.width * 4;\n\t\tdestRect += dest.width * 4;\n\t}\n}\n\nfunction markRun(dest, start, length, r, g, b) {\n\tfor (var i = start; i < start + length * 4; i += 4) {\n\t\tdest[i + 0] = (dest[i + 0] / 2) | (0 + r);\n\t\tdest[i + 1] = (dest[i + 1] / 2) | (0 + g);\n\t\tdest[i + 2] = (dest[i + 2] / 2) | (0 + b);\n\t}\n}\n\nfunction markRect(src, srcX, srcY, dest, destX, destY, width, height, r, g, b) {\n\t// Clip to src\n\tif (srcX + width > src.width) width = src.width - srcX;\n\tif (srcY + height > src.height) height = src.height - srcY;\n\n\t// Clip to dest\n\tif (destX + width > dest.width) width = dest.width - destX;\n\tif (destY + height > dest.height) height = dest.height - destY;\n\n\tvar destRect = dest.width * 4 * destY + destX * 4;\n\n\tfor (var i = 0; i < height; i++) {\n\t\tif (i == 0 || i == height - 1) markRun(dest.data, destRect, width, 0, 0, 0);\n\t\telse {\n\t\t\tmarkRun(dest.data, destRect, 1, 0, 0, 0);\n\t\t\tmarkRun(dest.data, destRect + 4, width - 2, r, g, b);\n\t\t\tmarkRun(dest.data, destRect + 4 * width - 4, 1, 0, 0, 0);\n\t\t}\n\t\tdestRect += dest.width * 4;\n\t}\n}\n\nfunction decodeBuffer(context, oldData, w, h, data, debug) {\n\tvar i, j;\n\tvar imageData = context.createImageData(w, h);\n\n\tif (oldData != null) {\n\t\t// Copy old frame into new buffer\n\t\tcopyRect(oldData, 0, 0, imageData, 0, 0, oldData.width, oldData.height);\n\t}\n\n\tvar src = 0;\n\tvar dest = 0;\n\n\twhile (src < data.length) {\n\t\tvar b = data[src++];\n\t\tvar g = data[src++];\n\t\tvar r = data[src++];\n\t\tvar alpha = data[src++];\n\t\tvar len, start;\n\n\t\tif (alpha != 0) {\n\t\t\t// Regular data is red\n\t\t\tif (debug) {\n\t\t\t\tr = (r / 2) | (0 + 128);\n\t\t\t\tg = (g / 2) | 0;\n\t\t\t\tb = (r / 2) | 0;\n\t\t\t}\n\n\t\t\timageData.data[dest++] = r;\n\t\t\timageData.data[dest++] = g;\n\t\t\timageData.data[dest++] = b;\n\t\t\timageData.data[dest++] = alpha;\n\t\t} else {\n\t\t\tvar cmd = r & 0xf0;\n\t\t\tswitch (cmd) {\n\t\t\t\tcase 0x00: // Transparent pixel\n\t\t\t\t\t//log(\"Got transparent\");\n\t\t\t\t\timageData.data[dest++] = 0;\n\t\t\t\t\timageData.data[dest++] = 0;\n\t\t\t\t\timageData.data[dest++] = 0;\n\t\t\t\t\timageData.data[dest++] = 0;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 0x10: // Delta 0 run\n\t\t\t\t\tlen = ((r & 0xf) << 16) | (g << 8) | b;\n\t\t\t\t\t//log(\"Got delta0, len: \" + len);\n\t\t\t\t\tdest += len * 4;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 0x20: // Block reference\n\t\t\t\t\tvar blockid = ((r & 0xf) << 16) | (g << 8) | b;\n\n\t\t\t\t\tvar block_stride = ((oldData.width + 32 - 1) / 32) | 0;\n\t\t\t\t\tvar srcY = ((blockid / block_stride) | 0) * 32;\n\t\t\t\t\tvar srcX = (blockid % block_stride | 0) * 32;\n\n\t\t\t\t\tb = data[src++];\n\t\t\t\t\tg = data[src++];\n\t\t\t\t\tr = data[src++];\n\t\t\t\t\talpha = data[src++];\n\n\t\t\t\t\tvar destX = (alpha << 8) | r;\n\t\t\t\t\tvar destY = (g << 8) | b;\n\n\t\t\t\t\tcopyRect(oldData, srcX, srcY, imageData, destX, destY, 32, 32);\n\t\t\t\t\tif (debug)\n\t\t\t\t\t\t// blocks are green\n\t\t\t\t\t\tmarkRect(\n\t\t\t\t\t\t\toldData,\n\t\t\t\t\t\t\tsrcX,\n\t\t\t\t\t\t\tsrcY,\n\t\t\t\t\t\t\timageData,\n\t\t\t\t\t\t\tdestX,\n\t\t\t\t\t\t\tdestY,\n\t\t\t\t\t\t\t32,\n\t\t\t\t\t\t\t32,\n\t\t\t\t\t\t\t0x00,\n\t\t\t\t\t\t\t128,\n\t\t\t\t\t\t\t0x00\n\t\t\t\t\t\t);\n\n\t\t\t\t\t//log(\"Got block, id: \" + blockid +  \"(\" + srcX +\",\" + srcY + \") at \" + destX + \",\" + destY);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 0x30: // Color run\n\t\t\t\t\tlen = ((r & 0xf) << 16) | (g << 8) | b;\n\t\t\t\t\t//log(\"Got color run, len: \" + len);\n\n\t\t\t\t\tb = data[src++];\n\t\t\t\t\tg = data[src++];\n\t\t\t\t\tr = data[src++];\n\t\t\t\t\talpha = data[src++];\n\n\t\t\t\t\tstart = dest;\n\n\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\timageData.data[dest++] = r;\n\t\t\t\t\t\timageData.data[dest++] = g;\n\t\t\t\t\t\timageData.data[dest++] = b;\n\t\t\t\t\t\timageData.data[dest++] = alpha;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (debug)\n\t\t\t\t\t\t// Color runs are blue\n\t\t\t\t\t\tmarkRun(imageData.data, start, len, 0x00, 0x00, 128);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 0x40: // Delta run\n\t\t\t\t\tlen = ((r & 0xf) << 16) | (g << 8) | b;\n\t\t\t\t\t//log(\"Got delta run, len: \" + len);\n\n\t\t\t\t\tb = data[src++];\n\t\t\t\t\tg = data[src++];\n\t\t\t\t\tr = data[src++];\n\t\t\t\t\talpha = data[src++];\n\n\t\t\t\t\tstart = dest;\n\n\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\timageData.data[dest] = (imageData.data[dest] + r) & 0xff;\n\t\t\t\t\t\tdest++;\n\t\t\t\t\t\timageData.data[dest] = (imageData.data[dest] + g) & 0xff;\n\t\t\t\t\t\tdest++;\n\t\t\t\t\t\timageData.data[dest] = (imageData.data[dest] + b) & 0xff;\n\t\t\t\t\t\tdest++;\n\t\t\t\t\t\timageData.data[dest] = (imageData.data[dest] + alpha) & 0xff;\n\t\t\t\t\t\tdest++;\n\t\t\t\t\t}\n\t\t\t\t\tif (debug)\n\t\t\t\t\t\t// Delta runs are violet\n\t\t\t\t\t\tmarkRun(imageData.data, start, len, 0xff, 0x00, 0xff);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.error(\"Unknown buffer commend \" + cmd);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn imageData;\n}\n\nfunction cmdPutBuffer(id, w, h, compressed) {\n\tvar surface = surfaces[id];\n\tvar context = surface.canvas.getContext(\"2d\");\n\n\tinflateRaw(compressed, (e, data) => {\n\t\tvar imageData = decodeBuffer(\n\t\t\tcontext,\n\t\t\tsurface.imageData,\n\t\t\tw,\n\t\t\th,\n\t\t\tdata,\n\t\t\tdebugDecoding\n\t\t);\n\t\tcontext.putImageData(imageData, 0, 0);\n\n\t\tif (debugDecoding)\n\t\t\timageData = decodeBuffer(context, surface.imageData, w, h, data, false);\n\n\t\tsurface.imageData = imageData;\n\t});\n}\n\nfunction cmdGrabPointer(id, ownerEvents) {\n\tdoGrab(id, ownerEvents, false);\n\tsendInput(\"g\", []);\n}\n\nfunction cmdUngrabPointer() {\n\tsendInput(\"u\", []);\n\tif (grab.window) doUngrab();\n}\n\nvar active = false;\nfunction handleCommands(cmd) {\n\tif (!active) {\n\t\tstart();\n\t\tactive = true;\n\t}\n\n\twhile (cmd.pos < cmd.length) {\n\t\tvar id, x, y, w, h, q;\n\t\tvar command = cmd.get_char();\n\t\tlastSerial = cmd.get_32();\n\t\tswitch (command) {\n\t\t\tcase \"D\":\n\t\t\t\tinputSocket = null;\n\t\t\t\tGTKBridgeEmitter.call(\"status\", \"disconnected\");\n\t\t\t\trootDiv.innerHTML = \"\";\n\t\t\t\tbreak;\n\n\t\t\tcase \"s\": // create new surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tconsole.log(id);\n\t\t\t\tx = cmd.get_16s();\n\t\t\t\ty = cmd.get_16s();\n\t\t\t\tw = cmd.get_16();\n\t\t\t\th = cmd.get_16();\n\t\t\t\tvar isTemp = cmd.get_bool();\n\t\t\t\tcmdCreateSurface(id, x, y, w, h, isTemp);\n\t\t\t\tbreak;\n\n\t\t\tcase \"S\": // Show a surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tcmdShowSurface(id);\n\t\t\t\tbreak;\n\n\t\t\tcase \"H\": // Hide a surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tcmdHideSurface(id);\n\t\t\t\tbreak;\n\n\t\t\tcase \"p\": // Set transient parent\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tvar parentId = cmd.get_16();\n\t\t\t\tcmdSetTransientFor(id, parentId);\n\t\t\t\tbreak;\n\n\t\t\tcase \"d\": // Delete surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tcmdDeleteSurface(id);\n\t\t\t\tbreak;\n\n\t\t\tcase \"m\": // Move a surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tvar ops = cmd.get_flags();\n\t\t\t\tvar has_pos = ops & 1;\n\t\t\t\tif (has_pos) {\n\t\t\t\t\tx = cmd.get_16s();\n\t\t\t\t\ty = cmd.get_16s();\n\t\t\t\t}\n\t\t\t\tvar has_size = ops & 2;\n\t\t\t\tif (has_size) {\n\t\t\t\t\tw = cmd.get_16();\n\t\t\t\t\th = cmd.get_16();\n\t\t\t\t}\n\t\t\t\tcmdMoveResizeSurface(id, has_pos, x, y, has_size, w, h);\n\t\t\t\tbreak;\n\n\t\t\tcase \"r\": // Raise a surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tcmdRaiseSurface(id);\n\t\t\t\tbreak;\n\n\t\t\tcase \"R\": // Lower a surface\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tcmdLowerSurface(id);\n\t\t\t\tbreak;\n\n\t\t\tcase \"b\": // Put image buffer\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tw = cmd.get_16();\n\t\t\t\th = cmd.get_16();\n\t\t\t\tvar data = cmd.get_data();\n\t\t\t\tcmdPutBuffer(id, w, h, data);\n\t\t\t\tbreak;\n\n\t\t\tcase \"g\": // Grab\n\t\t\t\tid = cmd.get_16();\n\t\t\t\tvar ownerEvents = cmd.get_bool();\n\n\t\t\t\tcmdGrabPointer(id, ownerEvents);\n\t\t\t\tbreak;\n\n\t\t\tcase \"u\": // Ungrab\n\t\t\t\tcmdUngrabPointer();\n\t\t\t\tbreak;\n\n\t\t\tcase \"k\": // show keyboard\n\t\t\t\tshowKeyboard = cmd.get_16() != 0;\n\t\t\t\tshowKeyboardChanged = true;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error(\n\t\t\t\t\t\"Unknown op \" + command\n\t\t\t\t);\n\t\t}\n\t}\n\treturn true;\n}\n\nfunction handleOutstanding() {\n\twhile (outstandingCommands.length > 0) {\n\t\tvar cmd = outstandingCommands.shift();\n\t\tif (!handleCommands(cmd)) {\n\t\t\toutstandingCommands.unshift(cmd);\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction BinCommands(message) {\n\tthis.arraybuffer = message;\n\tthis.u8 = new Uint8Array(message);\n\tthis.length = this.u8.length;\n\tthis.pos = 0;\n}\n\nBinCommands.prototype.get_char = function () {\n\treturn String.fromCharCode(this.u8[this.pos++]);\n};\nBinCommands.prototype.get_bool = function () {\n\treturn this.u8[this.pos++] != 0;\n};\nBinCommands.prototype.get_flags = function () {\n\treturn this.u8[this.pos++];\n};\nBinCommands.prototype.get_16 = function () {\n\tvar v = this.u8[this.pos] + (this.u8[this.pos + 1] << 8);\n\tthis.pos = this.pos + 2;\n\treturn v;\n};\nBinCommands.prototype.get_16s = function () {\n\tvar v = this.get_16();\n\tif (v > 32767) return v - 65536;\n\telse return v;\n};\nBinCommands.prototype.get_32 = function () {\n\tvar v =\n\t\tthis.u8[this.pos] +\n\t\t(this.u8[this.pos + 1] << 8) +\n\t\t(this.u8[this.pos + 2] << 16) +\n\t\t(this.u8[this.pos + 3] << 24);\n\tthis.pos = this.pos + 4;\n\treturn v;\n};\nBinCommands.prototype.get_data = function () {\n\tvar size = this.get_32();\n\tvar data = new Uint8Array(this.arraybuffer, this.pos, size);\n\tthis.pos = this.pos + size;\n\treturn data;\n};\n\nfunction handleMessage(message) {\n\tvar cmd = new BinCommands(message);\n\toutstandingCommands.push(cmd);\n\tif (outstandingCommands.length == 1) {\n\t\thandleOutstanding();\n\t}\n}\n\nfunction getSurfaceId(ev) {\n\tvar surface = ev.target.surface;\n\tif (surface != undefined) return surface.id;\n\treturn 0;\n}\n\nfunction sendInput(cmd, args) {\n\tif (inputSocket == null) return;\n\n\tvar fullArgs = [cmd.charCodeAt(0), lastSerial, lastTimeStamp].concat(args);\n\tvar buffer = new ArrayBuffer(fullArgs.length * 4);\n\tvar view = new DataView(buffer);\n\tfullArgs.forEach(function (arg, i) {\n\t\tview.setInt32(i * 4, arg, false);\n\t});\n\n\tinputSocket.send(buffer);\n}\n\nfunction getPositionsFromAbsCoord(absX, absY, relativeId) {\n\tvar res = Object();\n\n\tres.rootX = absX;\n\tres.rootY = absY;\n\tres.winX = absX;\n\tres.winY = absY;\n\tif (relativeId != 0) {\n\t\tvar surface = surfaces[relativeId];\n\t\tres.winX = res.winX - surface.x;\n\t\tres.winY = res.winY - surface.y;\n\t}\n\n\treturn res;\n}\n\nfunction getPositionsFromEvent(ev, relativeId) {\n\tvar absX, absY;\n\tabsX = ev.pageX;\n\tabsY = ev.pageY;\n\tvar res = getPositionsFromAbsCoord(absX, absY, relativeId);\n\n\tlastX = res.rootX;\n\tlastY = res.rootY;\n\n\treturn res;\n}\n\nfunction getEffectiveEventTarget(id) {\n\tif (grab.window != null) {\n\t\tif (!grab.ownerEvents) return grab.window;\n\t\tif (id == 0) return grab.window;\n\t}\n\treturn id;\n}\n\nfunction updateKeyboardStatus() {\n\tif (fakeInput != null && showKeyboardChanged) {\n\t\tshowKeyboardChanged = false;\n\t\tif (showKeyboard) fakeInput.focus();\n\t\telse fakeInput.blur();\n\t}\n}\n\nfunction updateForEvent(ev) {\n\tlastState &= ~(GDK_SHIFT_MASK | GDK_CONTROL_MASK | GDK_MOD1_MASK);\n\tif (ev.shiftKey) lastState |= GDK_SHIFT_MASK;\n\tif (ev.ctrlKey) lastState |= GDK_CONTROL_MASK;\n\tif (ev.altKey) lastState |= GDK_MOD1_MASK;\n\n\tlastTimeStamp = ev.timeStamp;\n}\n\nfunction onMouseMove(ev) {\n\tupdateForEvent(ev);\n\tvar id = getSurfaceId(ev);\n\tid = getEffectiveEventTarget(id);\n\tvar pos = getPositionsFromEvent(ev, id);\n\tsendInput(\"m\", [\n\t\trealWindowWithMouse,\n\t\tid,\n\t\tpos.rootX,\n\t\tpos.rootY,\n\t\tpos.winX,\n\t\tpos.winY,\n\t\tlastState,\n\t]);\n}\n\nfunction onMouseOver(ev) {\n\tupdateForEvent(ev);\n\n\tvar id = getSurfaceId(ev);\n\trealWindowWithMouse = id;\n\tid = getEffectiveEventTarget(id);\n\tvar pos = getPositionsFromEvent(ev, id);\n\twindowWithMouse = id;\n\tif (windowWithMouse != 0) {\n\t\tsendInput(\"e\", [\n\t\t\trealWindowWithMouse,\n\t\t\tid,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t\tGDK_CROSSING_NORMAL,\n\t\t]);\n\t}\n}\n\nfunction onMouseOut(ev) {\n\tupdateForEvent(ev);\n\tvar id = getSurfaceId(ev);\n\tvar origId = id;\n\tid = getEffectiveEventTarget(id);\n\tvar pos = getPositionsFromEvent(ev, id);\n\n\tif (id != 0) {\n\t\tsendInput(\"l\", [\n\t\t\trealWindowWithMouse,\n\t\t\tid,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t\tGDK_CROSSING_NORMAL,\n\t\t]);\n\t}\n\trealWindowWithMouse = 0;\n\twindowWithMouse = 0;\n}\n\nfunction doGrab(id, ownerEvents, implicit) {\n\tvar pos;\n\n\tif (windowWithMouse != id) {\n\t\tif (windowWithMouse != 0) {\n\t\t\tpos = getPositionsFromAbsCoord(lastX, lastY, windowWithMouse);\n\t\t\tsendInput(\"l\", [\n\t\t\t\trealWindowWithMouse,\n\t\t\t\twindowWithMouse,\n\t\t\t\tpos.rootX,\n\t\t\t\tpos.rootY,\n\t\t\t\tpos.winX,\n\t\t\t\tpos.winY,\n\t\t\t\tlastState,\n\t\t\t\tGDK_CROSSING_GRAB,\n\t\t\t]);\n\t\t}\n\t\tpos = getPositionsFromAbsCoord(lastX, lastY, id);\n\t\tsendInput(\"e\", [\n\t\t\trealWindowWithMouse,\n\t\t\tid,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t\tGDK_CROSSING_GRAB,\n\t\t]);\n\t\twindowWithMouse = id;\n\t}\n\n\tgrab.window = id;\n\tgrab.ownerEvents = ownerEvents;\n\tgrab.implicit = implicit;\n}\n\nfunction doUngrab() {\n\tvar pos;\n\tif (realWindowWithMouse != windowWithMouse) {\n\t\tif (windowWithMouse != 0) {\n\t\t\tpos = getPositionsFromAbsCoord(lastX, lastY, windowWithMouse);\n\t\t\tsendInput(\"l\", [\n\t\t\t\trealWindowWithMouse,\n\t\t\t\twindowWithMouse,\n\t\t\t\tpos.rootX,\n\t\t\t\tpos.rootY,\n\t\t\t\tpos.winX,\n\t\t\t\tpos.winY,\n\t\t\t\tlastState,\n\t\t\t\tGDK_CROSSING_UNGRAB,\n\t\t\t]);\n\t\t}\n\t\tif (realWindowWithMouse != 0) {\n\t\t\tpos = getPositionsFromAbsCoord(lastX, lastY, realWindowWithMouse);\n\t\t\tsendInput(\"e\", [\n\t\t\t\trealWindowWithMouse,\n\t\t\t\trealWindowWithMouse,\n\t\t\t\tpos.rootX,\n\t\t\t\tpos.rootY,\n\t\t\t\tpos.winX,\n\t\t\t\tpos.winY,\n\t\t\t\tlastState,\n\t\t\t\tGDK_CROSSING_UNGRAB,\n\t\t\t]);\n\t\t}\n\t\twindowWithMouse = realWindowWithMouse;\n\t}\n\tgrab.window = null;\n}\n\nfunction onMouseDown(ev) {\n\tupdateForEvent(ev);\n\tvar button = ev.button + 1;\n\tlastState = lastState | getButtonMask(button);\n\tvar id = getSurfaceId(ev);\n\tid = getEffectiveEventTarget(id);\n\n\tvar pos = getPositionsFromEvent(ev, id);\n\tif (grab.window == null) doGrab(id, false, true);\n\tsendInput(\"b\", [\n\t\trealWindowWithMouse,\n\t\tid,\n\t\tpos.rootX,\n\t\tpos.rootY,\n\t\tpos.winX,\n\t\tpos.winY,\n\t\tlastState,\n\t\tbutton,\n\t]);\n\treturn false;\n}\n\nfunction onMouseUp(ev) {\n\tupdateForEvent(ev);\n\tvar button = ev.button + 1;\n\tlastState = lastState & ~getButtonMask(button);\n\tvar evId = getSurfaceId(ev);\n\tlet id = getEffectiveEventTarget(evId);\n\tvar pos = getPositionsFromEvent(ev, id);\n\n\tsendInput(\"B\", [\n\t\trealWindowWithMouse,\n\t\tid,\n\t\tpos.rootX,\n\t\tpos.rootY,\n\t\tpos.winX,\n\t\tpos.winY,\n\t\tlastState,\n\t\tbutton,\n\t]);\n\n\tif (grab.window != null && grab.implicit) doUngrab();\n\n\treturn false;\n}\n\n/* Some of the keyboard handling code is from noVNC and\n * (c) Joel Martin (github@martintribe.org), used with permission\n *  Original code at:\n * https://github.com/kanaka/noVNC/blob/master/include/input.js\n */\n\nvar unicodeTable = {\n\t0x0104: 0x01a1,\n\t0x02d8: 0x01a2,\n\t0x0141: 0x01a3,\n\t0x013d: 0x01a5,\n\t0x015a: 0x01a6,\n\t0x0160: 0x01a9,\n\t0x015e: 0x01aa,\n\t0x0164: 0x01ab,\n\t0x0179: 0x01ac,\n\t0x017d: 0x01ae,\n\t0x017b: 0x01af,\n\t0x0105: 0x01b1,\n\t0x02db: 0x01b2,\n\t0x0142: 0x01b3,\n\t0x013e: 0x01b5,\n\t0x015b: 0x01b6,\n\t0x02c7: 0x01b7,\n\t0x0161: 0x01b9,\n\t0x015f: 0x01ba,\n\t0x0165: 0x01bb,\n\t0x017a: 0x01bc,\n\t0x02dd: 0x01bd,\n\t0x017e: 0x01be,\n\t0x017c: 0x01bf,\n\t0x0154: 0x01c0,\n\t0x0102: 0x01c3,\n\t0x0139: 0x01c5,\n\t0x0106: 0x01c6,\n\t0x010c: 0x01c8,\n\t0x0118: 0x01ca,\n\t0x011a: 0x01cc,\n\t0x010e: 0x01cf,\n\t0x0110: 0x01d0,\n\t0x0143: 0x01d1,\n\t0x0147: 0x01d2,\n\t0x0150: 0x01d5,\n\t0x0158: 0x01d8,\n\t0x016e: 0x01d9,\n\t0x0170: 0x01db,\n\t0x0162: 0x01de,\n\t0x0155: 0x01e0,\n\t0x0103: 0x01e3,\n\t0x013a: 0x01e5,\n\t0x0107: 0x01e6,\n\t0x010d: 0x01e8,\n\t0x0119: 0x01ea,\n\t0x011b: 0x01ec,\n\t0x010f: 0x01ef,\n\t0x0111: 0x01f0,\n\t0x0144: 0x01f1,\n\t0x0148: 0x01f2,\n\t0x0151: 0x01f5,\n\t0x0171: 0x01fb,\n\t0x0159: 0x01f8,\n\t0x016f: 0x01f9,\n\t0x0163: 0x01fe,\n\t0x02d9: 0x01ff,\n\t0x0126: 0x02a1,\n\t0x0124: 0x02a6,\n\t0x0130: 0x02a9,\n\t0x011e: 0x02ab,\n\t0x0134: 0x02ac,\n\t0x0127: 0x02b1,\n\t0x0125: 0x02b6,\n\t0x0131: 0x02b9,\n\t0x011f: 0x02bb,\n\t0x0135: 0x02bc,\n\t0x010a: 0x02c5,\n\t0x0108: 0x02c6,\n\t0x0120: 0x02d5,\n\t0x011c: 0x02d8,\n\t0x016c: 0x02dd,\n\t0x015c: 0x02de,\n\t0x010b: 0x02e5,\n\t0x0109: 0x02e6,\n\t0x0121: 0x02f5,\n\t0x011d: 0x02f8,\n\t0x016d: 0x02fd,\n\t0x015d: 0x02fe,\n\t0x0138: 0x03a2,\n\t0x0156: 0x03a3,\n\t0x0128: 0x03a5,\n\t0x013b: 0x03a6,\n\t0x0112: 0x03aa,\n\t0x0122: 0x03ab,\n\t0x0166: 0x03ac,\n\t0x0157: 0x03b3,\n\t0x0129: 0x03b5,\n\t0x013c: 0x03b6,\n\t0x0113: 0x03ba,\n\t0x0123: 0x03bb,\n\t0x0167: 0x03bc,\n\t0x014a: 0x03bd,\n\t0x014b: 0x03bf,\n\t0x0100: 0x03c0,\n\t0x012e: 0x03c7,\n\t0x0116: 0x03cc,\n\t0x012a: 0x03cf,\n\t0x0145: 0x03d1,\n\t0x014c: 0x03d2,\n\t0x0136: 0x03d3,\n\t0x0172: 0x03d9,\n\t0x0168: 0x03dd,\n\t0x016a: 0x03de,\n\t0x0101: 0x03e0,\n\t0x012f: 0x03e7,\n\t0x0117: 0x03ec,\n\t0x012b: 0x03ef,\n\t0x0146: 0x03f1,\n\t0x014d: 0x03f2,\n\t0x0137: 0x03f3,\n\t0x0173: 0x03f9,\n\t0x0169: 0x03fd,\n\t0x016b: 0x03fe,\n\t0x1e02: 0x1001e02,\n\t0x1e03: 0x1001e03,\n\t0x1e0a: 0x1001e0a,\n\t0x1e80: 0x1001e80,\n\t0x1e82: 0x1001e82,\n\t0x1e0b: 0x1001e0b,\n\t0x1ef2: 0x1001ef2,\n\t0x1e1e: 0x1001e1e,\n\t0x1e1f: 0x1001e1f,\n\t0x1e40: 0x1001e40,\n\t0x1e41: 0x1001e41,\n\t0x1e56: 0x1001e56,\n\t0x1e81: 0x1001e81,\n\t0x1e57: 0x1001e57,\n\t0x1e83: 0x1001e83,\n\t0x1e60: 0x1001e60,\n\t0x1ef3: 0x1001ef3,\n\t0x1e84: 0x1001e84,\n\t0x1e85: 0x1001e85,\n\t0x1e61: 0x1001e61,\n\t0x0174: 0x1000174,\n\t0x1e6a: 0x1001e6a,\n\t0x0176: 0x1000176,\n\t0x0175: 0x1000175,\n\t0x1e6b: 0x1001e6b,\n\t0x0177: 0x1000177,\n\t0x0152: 0x13bc,\n\t0x0153: 0x13bd,\n\t0x0178: 0x13be,\n\t0x203e: 0x047e,\n\t0x3002: 0x04a1,\n\t0x300c: 0x04a2,\n\t0x300d: 0x04a3,\n\t0x3001: 0x04a4,\n\t0x30fb: 0x04a5,\n\t0x30f2: 0x04a6,\n\t0x30a1: 0x04a7,\n\t0x30a3: 0x04a8,\n\t0x30a5: 0x04a9,\n\t0x30a7: 0x04aa,\n\t0x30a9: 0x04ab,\n\t0x30e3: 0x04ac,\n\t0x30e5: 0x04ad,\n\t0x30e7: 0x04ae,\n\t0x30c3: 0x04af,\n\t0x30fc: 0x04b0,\n\t0x30a2: 0x04b1,\n\t0x30a4: 0x04b2,\n\t0x30a6: 0x04b3,\n\t0x30a8: 0x04b4,\n\t0x30aa: 0x04b5,\n\t0x30ab: 0x04b6,\n\t0x30ad: 0x04b7,\n\t0x30af: 0x04b8,\n\t0x30b1: 0x04b9,\n\t0x30b3: 0x04ba,\n\t0x30b5: 0x04bb,\n\t0x30b7: 0x04bc,\n\t0x30b9: 0x04bd,\n\t0x30bb: 0x04be,\n\t0x30bd: 0x04bf,\n\t0x30bf: 0x04c0,\n\t0x30c1: 0x04c1,\n\t0x30c4: 0x04c2,\n\t0x30c6: 0x04c3,\n\t0x30c8: 0x04c4,\n\t0x30ca: 0x04c5,\n\t0x30cb: 0x04c6,\n\t0x30cc: 0x04c7,\n\t0x30cd: 0x04c8,\n\t0x30ce: 0x04c9,\n\t0x30cf: 0x04ca,\n\t0x30d2: 0x04cb,\n\t0x30d5: 0x04cc,\n\t0x30d8: 0x04cd,\n\t0x30db: 0x04ce,\n\t0x30de: 0x04cf,\n\t0x30df: 0x04d0,\n\t0x30e0: 0x04d1,\n\t0x30e1: 0x04d2,\n\t0x30e2: 0x04d3,\n\t0x30e4: 0x04d4,\n\t0x30e6: 0x04d5,\n\t0x30e8: 0x04d6,\n\t0x30e9: 0x04d7,\n\t0x30ea: 0x04d8,\n\t0x30eb: 0x04d9,\n\t0x30ec: 0x04da,\n\t0x30ed: 0x04db,\n\t0x30ef: 0x04dc,\n\t0x30f3: 0x04dd,\n\t0x309b: 0x04de,\n\t0x309c: 0x04df,\n\t0x06f0: 0x10006f0,\n\t0x06f1: 0x10006f1,\n\t0x06f2: 0x10006f2,\n\t0x06f3: 0x10006f3,\n\t0x06f4: 0x10006f4,\n\t0x06f5: 0x10006f5,\n\t0x06f6: 0x10006f6,\n\t0x06f7: 0x10006f7,\n\t0x06f8: 0x10006f8,\n\t0x06f9: 0x10006f9,\n\t0x066a: 0x100066a,\n\t0x0670: 0x1000670,\n\t0x0679: 0x1000679,\n\t0x067e: 0x100067e,\n\t0x0686: 0x1000686,\n\t0x0688: 0x1000688,\n\t0x0691: 0x1000691,\n\t0x060c: 0x05ac,\n\t0x06d4: 0x10006d4,\n\t0x0660: 0x1000660,\n\t0x0661: 0x1000661,\n\t0x0662: 0x1000662,\n\t0x0663: 0x1000663,\n\t0x0664: 0x1000664,\n\t0x0665: 0x1000665,\n\t0x0666: 0x1000666,\n\t0x0667: 0x1000667,\n\t0x0668: 0x1000668,\n\t0x0669: 0x1000669,\n\t0x061b: 0x05bb,\n\t0x061f: 0x05bf,\n\t0x0621: 0x05c1,\n\t0x0622: 0x05c2,\n\t0x0623: 0x05c3,\n\t0x0624: 0x05c4,\n\t0x0625: 0x05c5,\n\t0x0626: 0x05c6,\n\t0x0627: 0x05c7,\n\t0x0628: 0x05c8,\n\t0x0629: 0x05c9,\n\t0x062a: 0x05ca,\n\t0x062b: 0x05cb,\n\t0x062c: 0x05cc,\n\t0x062d: 0x05cd,\n\t0x062e: 0x05ce,\n\t0x062f: 0x05cf,\n\t0x0630: 0x05d0,\n\t0x0631: 0x05d1,\n\t0x0632: 0x05d2,\n\t0x0633: 0x05d3,\n\t0x0634: 0x05d4,\n\t0x0635: 0x05d5,\n\t0x0636: 0x05d6,\n\t0x0637: 0x05d7,\n\t0x0638: 0x05d8,\n\t0x0639: 0x05d9,\n\t0x063a: 0x05da,\n\t0x0640: 0x05e0,\n\t0x0641: 0x05e1,\n\t0x0642: 0x05e2,\n\t0x0643: 0x05e3,\n\t0x0644: 0x05e4,\n\t0x0645: 0x05e5,\n\t0x0646: 0x05e6,\n\t0x0647: 0x05e7,\n\t0x0648: 0x05e8,\n\t0x0649: 0x05e9,\n\t0x064a: 0x05ea,\n\t0x064b: 0x05eb,\n\t0x064c: 0x05ec,\n\t0x064d: 0x05ed,\n\t0x064e: 0x05ee,\n\t0x064f: 0x05ef,\n\t0x0650: 0x05f0,\n\t0x0651: 0x05f1,\n\t0x0652: 0x05f2,\n\t0x0653: 0x1000653,\n\t0x0654: 0x1000654,\n\t0x0655: 0x1000655,\n\t0x0698: 0x1000698,\n\t0x06a4: 0x10006a4,\n\t0x06a9: 0x10006a9,\n\t0x06af: 0x10006af,\n\t0x06ba: 0x10006ba,\n\t0x06be: 0x10006be,\n\t0x06cc: 0x10006cc,\n\t0x06d2: 0x10006d2,\n\t0x06c1: 0x10006c1,\n\t0x0492: 0x1000492,\n\t0x0493: 0x1000493,\n\t0x0496: 0x1000496,\n\t0x0497: 0x1000497,\n\t0x049a: 0x100049a,\n\t0x049b: 0x100049b,\n\t0x049c: 0x100049c,\n\t0x049d: 0x100049d,\n\t0x04a2: 0x10004a2,\n\t0x04a3: 0x10004a3,\n\t0x04ae: 0x10004ae,\n\t0x04af: 0x10004af,\n\t0x04b0: 0x10004b0,\n\t0x04b1: 0x10004b1,\n\t0x04b2: 0x10004b2,\n\t0x04b3: 0x10004b3,\n\t0x04b6: 0x10004b6,\n\t0x04b7: 0x10004b7,\n\t0x04b8: 0x10004b8,\n\t0x04b9: 0x10004b9,\n\t0x04ba: 0x10004ba,\n\t0x04bb: 0x10004bb,\n\t0x04d8: 0x10004d8,\n\t0x04d9: 0x10004d9,\n\t0x04e2: 0x10004e2,\n\t0x04e3: 0x10004e3,\n\t0x04e8: 0x10004e8,\n\t0x04e9: 0x10004e9,\n\t0x04ee: 0x10004ee,\n\t0x04ef: 0x10004ef,\n\t0x0452: 0x06a1,\n\t0x0453: 0x06a2,\n\t0x0451: 0x06a3,\n\t0x0454: 0x06a4,\n\t0x0455: 0x06a5,\n\t0x0456: 0x06a6,\n\t0x0457: 0x06a7,\n\t0x0458: 0x06a8,\n\t0x0459: 0x06a9,\n\t0x045a: 0x06aa,\n\t0x045b: 0x06ab,\n\t0x045c: 0x06ac,\n\t0x0491: 0x06ad,\n\t0x045e: 0x06ae,\n\t0x045f: 0x06af,\n\t0x2116: 0x06b0,\n\t0x0402: 0x06b1,\n\t0x0403: 0x06b2,\n\t0x0401: 0x06b3,\n\t0x0404: 0x06b4,\n\t0x0405: 0x06b5,\n\t0x0406: 0x06b6,\n\t0x0407: 0x06b7,\n\t0x0408: 0x06b8,\n\t0x0409: 0x06b9,\n\t0x040a: 0x06ba,\n\t0x040b: 0x06bb,\n\t0x040c: 0x06bc,\n\t0x0490: 0x06bd,\n\t0x040e: 0x06be,\n\t0x040f: 0x06bf,\n\t0x044e: 0x06c0,\n\t0x0430: 0x06c1,\n\t0x0431: 0x06c2,\n\t0x0446: 0x06c3,\n\t0x0434: 0x06c4,\n\t0x0435: 0x06c5,\n\t0x0444: 0x06c6,\n\t0x0433: 0x06c7,\n\t0x0445: 0x06c8,\n\t0x0438: 0x06c9,\n\t0x0439: 0x06ca,\n\t0x043a: 0x06cb,\n\t0x043b: 0x06cc,\n\t0x043c: 0x06cd,\n\t0x043d: 0x06ce,\n\t0x043e: 0x06cf,\n\t0x043f: 0x06d0,\n\t0x044f: 0x06d1,\n\t0x0440: 0x06d2,\n\t0x0441: 0x06d3,\n\t0x0442: 0x06d4,\n\t0x0443: 0x06d5,\n\t0x0436: 0x06d6,\n\t0x0432: 0x06d7,\n\t0x044c: 0x06d8,\n\t0x044b: 0x06d9,\n\t0x0437: 0x06da,\n\t0x0448: 0x06db,\n\t0x044d: 0x06dc,\n\t0x0449: 0x06dd,\n\t0x0447: 0x06de,\n\t0x044a: 0x06df,\n\t0x042e: 0x06e0,\n\t0x0410: 0x06e1,\n\t0x0411: 0x06e2,\n\t0x0426: 0x06e3,\n\t0x0414: 0x06e4,\n\t0x0415: 0x06e5,\n\t0x0424: 0x06e6,\n\t0x0413: 0x06e7,\n\t0x0425: 0x06e8,\n\t0x0418: 0x06e9,\n\t0x0419: 0x06ea,\n\t0x041a: 0x06eb,\n\t0x041b: 0x06ec,\n\t0x041c: 0x06ed,\n\t0x041d: 0x06ee,\n\t0x041e: 0x06ef,\n\t0x041f: 0x06f0,\n\t0x042f: 0x06f1,\n\t0x0420: 0x06f2,\n\t0x0421: 0x06f3,\n\t0x0422: 0x06f4,\n\t0x0423: 0x06f5,\n\t0x0416: 0x06f6,\n\t0x0412: 0x06f7,\n\t0x042c: 0x06f8,\n\t0x042b: 0x06f9,\n\t0x0417: 0x06fa,\n\t0x0428: 0x06fb,\n\t0x042d: 0x06fc,\n\t0x0429: 0x06fd,\n\t0x0427: 0x06fe,\n\t0x042a: 0x06ff,\n\t0x0386: 0x07a1,\n\t0x0388: 0x07a2,\n\t0x0389: 0x07a3,\n\t0x038a: 0x07a4,\n\t0x03aa: 0x07a5,\n\t0x038c: 0x07a7,\n\t0x038e: 0x07a8,\n\t0x03ab: 0x07a9,\n\t0x038f: 0x07ab,\n\t0x0385: 0x07ae,\n\t0x2015: 0x07af,\n\t0x03ac: 0x07b1,\n\t0x03ad: 0x07b2,\n\t0x03ae: 0x07b3,\n\t0x03af: 0x07b4,\n\t0x03ca: 0x07b5,\n\t0x0390: 0x07b6,\n\t0x03cc: 0x07b7,\n\t0x03cd: 0x07b8,\n\t0x03cb: 0x07b9,\n\t0x03b0: 0x07ba,\n\t0x03ce: 0x07bb,\n\t0x0391: 0x07c1,\n\t0x0392: 0x07c2,\n\t0x0393: 0x07c3,\n\t0x0394: 0x07c4,\n\t0x0395: 0x07c5,\n\t0x0396: 0x07c6,\n\t0x0397: 0x07c7,\n\t0x0398: 0x07c8,\n\t0x0399: 0x07c9,\n\t0x039a: 0x07ca,\n\t0x039b: 0x07cb,\n\t0x039c: 0x07cc,\n\t0x039d: 0x07cd,\n\t0x039e: 0x07ce,\n\t0x039f: 0x07cf,\n\t0x03a0: 0x07d0,\n\t0x03a1: 0x07d1,\n\t0x03a3: 0x07d2,\n\t0x03a4: 0x07d4,\n\t0x03a5: 0x07d5,\n\t0x03a6: 0x07d6,\n\t0x03a7: 0x07d7,\n\t0x03a8: 0x07d8,\n\t0x03a9: 0x07d9,\n\t0x03b1: 0x07e1,\n\t0x03b2: 0x07e2,\n\t0x03b3: 0x07e3,\n\t0x03b4: 0x07e4,\n\t0x03b5: 0x07e5,\n\t0x03b6: 0x07e6,\n\t0x03b7: 0x07e7,\n\t0x03b8: 0x07e8,\n\t0x03b9: 0x07e9,\n\t0x03ba: 0x07ea,\n\t0x03bb: 0x07eb,\n\t0x03bc: 0x07ec,\n\t0x03bd: 0x07ed,\n\t0x03be: 0x07ee,\n\t0x03bf: 0x07ef,\n\t0x03c0: 0x07f0,\n\t0x03c1: 0x07f1,\n\t0x03c3: 0x07f2,\n\t0x03c2: 0x07f3,\n\t0x03c4: 0x07f4,\n\t0x03c5: 0x07f5,\n\t0x03c6: 0x07f6,\n\t0x03c7: 0x07f7,\n\t0x03c8: 0x07f8,\n\t0x03c9: 0x07f9,\n\t0x23b7: 0x08a1,\n\t0x2320: 0x08a4,\n\t0x2321: 0x08a5,\n\t0x23a1: 0x08a7,\n\t0x23a3: 0x08a8,\n\t0x23a4: 0x08a9,\n\t0x23a6: 0x08aa,\n\t0x239b: 0x08ab,\n\t0x239d: 0x08ac,\n\t0x239e: 0x08ad,\n\t0x23a0: 0x08ae,\n\t0x23a8: 0x08af,\n\t0x23ac: 0x08b0,\n\t0x2264: 0x08bc,\n\t0x2260: 0x08bd,\n\t0x2265: 0x08be,\n\t0x222b: 0x08bf,\n\t0x2234: 0x08c0,\n\t0x221d: 0x08c1,\n\t0x221e: 0x08c2,\n\t0x2207: 0x08c5,\n\t0x223c: 0x08c8,\n\t0x2243: 0x08c9,\n\t0x21d4: 0x08cd,\n\t0x21d2: 0x08ce,\n\t0x2261: 0x08cf,\n\t0x221a: 0x08d6,\n\t0x2282: 0x08da,\n\t0x2283: 0x08db,\n\t0x2229: 0x08dc,\n\t0x222a: 0x08dd,\n\t0x2227: 0x08de,\n\t0x2228: 0x08df,\n\t0x2202: 0x08ef,\n\t0x0192: 0x08f6,\n\t0x2190: 0x08fb,\n\t0x2191: 0x08fc,\n\t0x2192: 0x08fd,\n\t0x2193: 0x08fe,\n\t0x25c6: 0x09e0,\n\t0x2592: 0x09e1,\n\t0x2409: 0x09e2,\n\t0x240c: 0x09e3,\n\t0x240d: 0x09e4,\n\t0x240a: 0x09e5,\n\t0x2424: 0x09e8,\n\t0x240b: 0x09e9,\n\t0x2518: 0x09ea,\n\t0x2510: 0x09eb,\n\t0x250c: 0x09ec,\n\t0x2514: 0x09ed,\n\t0x253c: 0x09ee,\n\t0x23ba: 0x09ef,\n\t0x23bb: 0x09f0,\n\t0x2500: 0x09f1,\n\t0x23bc: 0x09f2,\n\t0x23bd: 0x09f3,\n\t0x251c: 0x09f4,\n\t0x2524: 0x09f5,\n\t0x2534: 0x09f6,\n\t0x252c: 0x09f7,\n\t0x2502: 0x09f8,\n\t0x2003: 0x0aa1,\n\t0x2002: 0x0aa2,\n\t0x2004: 0x0aa3,\n\t0x2005: 0x0aa4,\n\t0x2007: 0x0aa5,\n\t0x2008: 0x0aa6,\n\t0x2009: 0x0aa7,\n\t0x200a: 0x0aa8,\n\t0x2014: 0x0aa9,\n\t0x2013: 0x0aaa,\n\t0x2026: 0x0aae,\n\t0x2025: 0x0aaf,\n\t0x2153: 0x0ab0,\n\t0x2154: 0x0ab1,\n\t0x2155: 0x0ab2,\n\t0x2156: 0x0ab3,\n\t0x2157: 0x0ab4,\n\t0x2158: 0x0ab5,\n\t0x2159: 0x0ab6,\n\t0x215a: 0x0ab7,\n\t0x2105: 0x0ab8,\n\t0x2012: 0x0abb,\n\t0x215b: 0x0ac3,\n\t0x215c: 0x0ac4,\n\t0x215d: 0x0ac5,\n\t0x215e: 0x0ac6,\n\t0x2122: 0x0ac9,\n\t0x2018: 0x0ad0,\n\t0x2019: 0x0ad1,\n\t0x201c: 0x0ad2,\n\t0x201d: 0x0ad3,\n\t0x211e: 0x0ad4,\n\t0x2032: 0x0ad6,\n\t0x2033: 0x0ad7,\n\t0x271d: 0x0ad9,\n\t0x2663: 0x0aec,\n\t0x2666: 0x0aed,\n\t0x2665: 0x0aee,\n\t0x2720: 0x0af0,\n\t0x2020: 0x0af1,\n\t0x2021: 0x0af2,\n\t0x2713: 0x0af3,\n\t0x2717: 0x0af4,\n\t0x266f: 0x0af5,\n\t0x266d: 0x0af6,\n\t0x2642: 0x0af7,\n\t0x2640: 0x0af8,\n\t0x260e: 0x0af9,\n\t0x2315: 0x0afa,\n\t0x2117: 0x0afb,\n\t0x2038: 0x0afc,\n\t0x201a: 0x0afd,\n\t0x201e: 0x0afe,\n\t0x22a4: 0x0bc2,\n\t0x230a: 0x0bc4,\n\t0x2218: 0x0bca,\n\t0x2395: 0x0bcc,\n\t0x22a5: 0x0bce,\n\t0x25cb: 0x0bcf,\n\t0x2308: 0x0bd3,\n\t0x22a3: 0x0bdc,\n\t0x22a2: 0x0bfc,\n\t0x2017: 0x0cdf,\n\t0x05d0: 0x0ce0,\n\t0x05d1: 0x0ce1,\n\t0x05d2: 0x0ce2,\n\t0x05d3: 0x0ce3,\n\t0x05d4: 0x0ce4,\n\t0x05d5: 0x0ce5,\n\t0x05d6: 0x0ce6,\n\t0x05d7: 0x0ce7,\n\t0x05d8: 0x0ce8,\n\t0x05d9: 0x0ce9,\n\t0x05da: 0x0cea,\n\t0x05db: 0x0ceb,\n\t0x05dc: 0x0cec,\n\t0x05dd: 0x0ced,\n\t0x05de: 0x0cee,\n\t0x05df: 0x0cef,\n\t0x05e0: 0x0cf0,\n\t0x05e1: 0x0cf1,\n\t0x05e2: 0x0cf2,\n\t0x05e3: 0x0cf3,\n\t0x05e4: 0x0cf4,\n\t0x05e5: 0x0cf5,\n\t0x05e6: 0x0cf6,\n\t0x05e7: 0x0cf7,\n\t0x05e8: 0x0cf8,\n\t0x05e9: 0x0cf9,\n\t0x05ea: 0x0cfa,\n\t0x0e01: 0x0da1,\n\t0x0e02: 0x0da2,\n\t0x0e03: 0x0da3,\n\t0x0e04: 0x0da4,\n\t0x0e05: 0x0da5,\n\t0x0e06: 0x0da6,\n\t0x0e07: 0x0da7,\n\t0x0e08: 0x0da8,\n\t0x0e09: 0x0da9,\n\t0x0e0a: 0x0daa,\n\t0x0e0b: 0x0dab,\n\t0x0e0c: 0x0dac,\n\t0x0e0d: 0x0dad,\n\t0x0e0e: 0x0dae,\n\t0x0e0f: 0x0daf,\n\t0x0e10: 0x0db0,\n\t0x0e11: 0x0db1,\n\t0x0e12: 0x0db2,\n\t0x0e13: 0x0db3,\n\t0x0e14: 0x0db4,\n\t0x0e15: 0x0db5,\n\t0x0e16: 0x0db6,\n\t0x0e17: 0x0db7,\n\t0x0e18: 0x0db8,\n\t0x0e19: 0x0db9,\n\t0x0e1a: 0x0dba,\n\t0x0e1b: 0x0dbb,\n\t0x0e1c: 0x0dbc,\n\t0x0e1d: 0x0dbd,\n\t0x0e1e: 0x0dbe,\n\t0x0e1f: 0x0dbf,\n\t0x0e20: 0x0dc0,\n\t0x0e21: 0x0dc1,\n\t0x0e22: 0x0dc2,\n\t0x0e23: 0x0dc3,\n\t0x0e24: 0x0dc4,\n\t0x0e25: 0x0dc5,\n\t0x0e26: 0x0dc6,\n\t0x0e27: 0x0dc7,\n\t0x0e28: 0x0dc8,\n\t0x0e29: 0x0dc9,\n\t0x0e2a: 0x0dca,\n\t0x0e2b: 0x0dcb,\n\t0x0e2c: 0x0dcc,\n\t0x0e2d: 0x0dcd,\n\t0x0e2e: 0x0dce,\n\t0x0e2f: 0x0dcf,\n\t0x0e30: 0x0dd0,\n\t0x0e31: 0x0dd1,\n\t0x0e32: 0x0dd2,\n\t0x0e33: 0x0dd3,\n\t0x0e34: 0x0dd4,\n\t0x0e35: 0x0dd5,\n\t0x0e36: 0x0dd6,\n\t0x0e37: 0x0dd7,\n\t0x0e38: 0x0dd8,\n\t0x0e39: 0x0dd9,\n\t0x0e3a: 0x0dda,\n\t0x0e3f: 0x0ddf,\n\t0x0e40: 0x0de0,\n\t0x0e41: 0x0de1,\n\t0x0e42: 0x0de2,\n\t0x0e43: 0x0de3,\n\t0x0e44: 0x0de4,\n\t0x0e45: 0x0de5,\n\t0x0e46: 0x0de6,\n\t0x0e47: 0x0de7,\n\t0x0e48: 0x0de8,\n\t0x0e49: 0x0de9,\n\t0x0e4a: 0x0dea,\n\t0x0e4b: 0x0deb,\n\t0x0e4c: 0x0dec,\n\t0x0e4d: 0x0ded,\n\t0x0e50: 0x0df0,\n\t0x0e51: 0x0df1,\n\t0x0e52: 0x0df2,\n\t0x0e53: 0x0df3,\n\t0x0e54: 0x0df4,\n\t0x0e55: 0x0df5,\n\t0x0e56: 0x0df6,\n\t0x0e57: 0x0df7,\n\t0x0e58: 0x0df8,\n\t0x0e59: 0x0df9,\n\t0x0587: 0x1000587,\n\t0x0589: 0x1000589,\n\t0x055d: 0x100055d,\n\t0x058a: 0x100058a,\n\t0x055c: 0x100055c,\n\t0x055b: 0x100055b,\n\t0x055e: 0x100055e,\n\t0x0531: 0x1000531,\n\t0x0561: 0x1000561,\n\t0x0532: 0x1000532,\n\t0x0562: 0x1000562,\n\t0x0533: 0x1000533,\n\t0x0563: 0x1000563,\n\t0x0534: 0x1000534,\n\t0x0564: 0x1000564,\n\t0x0535: 0x1000535,\n\t0x0565: 0x1000565,\n\t0x0536: 0x1000536,\n\t0x0566: 0x1000566,\n\t0x0537: 0x1000537,\n\t0x0567: 0x1000567,\n\t0x0538: 0x1000538,\n\t0x0568: 0x1000568,\n\t0x0539: 0x1000539,\n\t0x0569: 0x1000569,\n\t0x053a: 0x100053a,\n\t0x056a: 0x100056a,\n\t0x053b: 0x100053b,\n\t0x056b: 0x100056b,\n\t0x053c: 0x100053c,\n\t0x056c: 0x100056c,\n\t0x053d: 0x100053d,\n\t0x056d: 0x100056d,\n\t0x053e: 0x100053e,\n\t0x056e: 0x100056e,\n\t0x053f: 0x100053f,\n\t0x056f: 0x100056f,\n\t0x0540: 0x1000540,\n\t0x0570: 0x1000570,\n\t0x0541: 0x1000541,\n\t0x0571: 0x1000571,\n\t0x0542: 0x1000542,\n\t0x0572: 0x1000572,\n\t0x0543: 0x1000543,\n\t0x0573: 0x1000573,\n\t0x0544: 0x1000544,\n\t0x0574: 0x1000574,\n\t0x0545: 0x1000545,\n\t0x0575: 0x1000575,\n\t0x0546: 0x1000546,\n\t0x0576: 0x1000576,\n\t0x0547: 0x1000547,\n\t0x0577: 0x1000577,\n\t0x0548: 0x1000548,\n\t0x0578: 0x1000578,\n\t0x0549: 0x1000549,\n\t0x0579: 0x1000579,\n\t0x054a: 0x100054a,\n\t0x057a: 0x100057a,\n\t0x054b: 0x100054b,\n\t0x057b: 0x100057b,\n\t0x054c: 0x100054c,\n\t0x057c: 0x100057c,\n\t0x054d: 0x100054d,\n\t0x057d: 0x100057d,\n\t0x054e: 0x100054e,\n\t0x057e: 0x100057e,\n\t0x054f: 0x100054f,\n\t0x057f: 0x100057f,\n\t0x0550: 0x1000550,\n\t0x0580: 0x1000580,\n\t0x0551: 0x1000551,\n\t0x0581: 0x1000581,\n\t0x0552: 0x1000552,\n\t0x0582: 0x1000582,\n\t0x0553: 0x1000553,\n\t0x0583: 0x1000583,\n\t0x0554: 0x1000554,\n\t0x0584: 0x1000584,\n\t0x0555: 0x1000555,\n\t0x0585: 0x1000585,\n\t0x0556: 0x1000556,\n\t0x0586: 0x1000586,\n\t0x055a: 0x100055a,\n\t0x10d0: 0x10010d0,\n\t0x10d1: 0x10010d1,\n\t0x10d2: 0x10010d2,\n\t0x10d3: 0x10010d3,\n\t0x10d4: 0x10010d4,\n\t0x10d5: 0x10010d5,\n\t0x10d6: 0x10010d6,\n\t0x10d7: 0x10010d7,\n\t0x10d8: 0x10010d8,\n\t0x10d9: 0x10010d9,\n\t0x10da: 0x10010da,\n\t0x10db: 0x10010db,\n\t0x10dc: 0x10010dc,\n\t0x10dd: 0x10010dd,\n\t0x10de: 0x10010de,\n\t0x10df: 0x10010df,\n\t0x10e0: 0x10010e0,\n\t0x10e1: 0x10010e1,\n\t0x10e2: 0x10010e2,\n\t0x10e3: 0x10010e3,\n\t0x10e4: 0x10010e4,\n\t0x10e5: 0x10010e5,\n\t0x10e6: 0x10010e6,\n\t0x10e7: 0x10010e7,\n\t0x10e8: 0x10010e8,\n\t0x10e9: 0x10010e9,\n\t0x10ea: 0x10010ea,\n\t0x10eb: 0x10010eb,\n\t0x10ec: 0x10010ec,\n\t0x10ed: 0x10010ed,\n\t0x10ee: 0x10010ee,\n\t0x10ef: 0x10010ef,\n\t0x10f0: 0x10010f0,\n\t0x10f1: 0x10010f1,\n\t0x10f2: 0x10010f2,\n\t0x10f3: 0x10010f3,\n\t0x10f4: 0x10010f4,\n\t0x10f5: 0x10010f5,\n\t0x10f6: 0x10010f6,\n\t0x1e8a: 0x1001e8a,\n\t0x012c: 0x100012c,\n\t0x01b5: 0x10001b5,\n\t0x01e6: 0x10001e6,\n\t0x01d2: 0x10001d1,\n\t0x019f: 0x100019f,\n\t0x1e8b: 0x1001e8b,\n\t0x012d: 0x100012d,\n\t0x01b6: 0x10001b6,\n\t0x01e7: 0x10001e7,\n\t0x01d2: 0x10001d2,\n\t0x0275: 0x1000275,\n\t0x018f: 0x100018f,\n\t0x0259: 0x1000259,\n\t0x1e36: 0x1001e36,\n\t0x1e37: 0x1001e37,\n\t0x1ea0: 0x1001ea0,\n\t0x1ea1: 0x1001ea1,\n\t0x1ea2: 0x1001ea2,\n\t0x1ea3: 0x1001ea3,\n\t0x1ea4: 0x1001ea4,\n\t0x1ea5: 0x1001ea5,\n\t0x1ea6: 0x1001ea6,\n\t0x1ea7: 0x1001ea7,\n\t0x1ea8: 0x1001ea8,\n\t0x1ea9: 0x1001ea9,\n\t0x1eaa: 0x1001eaa,\n\t0x1eab: 0x1001eab,\n\t0x1eac: 0x1001eac,\n\t0x1ead: 0x1001ead,\n\t0x1eae: 0x1001eae,\n\t0x1eaf: 0x1001eaf,\n\t0x1eb0: 0x1001eb0,\n\t0x1eb1: 0x1001eb1,\n\t0x1eb2: 0x1001eb2,\n\t0x1eb3: 0x1001eb3,\n\t0x1eb4: 0x1001eb4,\n\t0x1eb5: 0x1001eb5,\n\t0x1eb6: 0x1001eb6,\n\t0x1eb7: 0x1001eb7,\n\t0x1eb8: 0x1001eb8,\n\t0x1eb9: 0x1001eb9,\n\t0x1eba: 0x1001eba,\n\t0x1ebb: 0x1001ebb,\n\t0x1ebc: 0x1001ebc,\n\t0x1ebd: 0x1001ebd,\n\t0x1ebe: 0x1001ebe,\n\t0x1ebf: 0x1001ebf,\n\t0x1ec0: 0x1001ec0,\n\t0x1ec1: 0x1001ec1,\n\t0x1ec2: 0x1001ec2,\n\t0x1ec3: 0x1001ec3,\n\t0x1ec4: 0x1001ec4,\n\t0x1ec5: 0x1001ec5,\n\t0x1ec6: 0x1001ec6,\n\t0x1ec7: 0x1001ec7,\n\t0x1ec8: 0x1001ec8,\n\t0x1ec9: 0x1001ec9,\n\t0x1eca: 0x1001eca,\n\t0x1ecb: 0x1001ecb,\n\t0x1ecc: 0x1001ecc,\n\t0x1ecd: 0x1001ecd,\n\t0x1ece: 0x1001ece,\n\t0x1ecf: 0x1001ecf,\n\t0x1ed0: 0x1001ed0,\n\t0x1ed1: 0x1001ed1,\n\t0x1ed2: 0x1001ed2,\n\t0x1ed3: 0x1001ed3,\n\t0x1ed4: 0x1001ed4,\n\t0x1ed5: 0x1001ed5,\n\t0x1ed6: 0x1001ed6,\n\t0x1ed7: 0x1001ed7,\n\t0x1ed8: 0x1001ed8,\n\t0x1ed9: 0x1001ed9,\n\t0x1eda: 0x1001eda,\n\t0x1edb: 0x1001edb,\n\t0x1edc: 0x1001edc,\n\t0x1edd: 0x1001edd,\n\t0x1ede: 0x1001ede,\n\t0x1edf: 0x1001edf,\n\t0x1ee0: 0x1001ee0,\n\t0x1ee1: 0x1001ee1,\n\t0x1ee2: 0x1001ee2,\n\t0x1ee3: 0x1001ee3,\n\t0x1ee4: 0x1001ee4,\n\t0x1ee5: 0x1001ee5,\n\t0x1ee6: 0x1001ee6,\n\t0x1ee7: 0x1001ee7,\n\t0x1ee8: 0x1001ee8,\n\t0x1ee9: 0x1001ee9,\n\t0x1eea: 0x1001eea,\n\t0x1eeb: 0x1001eeb,\n\t0x1eec: 0x1001eec,\n\t0x1eed: 0x1001eed,\n\t0x1eee: 0x1001eee,\n\t0x1eef: 0x1001eef,\n\t0x1ef0: 0x1001ef0,\n\t0x1ef1: 0x1001ef1,\n\t0x1ef4: 0x1001ef4,\n\t0x1ef5: 0x1001ef5,\n\t0x1ef6: 0x1001ef6,\n\t0x1ef7: 0x1001ef7,\n\t0x1ef8: 0x1001ef8,\n\t0x1ef9: 0x1001ef9,\n\t0x01a0: 0x10001a0,\n\t0x01a1: 0x10001a1,\n\t0x01af: 0x10001af,\n\t0x01b0: 0x10001b0,\n\t0x20a0: 0x10020a0,\n\t0x20a1: 0x10020a1,\n\t0x20a2: 0x10020a2,\n\t0x20a3: 0x10020a3,\n\t0x20a4: 0x10020a4,\n\t0x20a5: 0x10020a5,\n\t0x20a6: 0x10020a6,\n\t0x20a7: 0x10020a7,\n\t0x20a8: 0x10020a8,\n\t0x20a9: 0x10020a9,\n\t0x20aa: 0x10020aa,\n\t0x20ab: 0x10020ab,\n\t0x20ac: 0x20ac,\n\t0x2070: 0x1002070,\n\t0x2074: 0x1002074,\n\t0x2075: 0x1002075,\n\t0x2076: 0x1002076,\n\t0x2077: 0x1002077,\n\t0x2078: 0x1002078,\n\t0x2079: 0x1002079,\n\t0x2080: 0x1002080,\n\t0x2081: 0x1002081,\n\t0x2082: 0x1002082,\n\t0x2083: 0x1002083,\n\t0x2084: 0x1002084,\n\t0x2085: 0x1002085,\n\t0x2086: 0x1002086,\n\t0x2087: 0x1002087,\n\t0x2088: 0x1002088,\n\t0x2089: 0x1002089,\n\t0x2202: 0x1002202,\n\t0x2205: 0x1002205,\n\t0x2208: 0x1002208,\n\t0x2209: 0x1002209,\n\t0x220b: 0x100220b,\n\t0x221a: 0x100221a,\n\t0x221b: 0x100221b,\n\t0x221c: 0x100221c,\n\t0x222c: 0x100222c,\n\t0x222d: 0x100222d,\n\t0x2235: 0x1002235,\n\t0x2245: 0x1002248,\n\t0x2247: 0x1002247,\n\t0x2262: 0x1002262,\n\t0x2263: 0x1002263,\n\t0x2800: 0x1002800,\n\t0x2801: 0x1002801,\n\t0x2802: 0x1002802,\n\t0x2803: 0x1002803,\n\t0x2804: 0x1002804,\n\t0x2805: 0x1002805,\n\t0x2806: 0x1002806,\n\t0x2807: 0x1002807,\n\t0x2808: 0x1002808,\n\t0x2809: 0x1002809,\n\t0x280a: 0x100280a,\n\t0x280b: 0x100280b,\n\t0x280c: 0x100280c,\n\t0x280d: 0x100280d,\n\t0x280e: 0x100280e,\n\t0x280f: 0x100280f,\n\t0x2810: 0x1002810,\n\t0x2811: 0x1002811,\n\t0x2812: 0x1002812,\n\t0x2813: 0x1002813,\n\t0x2814: 0x1002814,\n\t0x2815: 0x1002815,\n\t0x2816: 0x1002816,\n\t0x2817: 0x1002817,\n\t0x2818: 0x1002818,\n\t0x2819: 0x1002819,\n\t0x281a: 0x100281a,\n\t0x281b: 0x100281b,\n\t0x281c: 0x100281c,\n\t0x281d: 0x100281d,\n\t0x281e: 0x100281e,\n\t0x281f: 0x100281f,\n\t0x2820: 0x1002820,\n\t0x2821: 0x1002821,\n\t0x2822: 0x1002822,\n\t0x2823: 0x1002823,\n\t0x2824: 0x1002824,\n\t0x2825: 0x1002825,\n\t0x2826: 0x1002826,\n\t0x2827: 0x1002827,\n\t0x2828: 0x1002828,\n\t0x2829: 0x1002829,\n\t0x282a: 0x100282a,\n\t0x282b: 0x100282b,\n\t0x282c: 0x100282c,\n\t0x282d: 0x100282d,\n\t0x282e: 0x100282e,\n\t0x282f: 0x100282f,\n\t0x2830: 0x1002830,\n\t0x2831: 0x1002831,\n\t0x2832: 0x1002832,\n\t0x2833: 0x1002833,\n\t0x2834: 0x1002834,\n\t0x2835: 0x1002835,\n\t0x2836: 0x1002836,\n\t0x2837: 0x1002837,\n\t0x2838: 0x1002838,\n\t0x2839: 0x1002839,\n\t0x283a: 0x100283a,\n\t0x283b: 0x100283b,\n\t0x283c: 0x100283c,\n\t0x283d: 0x100283d,\n\t0x283e: 0x100283e,\n\t0x283f: 0x100283f,\n\t0x2840: 0x1002840,\n\t0x2841: 0x1002841,\n\t0x2842: 0x1002842,\n\t0x2843: 0x1002843,\n\t0x2844: 0x1002844,\n\t0x2845: 0x1002845,\n\t0x2846: 0x1002846,\n\t0x2847: 0x1002847,\n\t0x2848: 0x1002848,\n\t0x2849: 0x1002849,\n\t0x284a: 0x100284a,\n\t0x284b: 0x100284b,\n\t0x284c: 0x100284c,\n\t0x284d: 0x100284d,\n\t0x284e: 0x100284e,\n\t0x284f: 0x100284f,\n\t0x2850: 0x1002850,\n\t0x2851: 0x1002851,\n\t0x2852: 0x1002852,\n\t0x2853: 0x1002853,\n\t0x2854: 0x1002854,\n\t0x2855: 0x1002855,\n\t0x2856: 0x1002856,\n\t0x2857: 0x1002857,\n\t0x2858: 0x1002858,\n\t0x2859: 0x1002859,\n\t0x285a: 0x100285a,\n\t0x285b: 0x100285b,\n\t0x285c: 0x100285c,\n\t0x285d: 0x100285d,\n\t0x285e: 0x100285e,\n\t0x285f: 0x100285f,\n\t0x2860: 0x1002860,\n\t0x2861: 0x1002861,\n\t0x2862: 0x1002862,\n\t0x2863: 0x1002863,\n\t0x2864: 0x1002864,\n\t0x2865: 0x1002865,\n\t0x2866: 0x1002866,\n\t0x2867: 0x1002867,\n\t0x2868: 0x1002868,\n\t0x2869: 0x1002869,\n\t0x286a: 0x100286a,\n\t0x286b: 0x100286b,\n\t0x286c: 0x100286c,\n\t0x286d: 0x100286d,\n\t0x286e: 0x100286e,\n\t0x286f: 0x100286f,\n\t0x2870: 0x1002870,\n\t0x2871: 0x1002871,\n\t0x2872: 0x1002872,\n\t0x2873: 0x1002873,\n\t0x2874: 0x1002874,\n\t0x2875: 0x1002875,\n\t0x2876: 0x1002876,\n\t0x2877: 0x1002877,\n\t0x2878: 0x1002878,\n\t0x2879: 0x1002879,\n\t0x287a: 0x100287a,\n\t0x287b: 0x100287b,\n\t0x287c: 0x100287c,\n\t0x287d: 0x100287d,\n\t0x287e: 0x100287e,\n\t0x287f: 0x100287f,\n\t0x2880: 0x1002880,\n\t0x2881: 0x1002881,\n\t0x2882: 0x1002882,\n\t0x2883: 0x1002883,\n\t0x2884: 0x1002884,\n\t0x2885: 0x1002885,\n\t0x2886: 0x1002886,\n\t0x2887: 0x1002887,\n\t0x2888: 0x1002888,\n\t0x2889: 0x1002889,\n\t0x288a: 0x100288a,\n\t0x288b: 0x100288b,\n\t0x288c: 0x100288c,\n\t0x288d: 0x100288d,\n\t0x288e: 0x100288e,\n\t0x288f: 0x100288f,\n\t0x2890: 0x1002890,\n\t0x2891: 0x1002891,\n\t0x2892: 0x1002892,\n\t0x2893: 0x1002893,\n\t0x2894: 0x1002894,\n\t0x2895: 0x1002895,\n\t0x2896: 0x1002896,\n\t0x2897: 0x1002897,\n\t0x2898: 0x1002898,\n\t0x2899: 0x1002899,\n\t0x289a: 0x100289a,\n\t0x289b: 0x100289b,\n\t0x289c: 0x100289c,\n\t0x289d: 0x100289d,\n\t0x289e: 0x100289e,\n\t0x289f: 0x100289f,\n\t0x28a0: 0x10028a0,\n\t0x28a1: 0x10028a1,\n\t0x28a2: 0x10028a2,\n\t0x28a3: 0x10028a3,\n\t0x28a4: 0x10028a4,\n\t0x28a5: 0x10028a5,\n\t0x28a6: 0x10028a6,\n\t0x28a7: 0x10028a7,\n\t0x28a8: 0x10028a8,\n\t0x28a9: 0x10028a9,\n\t0x28aa: 0x10028aa,\n\t0x28ab: 0x10028ab,\n\t0x28ac: 0x10028ac,\n\t0x28ad: 0x10028ad,\n\t0x28ae: 0x10028ae,\n\t0x28af: 0x10028af,\n\t0x28b0: 0x10028b0,\n\t0x28b1: 0x10028b1,\n\t0x28b2: 0x10028b2,\n\t0x28b3: 0x10028b3,\n\t0x28b4: 0x10028b4,\n\t0x28b5: 0x10028b5,\n\t0x28b6: 0x10028b6,\n\t0x28b7: 0x10028b7,\n\t0x28b8: 0x10028b8,\n\t0x28b9: 0x10028b9,\n\t0x28ba: 0x10028ba,\n\t0x28bb: 0x10028bb,\n\t0x28bc: 0x10028bc,\n\t0x28bd: 0x10028bd,\n\t0x28be: 0x10028be,\n\t0x28bf: 0x10028bf,\n\t0x28c0: 0x10028c0,\n\t0x28c1: 0x10028c1,\n\t0x28c2: 0x10028c2,\n\t0x28c3: 0x10028c3,\n\t0x28c4: 0x10028c4,\n\t0x28c5: 0x10028c5,\n\t0x28c6: 0x10028c6,\n\t0x28c7: 0x10028c7,\n\t0x28c8: 0x10028c8,\n\t0x28c9: 0x10028c9,\n\t0x28ca: 0x10028ca,\n\t0x28cb: 0x10028cb,\n\t0x28cc: 0x10028cc,\n\t0x28cd: 0x10028cd,\n\t0x28ce: 0x10028ce,\n\t0x28cf: 0x10028cf,\n\t0x28d0: 0x10028d0,\n\t0x28d1: 0x10028d1,\n\t0x28d2: 0x10028d2,\n\t0x28d3: 0x10028d3,\n\t0x28d4: 0x10028d4,\n\t0x28d5: 0x10028d5,\n\t0x28d6: 0x10028d6,\n\t0x28d7: 0x10028d7,\n\t0x28d8: 0x10028d8,\n\t0x28d9: 0x10028d9,\n\t0x28da: 0x10028da,\n\t0x28db: 0x10028db,\n\t0x28dc: 0x10028dc,\n\t0x28dd: 0x10028dd,\n\t0x28de: 0x10028de,\n\t0x28df: 0x10028df,\n\t0x28e0: 0x10028e0,\n\t0x28e1: 0x10028e1,\n\t0x28e2: 0x10028e2,\n\t0x28e3: 0x10028e3,\n\t0x28e4: 0x10028e4,\n\t0x28e5: 0x10028e5,\n\t0x28e6: 0x10028e6,\n\t0x28e7: 0x10028e7,\n\t0x28e8: 0x10028e8,\n\t0x28e9: 0x10028e9,\n\t0x28ea: 0x10028ea,\n\t0x28eb: 0x10028eb,\n\t0x28ec: 0x10028ec,\n\t0x28ed: 0x10028ed,\n\t0x28ee: 0x10028ee,\n\t0x28ef: 0x10028ef,\n\t0x28f0: 0x10028f0,\n\t0x28f1: 0x10028f1,\n\t0x28f2: 0x10028f2,\n\t0x28f3: 0x10028f3,\n\t0x28f4: 0x10028f4,\n\t0x28f5: 0x10028f5,\n\t0x28f6: 0x10028f6,\n\t0x28f7: 0x10028f7,\n\t0x28f8: 0x10028f8,\n\t0x28f9: 0x10028f9,\n\t0x28fa: 0x10028fa,\n\t0x28fb: 0x10028fb,\n\t0x28fc: 0x10028fc,\n\t0x28fd: 0x10028fd,\n\t0x28fe: 0x10028fe,\n\t0x28ff: 0x10028ff,\n};\n\nvar ON_KEYDOWN = 1 << 0; /* Report on keydown, otherwise wait until keypress  */\n\nvar specialKeyTable = {\n\t// These generate a keyDown and keyPress in Firefox and Opera\n\t8: [0xff08, ON_KEYDOWN], // BACKSPACE\n\t13: [0xff0d, ON_KEYDOWN], // ENTER\n\n\t// This generates a keyDown and keyPress in Opera\n\t9: [0xff09, ON_KEYDOWN], // TAB\n\n\t27: 0xff1b, // ESCAPE\n\t46: 0xffff, // DELETE\n\t36: 0xff50, // HOME\n\t35: 0xff57, // END\n\t33: 0xff55, // PAGE_UP\n\t34: 0xff56, // PAGE_DOWN\n\t45: 0xff63, // INSERT\n\t37: 0xff51, // LEFT\n\t38: 0xff52, // UP\n\t39: 0xff53, // RIGHT\n\t40: 0xff54, // DOWN\n\t16: 0xffe1, // SHIFT\n\t17: 0xffe3, // CONTROL\n\t18: 0xffe9, // Left ALT (Mac Command)\n\t112: 0xffbe, // F1\n\t113: 0xffbf, // F2\n\t114: 0xffc0, // F3\n\t115: 0xffc1, // F4\n\t116: 0xffc2, // F5\n\t117: 0xffc3, // F6\n\t118: 0xffc4, // F7\n\t119: 0xffc5, // F8\n\t120: 0xffc6, // F9\n\t121: 0xffc7, // F10\n\t122: 0xffc8, // F11\n\t123: 0xffc9, // F12\n};\n\nfunction getEventKeySym(ev) {\n\tif (typeof ev.which !== \"undefined\" && ev.which > 0) return ev.which;\n\treturn ev.keyCode;\n}\n\n// This is based on the approach from noVNC. We handle\n// everything in keydown that we have all info for, and that\n// are not safe to pass on to the browser (as it may do something\n// with the key. The rest we pass on to keypress so we can get the\n// translated keysym.\nfunction getKeysymSpecial(ev) {\n\tif (ev.keyCode in specialKeyTable) {\n\t\tvar r = specialKeyTable[ev.keyCode];\n\t\tvar flags = 0;\n\t\tif (typeof r != \"number\") {\n\t\t\tflags = r[1];\n\t\t\tr = r[0];\n\t\t}\n\t\tif (ev.type === \"keydown\" || flags & ON_KEYDOWN) return r;\n\t}\n\t// If we don't hold alt or ctrl, then we should be safe to pass\n\t// on to keypressed and look at the translated data\n\tif (!ev.ctrlKey && !ev.altKey) return null;\n\n\tvar keysym = getEventKeySym(ev);\n\n\t/* Remap symbols */\n\tswitch (keysym) {\n\t\tcase 186:\n\t\t\tkeysym = 59;\n\t\t\tbreak; // ; (IE)\n\t\tcase 187:\n\t\t\tkeysym = 61;\n\t\t\tbreak; // = (IE)\n\t\tcase 188:\n\t\t\tkeysym = 44;\n\t\t\tbreak; // , (Mozilla, IE)\n\t\tcase 109: // - (Mozilla, Opera)\n\t\t\tif (true /* TODO: check if browser is firefox or opera */) keysym = 45;\n\t\t\tbreak;\n\t\tcase 189:\n\t\t\tkeysym = 45;\n\t\t\tbreak; // - (IE)\n\t\tcase 190:\n\t\t\tkeysym = 46;\n\t\t\tbreak; // . (Mozilla, IE)\n\t\tcase 191:\n\t\t\tkeysym = 47;\n\t\t\tbreak; // / (Mozilla, IE)\n\t\tcase 192:\n\t\t\tkeysym = 96;\n\t\t\tbreak; // ` (Mozilla, IE)\n\t\tcase 219:\n\t\t\tkeysym = 91;\n\t\t\tbreak; // [ (Mozilla, IE)\n\t\tcase 220:\n\t\t\tkeysym = 92;\n\t\t\tbreak; // \\ (Mozilla, IE)\n\t\tcase 221:\n\t\t\tkeysym = 93;\n\t\t\tbreak; // ] (Mozilla, IE)\n\t\tcase 222:\n\t\t\tkeysym = 39;\n\t\t\tbreak; // ' (Mozilla, IE)\n\t}\n\n\t/* Remap shifted and unshifted keys */\n\tif (!!ev.shiftKey) {\n\t\tswitch (keysym) {\n\t\t\tcase 48:\n\t\t\t\tkeysym = 41;\n\t\t\t\tbreak; // ) (shifted 0)\n\t\t\tcase 49:\n\t\t\t\tkeysym = 33;\n\t\t\t\tbreak; // ! (shifted 1)\n\t\t\tcase 50:\n\t\t\t\tkeysym = 64;\n\t\t\t\tbreak; // @ (shifted 2)\n\t\t\tcase 51:\n\t\t\t\tkeysym = 35;\n\t\t\t\tbreak; // # (shifted 3)\n\t\t\tcase 52:\n\t\t\t\tkeysym = 36;\n\t\t\t\tbreak; // $ (shifted 4)\n\t\t\tcase 53:\n\t\t\t\tkeysym = 37;\n\t\t\t\tbreak; // % (shifted 5)\n\t\t\tcase 54:\n\t\t\t\tkeysym = 94;\n\t\t\t\tbreak; // ^ (shifted 6)\n\t\t\tcase 55:\n\t\t\t\tkeysym = 38;\n\t\t\t\tbreak; // & (shifted 7)\n\t\t\tcase 56:\n\t\t\t\tkeysym = 42;\n\t\t\t\tbreak; // * (shifted 8)\n\t\t\tcase 57:\n\t\t\t\tkeysym = 40;\n\t\t\t\tbreak; // ( (shifted 9)\n\t\t\tcase 59:\n\t\t\t\tkeysym = 58;\n\t\t\t\tbreak; // : (shifted `)\n\t\t\tcase 61:\n\t\t\t\tkeysym = 43;\n\t\t\t\tbreak; // + (shifted ;)\n\t\t\tcase 44:\n\t\t\t\tkeysym = 60;\n\t\t\t\tbreak; // < (shifted ,)\n\t\t\tcase 45:\n\t\t\t\tkeysym = 95;\n\t\t\t\tbreak; // _ (shifted -)\n\t\t\tcase 46:\n\t\t\t\tkeysym = 62;\n\t\t\t\tbreak; // > (shifted .)\n\t\t\tcase 47:\n\t\t\t\tkeysym = 63;\n\t\t\t\tbreak; // ? (shifted /)\n\t\t\tcase 96:\n\t\t\t\tkeysym = 126;\n\t\t\t\tbreak; // ~ (shifted `)\n\t\t\tcase 91:\n\t\t\t\tkeysym = 123;\n\t\t\t\tbreak; // { (shifted [)\n\t\t\tcase 92:\n\t\t\t\tkeysym = 124;\n\t\t\t\tbreak; // | (shifted \\)\n\t\t\tcase 93:\n\t\t\t\tkeysym = 125;\n\t\t\t\tbreak; // } (shifted ])\n\t\t\tcase 39:\n\t\t\t\tkeysym = 34;\n\t\t\t\tbreak; // \" (shifted ')\n\t\t}\n\t} else if (keysym >= 65 && keysym <= 90) {\n\t\t/* Remap unshifted A-Z */\n\t\tkeysym += 32;\n\t} else if (ev.keyLocation === 3) {\n\t\t// numpad keys\n\t\tswitch (keysym) {\n\t\t\tcase 96:\n\t\t\t\tkeysym = 48;\n\t\t\t\tbreak; // 0\n\t\t\tcase 97:\n\t\t\t\tkeysym = 49;\n\t\t\t\tbreak; // 1\n\t\t\tcase 98:\n\t\t\t\tkeysym = 50;\n\t\t\t\tbreak; // 2\n\t\t\tcase 99:\n\t\t\t\tkeysym = 51;\n\t\t\t\tbreak; // 3\n\t\t\tcase 100:\n\t\t\t\tkeysym = 52;\n\t\t\t\tbreak; // 4\n\t\t\tcase 101:\n\t\t\t\tkeysym = 53;\n\t\t\t\tbreak; // 5\n\t\t\tcase 102:\n\t\t\t\tkeysym = 54;\n\t\t\t\tbreak; // 6\n\t\t\tcase 103:\n\t\t\t\tkeysym = 55;\n\t\t\t\tbreak; // 7\n\t\t\tcase 104:\n\t\t\t\tkeysym = 56;\n\t\t\t\tbreak; // 8\n\t\t\tcase 105:\n\t\t\t\tkeysym = 57;\n\t\t\t\tbreak; // 9\n\t\t\tcase 109:\n\t\t\t\tkeysym = 45;\n\t\t\t\tbreak; // -\n\t\t\tcase 110:\n\t\t\t\tkeysym = 46;\n\t\t\t\tbreak; // .\n\t\t\tcase 111:\n\t\t\t\tkeysym = 47;\n\t\t\t\tbreak; // /\n\t\t}\n\t}\n\n\treturn keysym;\n}\n\n/* Translate DOM keyPress event to keysym value */\nfunction getKeysym(ev) {\n\tvar keysym, msg;\n\n\tkeysym = getEventKeySym(ev);\n\n\tif (keysym > 255 && keysym < 0xff00) {\n\t\t// Map Unicode outside Latin 1 to gdk keysyms\n\t\tkeysym = unicodeTable[keysym];\n\t\tif (typeof keysym === \"undefined\") keysym = 0;\n\t}\n\n\treturn keysym;\n}\n\nfunction copyKeyEvent(ev) {\n\tvar members = [\n\t\t\t\"type\",\n\t\t\t\"keyCode\",\n\t\t\t\"charCode\",\n\t\t\t\"which\",\n\t\t\t\"altKey\",\n\t\t\t\"ctrlKey\",\n\t\t\t\"shiftKey\",\n\t\t\t\"keyLocation\",\n\t\t\t\"keyIdentifier\",\n\t\t],\n\t\ti,\n\t\tobj = {};\n\tfor (i = 0; i < members.length; i++) {\n\t\tif (typeof ev[members[i]] !== \"undefined\") obj[members[i]] = ev[members[i]];\n\t}\n\treturn obj;\n}\n\nfunction pushKeyEvent(fev) {\n\tkeyDownList.push(fev);\n}\n\nfunction getKeyEvent(keyCode, pop) {\n\tvar i,\n\t\tfev = null;\n\tfor (i = keyDownList.length - 1; i >= 0; i--) {\n\t\tif (keyDownList[i].keyCode === keyCode) {\n\t\t\tif (typeof pop !== \"undefined\" && pop) fev = keyDownList.splice(i, 1)[0];\n\t\t\telse fev = keyDownList[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn fev;\n}\n\nfunction ignoreKeyEvent(ev) {\n\t// Blarg. Some keys have a different keyCode on keyDown vs keyUp\n\tif (ev.keyCode === 229) {\n\t\t// French AZERTY keyboard dead key.\n\t\t// Lame thing is that the respective keyUp is 219 so we can't\n\t\t// properly ignore the keyUp event\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction handleKeyDown(e) {\n\tvar fev = null,\n\t\tev = e ? e : window.event,\n\t\tkeysym = null,\n\t\tsuppress = false;\n\n\tfev = copyKeyEvent(ev);\n\n\tkeysym = getKeysymSpecial(ev);\n\t// Save keysym decoding for use in keyUp\n\tfev.keysym = keysym;\n\tif (keysym) {\n\t\t// If it is a key or key combination that might trigger\n\t\t// browser behaviors or it has no corresponding keyPress\n\t\t// event, then send it immediately\n\t\tif (!ignoreKeyEvent(ev)) sendInput(\"k\", [keysym, lastState]);\n\t\tsuppress = true;\n\t}\n\n\tif (!ignoreKeyEvent(ev)) {\n\t\t// Add it to the list of depressed keys\n\t\tpushKeyEvent(fev);\n\t}\n\n\tif (suppress) {\n\t\t// Suppress bubbling/default actions\n\t\treturn cancelEvent(ev);\n\t}\n\n\t// Allow the event to bubble and become a keyPress event which\n\t// will have the character code translated\n\treturn true;\n}\n\nfunction handleKeyPress(e) {\n\tvar ev = e ? e : window.event,\n\t\tkdlen = keyDownList.length,\n\t\tkeysym = null;\n\n\tif ((ev.which !== \"undefined\" && ev.which === 0) || getKeysymSpecial(ev)) {\n\t\t// Firefox and Opera generate a keyPress event even if keyDown\n\t\t// is suppressed. But the keys we want to suppress will have\n\t\t// either:\n\t\t// - the which attribute set to 0\n\t\t// - getKeysymSpecial() will identify it\n\t\treturn cancelEvent(ev);\n\t}\n\n\tkeysym = getKeysym(ev);\n\n\t// Modify the which attribute in the depressed keys list so\n\t// that the keyUp event will be able to have the character code\n\t// translation available.\n\tif (kdlen > 0) {\n\t\tkeyDownList[kdlen - 1].keysym = keysym;\n\t} else {\n\t\t//log(\"keyDownList empty when keyPress triggered\");\n\t}\n\n\t// Send the translated keysym\n\tif (keysym > 0) sendInput(\"k\", [keysym, lastState]);\n\n\t// Stop keypress events just in case\n\treturn cancelEvent(ev);\n}\n\nfunction handleKeyUp(e) {\n\tvar fev = null,\n\t\tev = e ? e : window.event,\n\t\ti,\n\t\tkeysym;\n\n\tfev = getKeyEvent(ev.keyCode, true);\n\n\tif (fev) keysym = fev.keysym;\n\telse {\n\t\t//log(\"Key event (keyCode = \" + ev.keyCode + \") not found on keyDownList\");\n\t\tkeysym = 0;\n\t}\n\n\tif (keysym > 0) sendInput(\"K\", [keysym, lastState]);\n\treturn cancelEvent(ev);\n}\n\nfunction onKeyDown(ev) {\n\tupdateForEvent(ev);\n\treturn handleKeyDown(ev);\n}\n\nfunction onKeyPress(ev) {\n\tupdateForEvent(ev);\n\treturn handleKeyPress(ev);\n}\n\nfunction onKeyUp(ev) {\n\tupdateForEvent(ev);\n\treturn handleKeyUp(ev);\n}\n\nfunction cancelEvent(ev) {\n\tev = ev ? ev : window.event;\n\t// we dont want to disable event in web-desktop-environment\n\t// if (ev.stopPropagation) ev.stopPropagation();\n\t// if (ev.preventDefault) ev.preventDefault();\n\t// ev.cancelBubble = true;\n\t// ev.cancel = true;\n\t// ev.returnValue = false;\n\t// return false;\n}\n\nfunction onMouseWheel(ev) {\n\tupdateForEvent(ev);\n\tev = ev ? ev : window.event;\n\n\tvar id = getSurfaceId(ev);\n\tvar pos = getPositionsFromEvent(ev, id);\n\n\tvar offset = ev.detail ? ev.detail : -ev.wheelDelta;\n\tvar dir = 0;\n\tif (offset > 0) dir = 1;\n\tsendInput(\"s\", [\n\t\trealWindowWithMouse,\n\t\tid,\n\t\tpos.rootX,\n\t\tpos.rootY,\n\t\tpos.winX,\n\t\tpos.winY,\n\t\tlastState,\n\t\tdir,\n\t]);\n\n\treturn cancelEvent(ev);\n}\n\nfunction onTouchStart(ev) {\n\tevent.preventDefault();\n\n\tupdateKeyboardStatus();\n\tupdateForEvent(ev);\n\n\tfor (var i = 0; i < ev.changedTouches.length; i++) {\n\t\tvar touch = ev.changedTouches.item(i);\n\n\t\tvar origId = getSurfaceId(touch);\n\t\tvar id = getEffectiveEventTarget(origId);\n\t\tvar pos = getPositionsFromEvent(touch, id);\n\t\tvar isEmulated = 0;\n\n\t\tif (firstTouchDownId == null) {\n\t\t\tfirstTouchDownId = touch.identifier;\n\t\t\tisEmulated = 1;\n\n\t\t\tif (realWindowWithMouse != origId || id != windowWithMouse) {\n\t\t\t\tif (id != 0) {\n\t\t\t\t\tsendInput(\"l\", [\n\t\t\t\t\t\trealWindowWithMouse,\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tpos.rootX,\n\t\t\t\t\t\tpos.rootY,\n\t\t\t\t\t\tpos.winX,\n\t\t\t\t\t\tpos.winY,\n\t\t\t\t\t\tlastState,\n\t\t\t\t\t\tGDK_CROSSING_NORMAL,\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\twindowWithMouse = id;\n\t\t\t\trealWindowWithMouse = origId;\n\n\t\t\t\tsendInput(\"e\", [\n\t\t\t\t\torigId,\n\t\t\t\t\tid,\n\t\t\t\t\tpos.rootX,\n\t\t\t\t\tpos.rootY,\n\t\t\t\t\tpos.winX,\n\t\t\t\t\tpos.winY,\n\t\t\t\t\tlastState,\n\t\t\t\t\tGDK_CROSSING_NORMAL,\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\n\t\tsendInput(\"t\", [\n\t\t\t0,\n\t\t\tid,\n\t\t\ttouch.identifier,\n\t\t\tisEmulated,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t]);\n\t}\n}\n\nfunction onTouchMove(ev) {\n\tevent.preventDefault();\n\n\tupdateKeyboardStatus();\n\tupdateForEvent(ev);\n\n\tfor (var i = 0; i < ev.changedTouches.length; i++) {\n\t\tvar touch = ev.changedTouches.item(i);\n\n\t\tvar origId = getSurfaceId(touch);\n\t\tvar id = getEffectiveEventTarget(origId);\n\t\tvar pos = getPositionsFromEvent(touch, id);\n\n\t\tvar isEmulated = 0;\n\t\tif (firstTouchDownId == touch.identifier) {\n\t\t\tisEmulated = 1;\n\t\t}\n\n\t\tsendInput(\"t\", [\n\t\t\t1,\n\t\t\tid,\n\t\t\ttouch.identifier,\n\t\t\tisEmulated,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t]);\n\t}\n}\n\nfunction onTouchEnd(ev) {\n\tevent.preventDefault();\n\n\tupdateKeyboardStatus();\n\tupdateForEvent(ev);\n\n\tfor (var i = 0; i < ev.changedTouches.length; i++) {\n\t\tvar touch = ev.changedTouches.item(i);\n\n\t\tvar origId = getSurfaceId(touch);\n\t\tvar id = getEffectiveEventTarget(origId);\n\t\tvar pos = getPositionsFromEvent(touch, id);\n\n\t\tvar isEmulated = 0;\n\t\tif (firstTouchDownId == touch.identifier) {\n\t\t\tisEmulated = 1;\n\t\t\tfirstTouchDownId = null;\n\t\t}\n\n\t\tsendInput(\"t\", [\n\t\t\t2,\n\t\t\tid,\n\t\t\ttouch.identifier,\n\t\t\tisEmulated,\n\t\t\tpos.rootX,\n\t\t\tpos.rootY,\n\t\t\tpos.winX,\n\t\t\tpos.winY,\n\t\t\tlastState,\n\t\t]);\n\t}\n}\n\nfunction setupDocument(document) {\n\tdocument.oncontextmenu = function () {\n\t\treturn false;\n\t};\n\t// document.onmousemove = onMouseMove;\n\t// document.onmouseover = onMouseOver;\n\t// document.onmouseout = onMouseOut;\n\t// document.onmousedown = onMouseDown;\n\t// document.onmouseup = onMouseUp;\n\t// document.onkeydown = onKeyDown;\n\t// document.onkeypress = onKeyPress;\n\t// document.onkeyup = onKeyUp;\n\n\tif (document.addEventListener) {\n\t\tdocument.addEventListener(\"mousemove\", onMouseMove, false);\n\t\tdocument.addEventListener(\"mouseover\", onMouseOver, false);\n\t\tdocument.addEventListener(\"mousedown\", onMouseDown, false);\n\t\tdocument.addEventListener(\"mouseup\", onMouseUp, false);\n\t\tdocument.addEventListener(\"keydown\", onKeyDown, false);\n\t\tdocument.addEventListener(\"keypress\", onKeyPress, false);\n\t\tdocument.addEventListener(\"keyup\", onKeyUp, false);\n\n\t\tdocument.addEventListener(\"DOMMouseScroll\", onMouseWheel, false);\n\t\tdocument.addEventListener(\"mousewheel\", onMouseWheel, false);\n\t\tdocument.addEventListener(\"touchstart\", onTouchStart, false);\n\t\tdocument.addEventListener(\"touchmove\", onTouchMove, false);\n\t\tdocument.addEventListener(\"touchend\", onTouchEnd, false);\n\t} else if (document.attachEvent) {\n\t\telement.attachEvent(\"onmousewheel\", onMouseWheel);\n\t}\n}\n\nfunction start() {\n\tsetupDocument(document);\n\n\tvar w, h;\n\tw = window.innerWidth;\n\th = window.innerHeight;\n\twindow.onresize = function (ev) {\n\t\tvar w, h;\n\t\tw = window.innerWidth;\n\t\th = window.innerHeight;\n\t\tsendInput(\"d\", [w, h]);\n\t};\n\tsendInput(\"d\", [w, h]);\n}\n\n\nexport function connect(host, https, port) {\n\tconst ws = new WebSocket(\n\t\t`${https ? \"wss\" : \"ws\"}://${host}:${port}/socket`,\n\t\t\"broadway\"\n\t);\n\tGTKBridgeEmitter.call(\"status\", \"connecting\");\n\tws.binaryType = \"arraybuffer\";\n\n\tws.onopen = function () {\n\t\tGTKBridgeEmitter.call(\"status\", \"connected\");\n\t\tinputSocket = ws;\n\t};\n\tws.onclose = function () {\n\t\tif (inputSocket != null) {\n\t\t\tGTKBridgeEmitter.call(\"status\", \"disconnected\");\n\t\t\trootDiv.innerHTML = \"\";\n\t\t}\n\t\tinputSocket = null;\n\t};\n\tws.onmessage = function (event) {\n\t\thandleMessage(event.data);\n\t};\n\n\tvar iOS = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);\n\tif (iOS) {\n\t\tfakeInput = document.createElement(\"input\");\n\t\tfakeInput.type = \"text\";\n\t\tfakeInput.style.position = \"absolute\";\n\t\tfakeInput.style.left = \"-1000px\";\n\t\tfakeInput.style.top = \"-1000px\";\n\t\trootDiv.appendChild(fakeInput);\n\t}\n}\n\nwindow.stopGDK = () => (active = false);\n","import DesktopInterface, {\n\tApp,\n} from \"@web-desktop-environment/interfaces/lib/views/Desktop\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n\twithStyles,\n\tcreateStyles,\n\tWithStyles,\n\tmakeStyles,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\nimport TextField from \"@components/textField\";\nimport Icon from \"@components/icon\";\nimport windowManager from \"@state/WindowManager\";\nimport MountUnmountAnimation from \"@components/mountUnmountAnimation\";\nimport { Link } from \"react-router-dom\";\nimport { Client } from \"@react-fullstack/fullstack-socket-client\";\nimport { ConnectionContext } from \"@root/contexts\";\nimport StateComponent from \"@components/stateComponent\";\nimport { transparent } from \"@utils/colors\";\nimport { connect } from \"@root/gtk-broadway-display/index\";\nimport {\n\tGTKBridgeEmitter,\n\tstatus as GTKConnectionStatus,\n} from \"@root/gtk-broadway-display/state\";\n\nexport const windowsBarHeight = 55;\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tright: 0,\n\t\t\tleft: 0,\n\t\t},\n\t\tswitchToNativeButton: {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 10 - windowsBarHeight,\n\t\t\ttransition: \"top 300ms\",\n\t\t\tright: 45,\n\t\t\theight: windowsBarHeight,\n\t\t\tcursor: \"pointer\",\n\t\t\twidth: 80,\n\t\t\tborderRadius: \"0 0 15px 15px\",\n\t\t\tfontSize: 40,\n\t\t\tpaddingTop: 5,\n\t\t\tborderBottom: \"none\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tcolor: theme.background.text,\n\t\t\tboxShadow: `0 0px 3px 0px ${theme.shadowColor}`,\n\t\t\tborder: `1px solid ${theme.transparentBorder || \"#eee2\"}`,\n\t\t\tbackdropFilter: \"blur(10px)\",\n\t\t\tbackground: transparent(\n\t\t\t\ttheme.background.transparent || theme.background.main,\n\t\t\t\ttheme.type === \"transparent\" ? 0.15 : 0.6\n\t\t\t),\n\t\t\t\"&:hover\": {\n\t\t\t\ttop: 0,\n\t\t\t\tbackground: theme.background.transparent,\n\t\t\t},\n\t\t\tzIndex: windowManager.windowsMinMaxLayer.max + 1,\n\t\t},\n\t\t\"@keyframes slideIn\": {\n\t\t\t\"0%\": {\n\t\t\t\ttransform: \"translateX(-100%)\",\n\t\t\t},\n\t\t\t\"100%\": {\n\t\t\t\ttransform: \"translateX(0%)\",\n\t\t\t},\n\t\t},\n\t\t\"@keyframes slideOut\": {\n\t\t\t\"0%\": {\n\t\t\t\ttransform: \"translateX(0%)\",\n\t\t\t},\n\t\t\t\"100%\": {\n\t\t\t\ttransform: \"translateX(-100%)\",\n\t\t\t},\n\t\t},\n\t\tslideIn: {\n\t\t\tanimation: \"$slideIn 200ms\",\n\t\t},\n\t\tslideOut: {\n\t\t\tanimation: \"$slideOut 200ms\",\n\t\t},\n\t\tstartMenu: {\n\t\t\tposition: \"absolute\",\n\t\t\tzIndex: windowManager.windowsMinMaxLayer.max + 1,\n\t\t\tbottom: 105,\n\t\t\tleft: 15,\n\t\t\twidth: 500,\n\t\t\theight: 500,\n\t\t\tmaxHeight: \"60%\",\n\t\t\tmaxWidth: \"30%\",\n\t\t\toverflowY: \"auto\",\n\t\t\tpadding: 5,\n\t\t\tborderRadius: 10,\n\t\t\tborder: `1px solid ${theme.transparentBorder || \"#eee2\"}`,\n\t\t\tbackdropFilter: \"blur(10px)\",\n\t\t\tbackground: transparent(\n\t\t\t\ttheme.background.transparent || theme.background.main,\n\t\t\t\ttheme.type === \"transparent\" ? 0.15 : 0.6\n\t\t\t),\n\t\t\tboxShadow: \"-5px 6px 10px -1px #0007\",\n\t\t},\n\t\tstartMenuBody: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tmarginTop: 20,\n\t\t},\n\t\tappList: {\n\t\t\tmargin: 7,\n\t\t},\n\t\tappCell: {\n\t\t\tminHeight: 54,\n\t\t\tpadding: 10,\n\t\t\tmarginTop: 15,\n\t\t\tboxSizing: \"border-box\",\n\t\t\tborderBottom: `1px solid ${theme.windowBorderColor}`,\n\t\t\tdisplay: \"flex\",\n\t\t\tborderRadius: 7,\n\t\t\tcolor: theme.background.text,\n\t\t\tcursor: \"pointer\",\n\t\t\tboxShadow: `-1px 2px 20px 2px ${theme.shadowColor}`,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.background.transparentDark || theme.background.dark,\n\t\t\t},\n\t\t},\n\t\tappIcon: {\n\t\t\tflexShrink: 0,\n\t\t\twidth: 50,\n\t\t\theight: 50,\n\t\t\tfontSize: 50,\n\t\t},\n\t\tappContent: {\n\t\t\ttextAlign: \"left\",\n\t\t\tmarginLeft: 10,\n\t\t\toverflow: \"hidden\",\n\t\t\tflexGrow: 1,\n\t\t},\n\t\tappName: {\n\t\t\tfontSize: \"x-large\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t},\n\t\tstartMenuSearch: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t});\n\nconst useWindowBarStyles = makeStyles((theme: Theme) => ({\n\twindowsBar: {\n\t\tposition: \"absolute\",\n\t\tanimation: \"$slideUp 1s\",\n\t\tbottom: 5,\n\t\tleft: 120,\n\t\tright: 120,\n\t\tborderRadius: 13,\n\t\theight: windowsBarHeight,\n\t\tdisplay: \"flex\",\n\t\tborder: `1px solid ${theme.transparentBorder || \"#eee2\"}`,\n\t\tbackdropFilter: \"blur(10px)\",\n\t\tbackground: transparent(\n\t\t\ttheme.background.transparent || theme.background.main,\n\t\t\ttheme.type === \"transparent\" ? 0.15 : 0.6\n\t\t),\n\t\tpaddingLeft: 10,\n\t\tboxShadow: \"0 0px 3px 0px\",\n\t\tzIndex: windowManager.windowsMinMaxLayer.max + 1,\n\t\toverflowX: \"auto\",\n\t\toverflowY: \"hidden\",\n\t},\n\t\"@keyframes slideUp\": {\n\t\tfrom: {\n\t\t\tbottom: -windowsBarHeight - 5,\n\t\t},\n\t\tto: {\n\t\t\tbottom: 5,\n\t\t},\n\t},\n\twindowsBarButton: {\n\t\tuserSelect: \"none\",\n\t\tfontSize: 40,\n\t\tboxShadow: \"0px 0px 10px 4px #0007\",\n\t\ttransition: \"border-bottom 100ms\",\n\t\tpadding: 5,\n\t\tmargin: 2,\n\t\tborderRadius: 6,\n\t\tmarginRight: 5,\n\t\tmarginLeft: 5,\n\t\tcursor: \"pointer\",\n\t\tcolor: theme.background.text,\n\t\t\"&:hover\": {\n\t\t\tbackground: theme.background.transparentDark || theme.background.dark,\n\t\t},\n\t},\n\twindowsBarButtonHover: {\n\t\tposition: \"absolute\",\n\t\ttransform: \"translateY(-150%) translateX(-33%)\",\n\t\twidth: 200,\n\t\theight: 150,\n\t\tborderRadius: 6,\n\t\tfontSize: 20,\n\t\tbackground: `${theme.background.main} !important`,\n\t\tborder: `solid 1px ${theme.windowBorderColor}`,\n\t\ttextAlign: \"center\",\n\t\tanimation: \"$scaleUp 300ms\",\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t},\n\t\"@keyframes scaleUp\": {\n\t\tfrom: {\n\t\t\topacity: 0,\n\t\t\twidth: 150,\n\t\t\theight: 130,\n\t\t\tborderRadius: 0,\n\t\t},\n\t\tto: {\n\t\t\topacity: 1,\n\t\t\twidth: 200,\n\t\t\theight: 150,\n\t\t\tborderRadius: 8,\n\t\t},\n\t},\n\twindowsBarButtonActive: {\n\t\tbackdropFilter: \"blur(15px)\",\n\t\tborderBottom: `${\n\t\t\ttheme.type === \"transparent\" ? theme.success.main : theme.secondary.main\n\t\t} solid 6px !important`,\n\t},\n\twindowsBarButtonOpen: {\n\t\tborderBottom: `${\n\t\t\ttheme.type === \"transparent\" ? theme.success.main : theme.secondary.main\n\t\t} solid 3px`,\n\t},\n\twindowsBarButtonCloseMinimized: {\n\t\tborderBottom: `${theme.secondary.dark} solid 3px`,\n\t},\n}));\n\nclass Desktop extends Component<\n\tDesktopInterface,\n\t{},\n\tWithStyles<typeof styles>\n> {\n\trenderAppListCell = (app: App, index: number) => {\n\t\tconst { classes, onLaunchApp } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={index}\n\t\t\t\tclassName={classes.appCell}\n\t\t\t\tonClick={() => app && onLaunchApp({ name: app.appName, params: {} })}\n\t\t\t>\n\t\t\t\t{app.icon.type === \"img\" ? (\n\t\t\t\t\t<img alt={`${app.displayName} icon`} src={app.icon.icon} />\n\t\t\t\t) : (\n\t\t\t\t\t<Icon className={classes.appIcon} name={app.icon.icon}></Icon>\n\t\t\t\t)}\n\t\t\t\t<div className={classes.appContent}>\n\t\t\t\t\t<div className={classes.appName}>{app.displayName}</div>\n\t\t\t\t\t<div>{app.description}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\twillUnmount = false;\n\n\tcomponentWillUnmount = () => {\n\t\tthis.willUnmount = true;\n\t};\n\n\tcomponentDidMount = () => {\n\t\tGTKBridgeEmitter.on(\"status\", () => {\n\t\t\tthis.forceUpdate();\n\t\t});\n\n\t\tthis.tryToStartGtkServer();\n\t};\n\n\tcomponentDidUpdate = () => {\n\t\tthis.tryToStartGtkServer();\n\t};\n\n\ttryToStartGtkServer = () => {\n\t\tconst { gtkBridge } = this.props;\n\t\tif (GTKConnectionStatus === \"disconnected\" && gtkBridge) {\n\t\t\ttry {\n\t\t\t\tconnect(\n\t\t\t\t\treactFullstackConnectionManager.host,\n\t\t\t\t\treactFullstackConnectionManager.https,\n\t\t\t\t\tgtkBridge.port\n\t\t\t\t);\n\t\t\t} catch (e) {\n\t\t\t\t/* no handle */\n\t\t\t}\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { background, openApps, classes, apps } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.root} style={{ background }}>\n\t\t\t\t{openApps.map((app) => (\n\t\t\t\t\t<ConnectionContext.Provider\n\t\t\t\t\t\tkey={app.id}\n\t\t\t\t\t\tvalue={{\n\t\t\t\t\t\t\thost: reactFullstackConnectionManager.host,\n\t\t\t\t\t\t\tport: app.port,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\tkey={app.id}\n\t\t\t\t\t\t\t{...reactFullstackConnectionManager.connect(\n\t\t\t\t\t\t\t\tapp.port,\n\t\t\t\t\t\t\t\t\"webWindow\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t))}\n\t\t\t\t<Link to=\"/native\">\n\t\t\t\t\t<div className={classes.switchToNativeButton}>\n\t\t\t\t\t\t<Icon width={40} height={40} name=\"VscWindow\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Link>\n\t\t\t\t<StateComponent\n\t\t\t\t\tdefaultState={{ isStartMenuOpen: false, startMenuQuery: \"\" }}\n\t\t\t\t>\n\t\t\t\t\t{({ isStartMenuOpen, startMenuQuery }, setState) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<WindowBar\n\t\t\t\t\t\t\t\t\tisStartMenuOpen={isStartMenuOpen}\n\t\t\t\t\t\t\t\t\ttoggleStartMenu={() =>\n\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\tisStartMenuOpen: !isStartMenuOpen,\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<MountUnmountAnimation\n\t\t\t\t\t\t\t\t\tmount={isStartMenuOpen}\n\t\t\t\t\t\t\t\t\tclassName={`${classes.startMenu} ${\n\t\t\t\t\t\t\t\t\t\tisStartMenuOpen ? classes.slideIn : classes.slideOut\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className={classes.startMenuBody}>\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.startMenuSearch}\n\t\t\t\t\t\t\t\t\t\t\tborderBottom={false}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"search app\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={startMenuQuery}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(startMenuQuery) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetState({ startMenuQuery })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></TextField>\n\t\t\t\t\t\t\t\t\t\t{apps\n\t\t\t\t\t\t\t\t\t\t\t.filter((app) =>\n\t\t\t\t\t\t\t\t\t\t\t\tstartMenuQuery\n\t\t\t\t\t\t\t\t\t\t\t\t\t? app.displayName.includes(startMenuQuery) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t  app.description.includes(startMenuQuery) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t  app.appName.includes(startMenuQuery)\n\t\t\t\t\t\t\t\t\t\t\t\t\t: true\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t.map((app, index) => this.renderAppListCell(app, index))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</MountUnmountAnimation>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</StateComponent>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport const WindowBar = ({\n\ttoggleStartMenu,\n\tisStartMenuOpen,\n}: {\n\ttoggleStartMenu: () => void;\n\tisStartMenuOpen: boolean;\n}) => {\n\tconst classes = useWindowBarStyles();\n\tconst [openWindows, setOpenWindows] = useState(windowManager.windows);\n\tconst [selectedButton, setSelectedButton] = useState<number | undefined>(\n\t\tundefined\n\t);\n\tuseEffect(() => {\n\t\tconst updateWindow = () => setOpenWindows([...windowManager.windows]);\n\t\tupdateWindow();\n\t\twindowManager.emitter.on(\"addWindow\", updateWindow);\n\t\twindowManager.emitter.on(\"closeWindow\", updateWindow);\n\t\twindowManager.emitter.on(\"maximizeWindow\", updateWindow);\n\t\twindowManager.emitter.on(\"minimizeWindow\", updateWindow);\n\t\twindowManager.emitter.on(\"setActiveWindow\", updateWindow);\n\t}, []);\n\treturn (\n\t\t<div className={classes.windowsBar}>\n\t\t\t<div\n\t\t\t\tclassName={`${classes.windowsBarButton} ${\n\t\t\t\t\t!isStartMenuOpen\n\t\t\t\t\t\t? classes.windowsBarButtonCloseMinimized\n\t\t\t\t\t\t: classes.windowsBarButtonOpen\n\t\t\t\t} ${isStartMenuOpen ? classes.windowsBarButtonActive : \"\"}`}\n\t\t\t\tonClick={() => toggleStartMenu()}\n\t\t\t>\n\t\t\t\t<Icon width={40} height={40} name=\"FcList\" />\n\t\t\t</div>\n\t\t\t{openWindows.map((openWindow, index) => (\n\t\t\t\t<div\n\t\t\t\t\tkey={index}\n\t\t\t\t\tonContextMenu={() =>\n\t\t\t\t\t\tindex === selectedButton\n\t\t\t\t\t\t\t? setSelectedButton(undefined)\n\t\t\t\t\t\t\t: setSelectedButton(index)\n\t\t\t\t\t}\n\t\t\t\t\tclassName={`${classes.windowsBarButton} ${\n\t\t\t\t\t\topenWindow.state.minimized\n\t\t\t\t\t\t\t? classes.windowsBarButtonCloseMinimized\n\t\t\t\t\t\t\t: classes.windowsBarButtonOpen\n\t\t\t\t\t} ${\n\t\t\t\t\t\topenWindow.id === windowManager.activeWindowId &&\n\t\t\t\t\t\t!openWindow.state.minimized\n\t\t\t\t\t\t\t? classes.windowsBarButtonActive\n\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t}`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (windowManager.activeWindowId === openWindow.id) {\n\t\t\t\t\t\t\twindowManager.updateState(openWindow.id, {\n\t\t\t\t\t\t\t\tminimized: !openWindow.state.minimized,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twindowManager.updateState(openWindow.id, {\n\t\t\t\t\t\t\t\tminimized: false,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{openWindow.icon.type === \"img\" ? (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\talt={`${openWindow.name} icon`}\n\t\t\t\t\t\t\tsrc={openWindow.icon.icon}\n\t\t\t\t\t\t\twidth={40}\n\t\t\t\t\t\t\theight={40}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Icon name={openWindow.icon.icon} />\n\t\t\t\t\t)}\n\t\t\t\t\t{selectedButton === index && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={() => setSelectedButton(undefined)}\n\t\t\t\t\t\t\tclassName={`${classes.windowsBarButton} ${\n\t\t\t\t\t\t\t\topenWindow.state.minimized\n\t\t\t\t\t\t\t\t\t? classes.windowsBarButtonCloseMinimized\n\t\t\t\t\t\t\t\t\t: classes.windowsBarButtonOpen\n\t\t\t\t\t\t\t} ${\n\t\t\t\t\t\t\t\topenWindow.id === windowManager.activeWindowId\n\t\t\t\t\t\t\t\t\t? classes.windowsBarButtonActive\n\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t} ${classes.windowsBarButtonHover}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{openWindow.icon.type === \"img\" ? (\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\talt={`${openWindow.name} icon`}\n\t\t\t\t\t\t\t\t\tsrc={openWindow.icon.icon}\n\t\t\t\t\t\t\t\t\twidth={100}\n\t\t\t\t\t\t\t\t\theight={100}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Icon size={100} name={openWindow.icon.icon} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div>{openWindow.name}</div>{\" \"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n};\n\nexport default withStyles(styles)(Desktop);\n","import { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\n\nexport type ColorVariants =\n\t| \"main\"\n\t| \"dark\"\n\t| \"light\"\n\t| \"transparent\"\n\t| \"transparentDark\"\n\t| \"transparentLight\";\n\nexport type Colors =\n\t| \"background\"\n\t| \"primary\"\n\t| \"secondary\"\n\t| \"success\"\n\t| \"warning\"\n\t| \"error\";\n\nconst transparentTheme: Theme = {\n\ttype: \"transparent\",\n\tname: \"transparent\",\n\twindowBarColor: \"#BFBFBF57\",\n\tshadowColor: \"#0007\",\n\twindowBorderColor: \"#000\",\n\tbackground: {\n\t\tmain: \"#BFBFBF27\",\n\t\tlight: \"#EFEFEF67\",\n\t\tdark: \"#8F8F8F67\",\n\t\ttransparent: \"#BFBFBF37\",\n\t\ttransparentDark: \"#BFBFBF44\",\n\t\ttext: \"#fff\",\n\t},\n\tprimary: {\n\t\tmain: \"#fff9\",\n\t\tlight: \"#fffe\",\n\t\tdark: \"#eee7\",\n\t\ttransparent: \"#fff2\",\n\t\ttransparentDark: \"#fff4\",\n\t\ttext: \"#000\",\n\t},\n\tsecondary: {\n\t\tmain: \"#0004\",\n\t\tlight: \"#0003\",\n\t\tdark: \"#0005\",\n\t\ttext: \"#fff\",\n\t},\n\terror: {\n\t\tmain: \"#db5049ee\",\n\t\tlight: \"#ff354c88\",\n\t\tdark: \"#f00\",\n\t\ttext: \"#fff\",\n\t},\n\tsuccess: {\n\t\tmain: \"#21c62f88\",\n\t\ttransparent: \"#21c62f48\",\n\t\tdark: \"#21c62fb8\",\n\t\tlight: \"#21c62fee\",\n\t\ttext: \"#fff\",\n\t},\n\twarning: {\n\t\tmain: \"#ffd951\",\n\t\tlight: \"#ffeb51\",\n\t\tdark: \"#ae9941\",\n\t\ttext: \"#fff\",\n\t},\n\twindowBorder: false,\n};\n\nconst transparentDarkTheme: Theme = {\n\ttype: \"transparent\",\n\tname: \"transparent dark\",\n\twindowBarColor: \"#33333377\",\n\tshadowColor: \"#0007\",\n\twindowBorderColor: \"#eee4\",\n\tbackground: {\n\t\tmain: \"#33333357\",\n\t\tlight: \"#44444477\",\n\t\tdark: \"#24242477\",\n\t\ttransparent: \"#37373747\",\n\t\ttransparentDark: \"#24242444\",\n\t\ttext: \"#d9d9da\",\n\t},\n\tprimary: {\n\t\tmain: \"#eee9\",\n\t\tlight: \"#fffe\",\n\t\tdark: \"#bbb7\",\n\t\ttransparent: \"#bebebe22\",\n\t\ttransparentDark: \"#bebebe44\",\n\t\ttext: \"#000\",\n\t},\n\tsecondary: {\n\t\tmain: \"#315bef44\",\n\t\tlight: \"#214b9f33\",\n\t\ttransparent: \"#315bef22\",\n\t\tdark: \"#214b9f55\",\n\t\ttext: \"#fff\",\n\t},\n\terror: {\n\t\tmain: \"#db5049ee\",\n\t\tlight: \"#ff354c88\",\n\t\tdark: \"#f00\",\n\t\ttext: \"#fff\",\n\t},\n\tsuccess: {\n\t\tmain: \"#21c62f88\",\n\t\ttransparent: \"#21c62f48\",\n\t\tdark: \"#21c62fb8\",\n\t\tlight: \"#21c62fee\",\n\t\ttext: \"#fff\",\n\t},\n\twarning: {\n\t\tmain: \"#ffd951\",\n\t\tlight: \"#ffeb51\",\n\t\tdark: \"#ae9941\",\n\t\ttext: \"#fff\",\n\t},\n\twindowBorder: true,\n};\n\nconst lightTheme: Theme = {\n\ttype: \"light\",\n\tname: \"light\",\n\tbackground: {\n\t\tmain: \"#f5f5f4\",\n\t\tdark: \"#e4e9f2\",\n\t\tlight: \"#fff\",\n\t\ttext: \"#222\",\n\t\tdarkText: \"#000\",\n\t\ttransparentLight: \"#fff\",\n\t\ttransparent: \"#fff9\",\n\t\ttransparentDark: \"#e4e9f299\",\n\t},\n\tprimary: {\n\t\tmain: \"#333333\",\n\t\tdark: \"#242424\",\n\t\tlight: \"#444444\",\n\t\ttext: \"#d9d9da\",\n\t\tdarkText: \"#de2cb7\",\n\t\ttransparentLight: \"#444\",\n\t\ttransparent: \"#373737e9\",\n\t\ttransparentDark: \"#24242499\",\n\t},\n\tsecondary: {\n\t\tmain: \"#4585b2\",\n\t\tdark: \"#357592\",\n\t\tlight: \"#abcbe2\",\n\t\ttext: \"#222\",\n\t\tdarkText: \"#29d436\",\n\t\ttransparentLight: \"#fff\",\n\t\ttransparent: \"#4585b288\",\n\t\ttransparentDark: \"#35759299\",\n\t},\n\twindowBorderColor: \"#000\",\n\tshadowColor: \"#33333377\",\n\tsuccess: {\n\t\tmain: \"#21c62f88\",\n\t\tdark: \"#21c62fb8\",\n\t\tlight: \"#21c62fee\",\n\t\ttext: \"#fff\",\n\t\tdarkText: \"#c73898\",\n\t\ttransparentLight: \"#444\",\n\t\ttransparent: \"#37c56676\",\n\t\ttransparentDark: \"#37c5666a\",\n\t},\n\twindowBarColor: \"#fff\",\n\terror: {\n\t\tmain: \"#db5049ee\",\n\t\tlight: \"#ff354c88\",\n\t\tdark: \"#f00\",\n\t\ttext: \"#fff\",\n\t\tdarkText: \"#24adb4\",\n\t\ttransparentLight: \"#fff\",\n\t\ttransparent: \"#db50498f\",\n\t\ttransparentDark: \"#db504981\",\n\t},\n\twarning: {\n\t\tmain: \"#ffd951\",\n\t\tlight: \"#ffeb51\",\n\t\tdark: \"#ae9941\",\n\t\ttext: \"#fff\",\n\t\tdarkText: \"#0025ab\",\n\t\ttransparentLight: \"#444\",\n\t\ttransparent: \"#ffd95199\",\n\t\ttransparentDark: \"#ffd9518a\",\n\t},\n\twindowBorder: true,\n};\n\nconst darkTheme: Theme = {\n\ttype: \"dark\",\n\tname: \"dark\",\n\tshadowColor: \"#0007\",\n\twindowBorderColor: \"#000\",\n\twindowBarColor: \"#333333\",\n\tbackground: {\n\t\tmain: \"#333333\",\n\t\tlight: \"#444444\",\n\t\ttransparent: \"#373737e9\",\n\t\tdark: \"#242424\",\n\t\ttransparentDark: \"#24242499\",\n\t\ttext: \"#d9d9da\",\n\t},\n\tprimary: {\n\t\tmain: \"#eee\",\n\t\ttransparent: \"#e8e8e869\",\n\t\tlight: \"#fff\",\n\t\tdark: \"#bbb\",\n\t\ttransparentDark: \"#bebebe99\",\n\t\ttext: \"#000\",\n\t},\n\tsecondary: {\n\t\tmain: \"#315bef\",\n\t\tdark: \"#214b9f\",\n\t\tlight: \"#416bef\",\n\t\ttransparent: \"#315bef97\",\n\t\ttext: \"#fff\",\n\t},\n\terror: {\n\t\tmain: \"#db5049ee\",\n\t\tlight: \"#ff354c88\",\n\t\tdark: \"#f00\",\n\t\ttext: \"#fff\",\n\t},\n\tsuccess: {\n\t\tmain: \"#21c62f88\",\n\t\tdark: \"#21c62fb8\",\n\t\tlight: \"#21c62fee\",\n\t\ttext: \"#fff\",\n\t},\n\twarning: {\n\t\tmain: \"#ffd951\",\n\t\tlight: \"#ffeb51\",\n\t\tdark: \"#ae9941\",\n\t\ttext: \"#fff\",\n\t},\n\twindowBorder: true,\n};\n\nconst nordTheme: Theme = {\n\ttype: \"dark\",\n\tname: \"nord\",\n\tshadowColor: \"#0006\",\n\twindowBorderColor: \"#292f3c\",\n\twindowBarColor: \"#3d4455\",\n\tbackground: {\n\t\tmain: \"#3d4455\",\n\t\tlight: \"#434c5e\",\n\t\ttransparent: \"#3d4455e9\",\n\t\tdark: \"#2e3440\",\n\t\ttransparentDark: \"#2e344099\",\n\t\ttext: \"#eee\",\n\t},\n\tprimary: {\n\t\tmain: \"#2e343f\",\n\t\ttransparent: \"#2e343f69\",\n\t\tlight: \"#3b4251\",\n\t\tdark: \"#262b34\",\n\t\ttransparentDark: \"#262b3499\",\n\t\ttext: \"#fff\",\n\t},\n\tsecondary: {\n\t\tmain: \"#8fbcbb\",\n\t\tdark: \"#6f8a91\",\n\t\tlight: \"#8abbb9\",\n\t\ttransparent: \"#8fbcbb97\",\n\t\ttext: \"#fff\",\n\t},\n\terror: {\n\t\tmain: \"#c6616c\",\n\t\tlight: \"#c6616c88\",\n\t\tdark: \"#b65e5c\",\n\t\ttext: \"#fff\",\n\t},\n\tsuccess: {\n\t\tmain: \"#9dbd90\",\n\t\tdark: \"#9dbd90b8\",\n\t\tlight: \"#9dbd90ee\",\n\t\ttext: \"#fff\",\n\t},\n\twarning: {\n\t\tmain: \"#ffd951\",\n\t\tlight: \"#ffeb51\",\n\t\tdark: \"#ae9941\",\n\t\ttext: \"#fff\",\n\t},\n\twindowBorder: true,\n};\n\nexport const defaultTheme = darkTheme;\n\nexport const Themes = {\n\tdark: darkTheme,\n\tnord: nordTheme,\n\tlight: lightTheme,\n\ttransparent: transparentTheme,\n\ttransparentDark: transparentDarkTheme,\n};\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport ThemeProviderInterface from \"@web-desktop-environment/interfaces/lib/views/ThemeProvider\";\nimport { ThemeProvider as TP } from \"@material-ui/styles\";\nimport { Themes } from \"@root/theme\";\n\nclass ThemeProvider extends Component<ThemeProviderInterface> {\n\trender() {\n\t\tif (this.props.theme === \"custom\" && this.props.customTheme) {\n\t\t\treturn <TP theme={this.props.customTheme}>{this.props.children}</TP>;\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<TP theme={Themes[this.props.theme as keyof typeof Themes]}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</TP>\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport class EmptyThemeProvider extends Component<ThemeProviderInterface> {\n\trender() {\n\t\treturn this.props.children || <></>;\n\t}\n}\n\nexport default ThemeProvider;\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport WindowInterface, {\n\tWindowState as LocalWindowState,\n} from \"@web-desktop-environment/interfaces/lib/views/Window\";\nimport { withStyles, createStyles, WithStyles } from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport ReactDOM from \"react-dom\";\nimport windowManager from \"@state/WindowManager\";\nimport { windowsBarHeight as desktopWindowsBarHeight } from \"@views/Desktop\";\nimport Icon from \"@components/icon\";\nimport { Rnd, RndDragCallback, RndResizeCallback } from \"react-rnd\";\nimport { ConnectionContext } from \"@root/contexts\";\nimport { lastTaskQueuer } from \"@utils/tasks\";\n\nexport const defaultWindowSize = {\n\theight: 600,\n\twidth: 700,\n\tmaxHeight: 700,\n\tmaxWidth: 1000,\n\tminHeight: 300,\n\tminWidth: 400,\n};\n\nexport const windowBarHeight = 25;\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t},\n\t\tbar: {\n\t\t\tbackground: theme.windowBarColor,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(15px)\" : \"none\",\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\tborderBottom: \"none\",\n\t\t\tborderRadius: \"7px 7px 0 0\",\n\t\t\tcursor: \"move\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"row-reverse\",\n\t\t\theight: windowBarHeight,\n\t\t\twidth: \"100%\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t},\n\t\tsmoothMove: {\n\t\t\ttransition: \"top 305ms, left 305ms\",\n\t\t},\n\t\tbarCollapse: {\n\t\t\tborderRadius: \"7px 7px 7px 7px\",\n\t\t\tborderBottom: `1px solid ${theme.windowBorderColor}`,\n\t\t},\n\t\tbody: {\n\t\t\tborderRadius: \"0 0 3px 3px\",\n\t\t\twidth: \"100%\",\n\t\t\theight: `calc(100% - ${windowBarHeight}px)`,\n\t\t},\n\t\tbarButtonsContainer: {\n\t\t\tposition: \"relative\",\n\t\t\ttop: 4,\n\t\t\tright: 5,\n\t\t\twidth: 40,\n\t\t\theight: 20,\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t},\n\t\tbarButton: {\n\t\t\twidth: 15,\n\t\t\theight: 15,\n\t\t\tborderRadius: \"50%\",\n\t\t\tzIndex: 2,\n\t\t\tborder: \"1px solid #0004\",\n\t\t},\n\t\tbarButtonExit: {\n\t\t\tcursor: \"pointer\",\n\t\t\tbackground: theme.error.main,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.error.dark,\n\t\t\t},\n\t\t},\n\t\tbarButtonCollapse: {\n\t\t\tcursor: \"pointer\",\n\t\t\tbackground: theme.success.main,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.success.dark,\n\t\t\t},\n\t\t},\n\t\tbarButtonInactive: {\n\t\t\tbackground: theme.primary.transparent,\n\t\t},\n\t\tbarTitle: {\n\t\t\tposition: \"relative\",\n\t\t\ttop: 2,\n\t\t\tleft: 45,\n\t\t\twidth: \"100%\",\n\t\t\ttextAlign: \"center\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\tmaxWidth: \"calc(100% - 90px)\",\n\t\t\tuserSelect: \"none\",\n\t\t\tcolor: theme.background.text,\n\t\t},\n\t\tbarTitleIcon: {\n\t\t\tposition: \"relative\",\n\t\t\ttop: 3,\n\t\t},\n\t});\n\ntype WindowSnap = \"fullscreen\" | \"right\" | \"left\";\n\ninterface WindowState {\n\tcanDrag: boolean;\n\tcollapse: boolean;\n\tisActive?: boolean;\n\tlocalWindowState?: LocalWindowState;\n\tuseLocalWindowState: boolean;\n\tisResizing: boolean;\n\tzIndex?: number;\n\tsnap?: WindowSnap;\n}\n\nclass Window extends Component<\n\tWindowInterface,\n\tWindowState,\n\tWithStyles<typeof styles>\n> {\n\tdomContainer: Element;\n\tid!: number;\n\twrapperRef?: HTMLDivElement;\n\n\tconstructor(props: Window[\"props\"]) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcanDrag: false,\n\t\t\tcollapse: props.window.minimized || false,\n\t\t\tuseLocalWindowState: false,\n\t\t\tisResizing: false,\n\t\t};\n\n\t\tthis.domContainer = document.createElement(\"div\");\n\t\tdocument.getElementById(\"app\")?.appendChild(this.domContainer);\n\t}\n\n\tstatic contextType = ConnectionContext;\n\n\tcontext!: React.ContextType<typeof ConnectionContext>;\n\n\tpercentageToNumber = (size: number | string, from: number) => {\n\t\tif (typeof size === \"number\") {\n\t\t\treturn size;\n\t\t}\n\t\treturn (100 / Number(size.replace(\"%\", \"\"))) * from;\n\t};\n\n\tscreenSizesToNumbers = () => {\n\t\tconst { maxHeight, maxWidth, minHeight, minWidth } = this.props.window;\n\t\treturn {\n\t\t\tmaxHeight: this.percentageToNumber(\n\t\t\t\tmaxHeight || defaultWindowSize.maxHeight,\n\t\t\t\twindow.innerHeight\n\t\t\t),\n\t\t\tminHeight: this.percentageToNumber(\n\t\t\t\tminHeight || defaultWindowSize.minHeight,\n\t\t\t\twindow.innerHeight\n\t\t\t),\n\t\t\tmaxWidth: this.percentageToNumber(\n\t\t\t\tmaxWidth || defaultWindowSize.maxWidth,\n\t\t\t\twindow.innerWidth\n\t\t\t),\n\t\t\tminWidth: this.percentageToNumber(\n\t\t\t\tminWidth || defaultWindowSize.minWidth,\n\t\t\t\twindow.innerWidth\n\t\t\t),\n\t\t};\n\t};\n\n\tgetSize = () => {\n\t\tconst size = { ...(this.windowProperties.size || {}) };\n\t\tconst { collapse } = this.state;\n\t\tconst {\n\t\t\tmaxHeight,\n\t\t\tmaxWidth,\n\t\t\tminHeight,\n\t\t\tminWidth,\n\t\t} = this.screenSizesToNumbers();\n\t\tif (size.height && size.width) {\n\t\t\tif (maxHeight < size.height) {\n\t\t\t\tsize.height = maxHeight;\n\t\t\t}\n\t\t\tif (minHeight > size.height) {\n\t\t\t\tsize.height = minHeight;\n\t\t\t}\n\t\t\tif (maxWidth < size.width) {\n\t\t\t\tsize.width = maxWidth;\n\t\t\t}\n\t\t\tif (minWidth > size.width) {\n\t\t\t\tsize.width = minWidth;\n\t\t\t}\n\t\t\tif (collapse) {\n\t\t\t\tsize.height = windowBarHeight;\n\t\t\t}\n\t\t\treturn size as { width: number; height: number };\n\t\t} else {\n\t\t\treturn {\n\t\t\t\twidth: defaultWindowSize.width,\n\t\t\t\theight: collapse ? windowBarHeight : defaultWindowSize.height,\n\t\t\t};\n\t\t}\n\t};\n\n\tgetPosition = () => {\n\t\tconst size = this.getSize();\n\t\tconst { position } = this.windowProperties;\n\t\tconst { useLocalWindowState } = this.state;\n\t\tif (position && size) {\n\t\t\tif (position.x < 0) {\n\t\t\t\tif (!useLocalWindowState) {\n\t\t\t\t\tposition.x = -position.x;\n\t\t\t\t} else {\n\t\t\t\t\tposition.x = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (position.x > window.innerWidth - size.width) {\n\t\t\t\tif (!useLocalWindowState) {\n\t\t\t\t\tposition.x =\n\t\t\t\t\t\twindow.innerWidth -\n\t\t\t\t\t\tsize.width -\n\t\t\t\t\t\t((window.innerWidth - size.width) % position.x);\n\t\t\t\t} else {\n\t\t\t\t\tposition.x = window.innerWidth - size.width;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (position.y > window.innerHeight - desktopWindowsBarHeight) {\n\t\t\t\tposition.y = window.innerHeight - desktopWindowsBarHeight;\n\t\t\t}\n\t\t\tif (position.y < 0) {\n\t\t\t\tposition.y = 0;\n\t\t\t}\n\t\t\treturn position;\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tx: window.screen.availWidth / 3,\n\t\t\t\ty: window.screen.availHeight / 3,\n\t\t\t};\n\t\t}\n\t};\n\n\tprivate willUnmount = false;\n\n\tcomponentDidMount() {\n\t\tthis.updateWindowPositionORSizeQueuer.start();\n\t\twindowManager.emitter.on(\"minimizeWindow\", ({ id }) => {\n\t\t\tthis.props.setWindowState({\n\t\t\t\tminimized: true,\n\t\t\t});\n\t\t\tif (id === this.id) {\n\t\t\t\tthis.setState({ collapse: true, isActive: true });\n\t\t\t} else this.setState({ isActive: false });\n\t\t});\n\n\t\twindowManager.emitter.on(\"maximizeWindow\", ({ id }) => {\n\t\t\tthis.props.setWindowState({\n\t\t\t\tminimized: false,\n\t\t\t});\n\t\t\tif (id === this.id) {\n\t\t\t\tthis.setState({ collapse: false, isActive: true });\n\t\t\t} else this.setState({ isActive: false });\n\t\t});\n\t\twindowManager.emitter.on(\"setActiveWindow\", ({ id }) => {\n\t\t\tif (id === this.id) {\n\t\t\t\tthis.setState({ isActive: true });\n\t\t\t} else {\n\t\t\t\tthis.setState({ isActive: false });\n\t\t\t}\n\t\t});\n\t\twindowManager.emitter.on(\"updateZIndex\", ({ id, layer }) => {\n\t\t\tif (id === this.id) {\n\t\t\t\tthis.setState({ zIndex: layer });\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener(\"mousedown\", (e) => {\n\t\t\tif (this.wrapperRef && e.target) {\n\t\t\t\tif (\n\t\t\t\t\tthis.wrapperRef &&\n\t\t\t\t\t!this.wrapperRef.contains(e.target as HTMLElement)\n\t\t\t\t) {\n\t\t\t\t\tthis.handleClickOutside();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.id = windowManager.addWindow(this.props.name, this.props.icon, {\n\t\t\tminimized: this.props.window.minimized || false,\n\t\t});\n\t\twindowManager.reloadWindowsLayers();\n\n\t\tconst switchPosition = () => {\n\t\t\tif (!this.willUnmount) {\n\t\t\t\tthis.switchToAbsolutePosition();\n\t\t\t\twindow.requestAnimationFrame(switchPosition);\n\t\t\t}\n\t\t};\n\t\tswitchPosition();\n\t}\n\n\tcomponentWillUnmount = () => {\n\t\tthis.willUnmount = true;\n\t\twindowManager.closeWindow(this.id);\n\t};\n\n\thandleClickOutside = () => {\n\t\tthis.setState({ isActive: false });\n\t};\n\n\tsetActive = () => {\n\t\tif (windowManager.activeWindowId === this.id) {\n\t\t\tthis.setState({ isActive: true });\n\t\t} else {\n\t\t\twindowManager.setActiveWindow(this.id);\n\t\t}\n\t};\n\n\tget serverWindowProperties() {\n\t\treturn {\n\t\t\tsize:\n\t\t\t\tthis.props.window.width && this.props.window.height\n\t\t\t\t\t? {\n\t\t\t\t\t\t\twidth: this.props.window.width,\n\t\t\t\t\t\t\theight: this.props.window.height,\n\t\t\t\t\t  }\n\t\t\t\t\t: undefined,\n\t\t\tposition: this.props.window.position,\n\t\t};\n\t}\n\n\tget windowProperties() {\n\t\tif (this.state.useLocalWindowState) {\n\t\t\treturn this.state.localWindowState || this.serverWindowProperties;\n\t\t} else {\n\t\t\treturn this.serverWindowProperties;\n\t\t}\n\t}\n\n\tupdateWindowPositionORSizeQueuer = lastTaskQueuer();\n\n\t/**\n\t * update window size or position locally on remotely\n\t */\n\tsetWindowState(state: LocalWindowState) {\n\t\tthis.setState({\n\t\t\tlocalWindowState: { ...this.state.localWindowState, ...state },\n\t\t});\n\n\t\tthis.updateWindowPositionORSizeQueuer.queueTask(() =>\n\t\t\tthis.props.setWindowState(state)\n\t\t);\n\t}\n\n\tsnapWindow = (snap?: WindowSnap | undefined, forceState?: boolean) => {\n\t\tconst {\n\t\t\tprops: {\n\t\t\t\twindow: { allowLocalScreenSnapping },\n\t\t\t},\n\t\t\tstate: { snap: currentSnap, collapse },\n\t\t} = this;\n\t\tif (!collapse) {\n\t\t\tif (allowLocalScreenSnapping) {\n\t\t\t\tconst snapNow = forceState !== undefined ? forceState : !currentSnap;\n\t\t\t\tthis.setState({ snap: snapNow ? snap : undefined });\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * static constance window properties to use when we are in fullscreen mode\n\t */\n\tstatic fullscreenWindowPosition = { x: 0, y: 0 };\n\n\t/*\n\t *\twe are removing the translation base position and replace it with an absolute position using top and left\n\t *\tcss properties in the render we need to avoid using translation base position since it is causing blurriness in iframes\n\t */\n\tswitchToAbsolutePosition = () => {\n\t\tconst rndElement = document.getElementsByClassName(\n\t\t\tthis.randomClassNameForRndContainer\n\t\t)[0] as HTMLDivElement;\n\t\trndElement.style.transform = \"\";\n\n\t\tconst newStyles = this.getWindowTransformStyles();\n\n\t\tObject.keys(newStyles).map((keyNameAsString) => {\n\t\t\tconst key = keyNameAsString as keyof typeof newStyles;\n\t\t\tconst value = newStyles[key];\n\t\t\tif (typeof value === \"number\") {\n\t\t\t\trndElement.style[key] = `${value}px`;\n\t\t\t} else if (typeof value === \"string\") {\n\t\t\t\trndElement.style[key] = value;\n\t\t\t}\n\t\t});\n\t};\n\n\trandomClassNameForRndContainer = `rndElement${Math.random()}`;\n\n\tgetWindowTransformStyles = () => {\n\t\tconst position = this.getWindowPosition();\n\t\tconst size = this.getWindowSize();\n\t\treturn {\n\t\t\ttop: position?.y || 0,\n\t\t\tleft: position?.x || 0,\n\t\t\theight: size?.height,\n\t\t\twidth: size?.width,\n\t\t};\n\t};\n\n\tonDrag: RndDragCallback = (e, newPosition) => {\n\t\tthis.setActive();\n\t\tconst { isResizing } = this.state;\n\t\tif (isResizing) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = this.getPosition();\n\t\tconst size = this.getSize();\n\t\tconst { clientX, clientY } = e as MouseEvent;\n\n\t\tconst updatedPosition = {\n\t\t\tx: position.x + newPosition.deltaX,\n\t\t\ty: position.y + newPosition.deltaY,\n\t\t};\n\n\t\t// snap window drag to mouse\n\t\tif (updatedPosition.x > clientX) {\n\t\t\tupdatedPosition.x = clientX;\n\t\t}\n\t\tif (updatedPosition.x < clientX - size.width) {\n\t\t\tupdatedPosition.x = clientX - size.width;\n\t\t}\n\t\tif (updatedPosition.y > clientY - windowBarHeight) {\n\t\t\tupdatedPosition.y = clientY - windowBarHeight;\n\t\t}\n\t\tif (updatedPosition.y < clientY) {\n\t\t\tupdatedPosition.y = clientY - windowBarHeight / 2;\n\t\t}\n\n\t\t// calculate if the window is touching one of the screen borders\n\t\tconst touchTop = clientY < 2; // need to go a bit over the edge to go fullscreen\n\t\tconst farFromTop = clientY > 50;\n\t\tconst touchMinimumLeft = clientX < 25;\n\t\tconst farFromMinimumLeft = clientX > 50;\n\t\tconst touchMinimumRight = clientX > window.innerWidth - 25;\n\t\tconst farFromMinimumRight = clientX < window.innerWidth - 50;\n\n\t\t// in case the window touches one of the screen edges snap to it\n\t\tif (touchTop) {\n\t\t\tthis.snapWindow(\"fullscreen\", true);\n\t\t\treturn;\n\t\t}\n\t\tif (touchMinimumLeft) {\n\t\t\tthis.snapWindow(\"left\", true);\n\t\t\treturn;\n\t\t}\n\t\tif (touchMinimumRight) {\n\t\t\tthis.snapWindow(\"right\", true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (farFromMinimumLeft && farFromMinimumRight && farFromTop) {\n\t\t\tthis.snapWindow(undefined, false);\n\t\t}\n\t\tthis.setWindowState({\n\t\t\tposition: updatedPosition,\n\t\t});\n\t};\n\tonResize: RndResizeCallback = (e, dir, ele, delta) => {\n\t\tconst position = this.getPosition();\n\t\tconst { localWindowState, collapse } = this.state;\n\t\tif (localWindowState?.size) {\n\t\t\tconst { size } = localWindowState;\n\t\t\tconst {\n\t\t\t\tmaxHeight,\n\t\t\t\tmaxWidth,\n\t\t\t\tminHeight,\n\t\t\t\tminWidth,\n\t\t\t} = this.screenSizesToNumbers();\n\t\t\tconst newSize = {\n\t\t\t\twidth: size.width + delta.width - this.lastResizeDelta.width,\n\t\t\t\theight: size.height + delta.height - this.lastResizeDelta.height,\n\t\t\t};\n\t\t\tif (collapse) {\n\t\t\t\tnewSize.height -= delta.height - this.lastResizeDelta.height;\n\t\t\t}\n\t\t\tswitch (dir) {\n\t\t\t\tcase \"topRight\":\n\t\t\t\tcase \"top\": {\n\t\t\t\t\tif (newSize.height < maxHeight && newSize.height > minHeight) {\n\t\t\t\t\t\tposition.y -= delta.height - this.lastResizeDelta.height;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"bottomLeft\":\n\t\t\t\tcase \"left\": {\n\t\t\t\t\tif (newSize.width < maxWidth && newSize.width > minWidth) {\n\t\t\t\t\t\tposition.x -= delta.width - this.lastResizeDelta.width;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"topLeft\": {\n\t\t\t\t\tif (newSize.height < maxHeight && newSize.height > minHeight) {\n\t\t\t\t\t\tposition.y -= delta.height - this.lastResizeDelta.height;\n\t\t\t\t\t}\n\t\t\t\t\tif (newSize.width < maxWidth && newSize.width > minWidth) {\n\t\t\t\t\t\tposition.x -= delta.width - this.lastResizeDelta.width;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setWindowState({\n\t\t\t\tsize: newSize,\n\t\t\t\tposition: {\n\t\t\t\t\t...position,\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.lastResizeDelta = delta;\n\t\t}\n\t};\n\n\tgetWindowSize = () => {\n\t\tconst size = this.getSize();\n\t\tconst { snap } = this.state;\n\t\tif (!snap) {\n\t\t\treturn size;\n\t\t} else if (snap === \"fullscreen\") {\n\t\t\treturn {\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: `calc(100% - ${\n\t\t\t\t\tdesktopWindowsBarHeight + 10 /* add 5 to account for margin */\n\t\t\t\t}px)`,\n\t\t\t};\n\t\t} else if (snap === \"left\" || snap === \"right\") {\n\t\t\treturn {\n\t\t\t\twidth: \"50%\",\n\t\t\t\theight: `calc(100% - ${\n\t\t\t\t\tdesktopWindowsBarHeight + 10 /* add 5 to account for margin */\n\t\t\t\t}px)`,\n\t\t\t};\n\t\t}\n\t};\n\n\tgetWindowPosition = () => {\n\t\tconst position = this.getPosition();\n\t\tconst { snap } = this.state;\n\t\tif (!snap) {\n\t\t\treturn position;\n\t\t} else if (snap === \"fullscreen\" || snap === \"left\") {\n\t\t\treturn {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t};\n\t\t} else if (snap === \"right\") {\n\t\t\treturn {\n\t\t\t\tx: window.innerWidth / 2,\n\t\t\t\ty: 0,\n\t\t\t};\n\t\t}\n\t};\n\n\tshouldCollapse = () => {\n\t\tconst { collapse, snap, useLocalWindowState, isResizing } = this.state;\n\t\treturn collapse || (useLocalWindowState && !snap && !isResizing);\n\t};\n\n\tlastResizeDelta = { width: 0, height: 0 };\n\n\trender() {\n\t\tconst {\n\t\t\tcanDrag,\n\t\t\tcollapse,\n\t\t\tisActive,\n\t\t\tzIndex,\n\t\t\tsnap,\n\t\t\tuseLocalWindowState,\n\t\t} = this.state;\n\t\tconst { children, classes, title, icon, onClose } = this.props;\n\t\tconst size = this.getSize();\n\t\tconst position = this.getPosition();\n\t\treturn ReactDOM.createPortal(\n\t\t\t<div\n\t\t\t\tref={(element) => {\n\t\t\t\t\tif (element) this.wrapperRef = element;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Rnd\n\t\t\t\t\tclassName={`${this.randomClassNameForRndContainer} ${\n\t\t\t\t\t\tuseLocalWindowState ? \"\" : classes.smoothMove\n\t\t\t\t\t}`}\n\t\t\t\t\tdisableDragging={!canDrag}\n\t\t\t\t\tsize={this.getWindowSize()}\n\t\t\t\t\tposition={this.getWindowPosition()}\n\t\t\t\t\tonDrag={this.onDrag}\n\t\t\t\t\tonDragStart={(e) => {\n\t\t\t\t\t\tif (snap) {\n\t\t\t\t\t\t\tconst { clientX, clientY } = e as MouseEvent;\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tuseLocalWindowState: true,\n\t\t\t\t\t\t\t\tlocalWindowState: {\n\t\t\t\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\t\t\t\tx: clientX - size.width / 2,\n\t\t\t\t\t\t\t\t\t\ty: clientY + windowBarHeight / 2,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsnap: undefined,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tuseLocalWindowState: true,\n\t\t\t\t\t\t\t\tlocalWindowState: {\n\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tonDragStop={() => {\n\t\t\t\t\t\tthis.updateWindowPositionORSizeQueuer.idle().then(() =>\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tuseLocalWindowState: false,\n\t\t\t\t\t\t\t\tlocalWindowState: undefined,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tdefaultSize={size}\n\t\t\t\t\tonResizeStart={() =>\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tuseLocalWindowState: true,\n\t\t\t\t\t\t\tlocalWindowState: {\n\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\tsize: size,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsnap: undefined,\n\t\t\t\t\t\t\tisResizing: true,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tonResizeStop={() => {\n\t\t\t\t\t\tthis.lastResizeDelta = { height: 0, width: 0 };\n\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tisResizing: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\tthis.updateWindowPositionORSizeQueuer.idle().then(() => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tuseLocalWindowState: false,\n\t\t\t\t\t\t\t\t\t\tlocalWindowState: undefined,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tonResize={this.onResize}\n\t\t\t\t\tstyle={{ zIndex, ...this.getWindowTransformStyles() }}\n\t\t\t\t>\n\t\t\t\t\t<div className={classes.root} onClick={() => this.setActive()}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonMouseEnter={() => this.setState({ canDrag: true })}\n\t\t\t\t\t\t\tonMouseLeave={() => this.setState({ canDrag: false })}\n\t\t\t\t\t\t\tonDoubleClick={() => this.snapWindow(\"fullscreen\")}\n\t\t\t\t\t\t\tclassName={`${classes.bar} ${\n\t\t\t\t\t\t\t\tthis.shouldCollapse() ? classes.barCollapse : \"\"\n\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={classes.barButtonsContainer}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\twindowManager.updateState(this.id, {\n\t\t\t\t\t\t\t\t\t\t\tminimized: !collapse,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName={`${classes.barButton} ${\n\t\t\t\t\t\t\t\t\t\tisActive\n\t\t\t\t\t\t\t\t\t\t\t? classes.barButtonCollapse\n\t\t\t\t\t\t\t\t\t\t\t: classes.barButtonInactive\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${classes.barButton} ${\n\t\t\t\t\t\t\t\t\t\tisActive ? classes.barButtonExit : classes.barButtonInactive\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={classes.barTitle}>\n\t\t\t\t\t\t\t\t{title} -{\" \"}\n\t\t\t\t\t\t\t\t{icon.type === \"icon\" ? (\n\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\tcontainerClassName={classes.barTitleIcon}\n\t\t\t\t\t\t\t\t\t\tname={icon.icon}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tclassName={classes.barTitleIcon}\n\t\t\t\t\t\t\t\t\t\talt=\"windows icon\"\n\t\t\t\t\t\t\t\t\t\twidth={14}\n\t\t\t\t\t\t\t\t\t\theight={14}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classes.body}\n\t\t\t\t\t\t\tstyle={this.shouldCollapse() ? { display: \"none\" } : {}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Rnd>\n\t\t\t</div>,\n\t\t\tthis.domContainer\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Window);\n","import Emitter from \"./Emitter\";\n\nexport const lastTaskQueuer = () => {\n\tlet stop = false;\n\tlet isIdle = true;\n\tlet lastTask: undefined | (() => Promise<void>);\n\n\tconst continueEmitter = new Emitter<{ continue: void; idle: void }>();\n\n\treturn {\n\t\tqueueTask(newTask: () => Promise<void>) {\n\t\t\tlastTask = newTask;\n\t\t\tcontinueEmitter.call(\"continue\", (null as unknown) as void);\n\t\t},\n\t\tstop() {\n\t\t\tstop = true;\n\t\t},\n\t\tidle() {\n\t\t\treturn new Promise<void>((res) => {\n\t\t\t\tif (isIdle) {\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t\tcontinueEmitter.on(\"idle\", res);\n\t\t\t});\n\t\t},\n\t\tasync start() {\n\t\t\twhile (!stop) {\n\t\t\t\tif (lastTask) {\n\t\t\t\t\tisIdle = false;\n\t\t\t\t\tconst currentTask = lastTask;\n\t\t\t\t\tlastTask = undefined;\n\t\t\t\t\tawait currentTask();\n\t\t\t\t\tisIdle = true;\n\t\t\t\t}\n\t\t\t\tif (!lastTask) {\n\t\t\t\t\tcontinueEmitter.call(\"idle\", (null as unknown) as void);\n\t\t\t\t\tawait new Promise((res) => continueEmitter.on(\"continue\", res));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t};\n};\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport TerminalInterface from \"@web-desktop-environment/interfaces/lib/views/apps/utils/Terminal\";\nimport {\n\twithStyles,\n\tcreateStyles,\n\tWithStyles,\n\twithTheme,\n\tWithTheme,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport io from \"socket.io-client\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\nimport { Terminal as XTerm } from \"xterm\";\nimport { FitAddon } from \"xterm-addon-fit\";\nimport ResizeDetector from \"react-resize-detector\";\nimport \"xterm/css/xterm.css\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\tborderTop: \"none\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tbackground: theme.background.main,\n\t\t\tbackdropFilter: \"blur(15px)\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t},\n\t\tbody: {\n\t\t\theight: \"calc(100% - 8px)\",\n\t\t\twidth: \"100%\",\n\t\t\t\"& .xterm-viewport\": {\n\t\t\t\tbackground: \"#fff0\",\n\t\t\t},\n\t\t},\n\t});\n\nclass Terminal extends Component<\n\tTerminalInterface,\n\t{},\n\tWithStyles<typeof styles> & WithTheme<Theme>\n> {\n\tsocket: SocketIOClient.Socket;\n\tterm: XTerm;\n\ttermFit: FitAddon;\n\tcontainerElement?: HTMLElement;\n\tconstructor(props: Terminal[\"props\"]) {\n\t\tsuper(props);\n\t\tthis.socket = io(\n\t\t\t`${reactFullstackConnectionManager.https ? \"https\" : \"http\"}://${\n\t\t\t\treactFullstackConnectionManager.host\n\t\t\t}:${props.port}`,\n\t\t\t{\n\t\t\t\ttransports: [\"websocket\"],\n\t\t\t}\n\t\t);\n\t\tthis.term = new XTerm({\n\t\t\ttheme: this.getTermTheme(),\n\t\t\tfontFamily: \"JetBrains Mono\",\n\t\t\tallowTransparency: true,\n\t\t});\n\t\tthis.termFit = new FitAddon();\n\t\tthis.term.loadAddon(this.termFit);\n\t\tthis.socket.on(\"output\", (data: string) => {\n\t\t\tthis.term.write(data);\n\t\t});\n\t\tthis.term.onData((data) => {\n\t\t\tthis.socket.emit(\"input\", data);\n\t\t});\n\t}\n\n\tgetTermTheme = () => ({\n\t\tbackground: \"#fff0\",\n\t\tforeground: this.props.theme.background.text,\n\t\tcursor: this.props.theme.background.text,\n\t});\n\n\tcomponentDidMount = () => {\n\t\tif (this.containerElement) {\n\t\t\tthis.term.open(this.containerElement);\n\t\t\tthis.termFit.fit();\n\t\t}\n\t};\n\n\tcomponentWillUnmount = () => {\n\t\tthis.socket.close();\n\t};\n\n\tonResize = () => {\n\t\tif (this.containerElement?.clientWidth) {\n\t\t\t// do not resize is container is in display: none mode\n\t\t\tthis.termFit.fit();\n\t\t\tthis.socket.emit(\"setColumns\", this.term.cols);\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { classes } = this.props;\n\t\tthis.term.setOption(\"theme\", this.getTermTheme());\n\t\tthis.onResize();\n\t\treturn (\n\t\t\t<ResizeDetector onResize={this.onResize}>\n\t\t\t\t<div className={classes.root}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classes.body}\n\t\t\t\t\t\tref={(div) => {\n\t\t\t\t\t\t\tif (div) {\n\t\t\t\t\t\t\t\tthis.containerElement = div;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</ResizeDetector>\n\t\t);\n\t}\n}\n\nexport default withTheme(withStyles(styles, { withTheme: true })(Terminal));\n","import ExplorerInterface, {\n\tFile,\n} from \"@web-desktop-environment/interfaces/lib/views/apps/utils/Explorer\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport React from \"react\";\nimport { withStyles, createStyles, WithStyles } from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport Button from \"@components/button\";\nimport Icon from \"@components/icon\";\nimport TextField from \"@components/textField\";\nimport Emitter from \"@utils/Emitter\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\nimport { transparent } from \"@utils/colors\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tbackground: theme.background.main,\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\tborderTop: \"none\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(15px)\" : \"none\",\n\t\t\tdisplay: \"grid\",\n\t\t\tgridTemplateRows: \"44px calc(100% - 44px)\",\n\t\t},\n\t\tactionBarContainer: {\n\t\t\twidth: 175,\n\t\t\tjustifyContent: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t\theight: \"100%\",\n\t\t},\n\t\tactionBar: {\n\t\t\tborderBottom: `1px solid ${theme.windowBorderColor}`,\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tbackground: theme.background.dark,\n\t\t\tborderRight: `solid 1px ${theme.windowBorderColor}`,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(16px)\" : \"none\",\n\t\t\tborderRadius: \"0 0 0 10px\",\n\t\t\talignItems: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t},\n\t\tactionButton: {\n\t\t\ttextDecoration: \"none\",\n\t\t\twidth: \"100%\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\theight: 20,\n\t\t\tpaddingTop: 10,\n\t\t\tpaddingBottom: 10,\n\t\t\ttextAlign: \"center\",\n\t\t\tuserSelect: \"none\",\n\t\t\tanimation: \"$opacityUp 150ms\",\n\t\t\tcolor: theme.secondary.text,\n\t\t\tfontSize: 18,\n\t\t\tcursor: \"pointer\",\n\t\t\tborderBottom: `solid 1px ${theme.windowBorderColor}`,\n\t\t\ttransition: \"background 100ms, transform 100ms\",\n\t\t\t...(theme.type === \"transparent\"\n\t\t\t\t? {\n\t\t\t\t\t\tbackdropFilter: \"blur(7px)\",\n\t\t\t\t\t\tboxShadow: `-1px 2px 20px 1px ${theme.shadowColor}`,\n\t\t\t\t\t\tbackground: theme.background.transparent,\n\t\t\t\t\t\tborderBottom: `1px solid ${theme.windowBorderColor}`,\n\t\t\t\t  }\n\t\t\t\t: {}),\n\t\t\t\"&:hover\": {\n\t\t\t\t...(theme.type === \"transparent\"\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tbackdropFilter: \"blur(13px)\",\n\t\t\t\t\t\t\tbackground: theme.secondary.light,\n\t\t\t\t\t  }\n\t\t\t\t\t: {\n\t\t\t\t\t\t\tbackground: theme.secondary.light,\n\t\t\t\t\t  }),\n\t\t\t},\n\t\t},\n\t\t\"@keyframes opacityUp\": {\n\t\t\tfrom: {\n\t\t\t\topacity: 0,\n\t\t\t},\n\t\t\tto: {\n\t\t\t\topacity: 1,\n\t\t\t},\n\t\t},\n\t\tlocationBarContainer: {\n\t\t\twidth: \"100%\",\n\t\t\toverflow: \"auto\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\tborderRight: \"none\",\n\t\t\tborderLeft: \"none\",\n\t\t},\n\t\tlocationBar: {\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(10px)\" : \"none\",\n\t\t\twidth: \"95%\",\n\t\t\tmaxHeight: \"100%\",\n\t\t\toverflowX: \"auto\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tflexDirection: \"column\",\n\t\t},\n\t\tbreadcrumbFilesContainer: {\n\t\t\tmaxHeight: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t},\n\t\tfileBoxContainer: {\n\t\t\theight: \"100%\",\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t},\n\t\tfileBox: {\n\t\t\tboxShadow: `${theme.shadowColor} 0px 7px 20px 1px inset`,\n\t\t\tbackground: theme.background.transparent || theme.background.main,\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\toverflowY: \"auto\",\n\t\t\tborderBottomRightRadius: 9,\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t},\n\t\tfileContainer: {\n\t\t\tdisplay: \"grid\",\n\t\t\tgridTemplateColumns: \"repeat(auto-fit, minmax(80px, 120px))\",\n\t\t\tmargin: 15,\n\t\t\tjustifyContent: \"center\",\n\t\t\tgridGap: 15,\n\t\t\tgap: \"15px\",\n\t\t\tgridAutoRows: 100,\n\t\t},\n\t\tfile: {\n\t\t\tborderRadius: 7,\n\t\t\tpadding: 2,\n\t\t\tcolor: theme.secondary.text,\n\t\t\tcursor: \"pointer\",\n\t\t\tboxShadow: `-1px 2px 10px 1px ${theme.shadowColor}`,\n\t\t\ttransition: \"background 100ms, transform 200ms\",\n\t\t\t\"&:hover\": {\n\t\t\t\ttransform: \"scale(1.1)\",\n\t\t\t\tbackground: theme.secondary.dark,\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t},\n\t\t\theight: 90,\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column-reverse\",\n\t\t},\n\t\ttransparent: {\n\t\t\tbackground: \"transparent !important\",\n\t\t},\n\t\tfileActive: {\n\t\t\tbackground: theme.secondary.transparent || theme.secondary.main,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t\tbackground: theme.secondary.transparent || theme.secondary.main,\n\t\t\t},\n\t\t},\n\t\tfileName: {\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\tmaxWidth: \"100%\",\n\t\t\ttextAlign: \"center\",\n\t\t\tuserSelect: \"none\",\n\t\t},\n\t\tfileIcon: {\n\t\t\tuserSelect: \"none\",\n\t\t\ttextAlign: \"center\",\n\t\t\tmaxWidth: 100,\n\t\t\tfontSize: 50,\n\t\t},\n\t\tfileBreadcrumb: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t\tbreadcrumbButtonItem: {\n\t\t\tminWidth: 20,\n\t\t\ttextAlign: \"center\",\n\t\t\tuserSelect: \"none\",\n\t\t\tcolor: theme.primary.text,\n\t\t\tfontSize: 25,\n\t\t\tbackground: theme.primary.transparent,\n\t\t\tborder: \"solid 1px transparent\",\n\t\t\tmaxWidth: 380,\n\t\t\toverflow: \"hidden\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\ttransition: \"background 100ms\",\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.primary.main,\n\t\t\t},\n\t\t\tcursor: \"pointer\",\n\t\t},\n\t\tbreadcrumbButtonItemFirst: {\n\t\t\tborderRadius: \"8px 0 0 8px\",\n\t\t\tpaddingLeft: 10,\n\t\t},\n\t\tbreadcrumbButtonItemLast: {\n\t\t\tcursor: \"auto\",\n\t\t\tborderRadius: \"0 8px 8px 0\",\n\t\t\tbackground:\n\t\t\t\ttheme.type === \"light\"\n\t\t\t\t\t? theme.primary.main\n\t\t\t\t\t: transparent(theme.primary.main, 0.6),\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.primary.main,\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t},\n\t\t\tpaddingRight: 10,\n\t\t},\n\t\tdialog: {\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tflexDirection: \"column\",\n\t\t},\n\t\tdialogMessage: {\n\t\t\tmaxWidth: \"80%\",\n\t\t\ttextAlign: \"center\",\n\t\t\tcolor: theme.background.text,\n\t\t\tfontSize: 25,\n\t\t},\n\t\tdialogButtons: {\n\t\t\tmargin: 20,\n\t\t\twidth: \"50%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t},\n\t\tdialogButton: {\n\t\t\tmargin: 10,\n\t\t\tfontSize: 50,\n\t\t\twidth: \"fit-content\",\n\t\t\theight: \"fit-content\",\n\t\t\tborderRadius: 7,\n\t\t\tbackground: theme.primary.main,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.primary.dark,\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t},\n\t\t},\n\t\tdialogButtonPrimary: {\n\t\t\tbackground: theme.secondary.main,\n\t\t\t\"&:hover\": {\n\t\t\t\tbackground: theme.secondary.dark,\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t},\n\t\t},\n\t\tdialogInput: {\n\t\t\tmargin: 10,\n\t\t\tcolor: theme.background.text,\n\t\t\tfontSize: 25,\n\t\t},\n\t\topenButton: {\n\t\t\tmargin: 5,\n\t\t},\n\t\tstickyActionBarContainer: {\n\t\t\tposition: \"sticky\",\n\t\t\tbottom: 0,\n\t\t\twidth: \"100%\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t\tbackground: theme.background.dark,\n\t\t\tborderTop: `1px solid ${theme.windowBorderColor}`,\n\t\t},\n\t\tactionBarNoBorder: {\n\t\t\tborderBottom: \"none\",\n\t\t},\n\t});\n\ninterface Confirm {\n\tmessage: string;\n\tresult?: boolean;\n}\n\ninterface Prompt {\n\tmessage: string;\n\tvalue: string;\n\tresult?: boolean;\n}\n\ninterface ExplorerState {\n\tfileIsOverFile?: number;\n\tselectedFile?: number;\n\tdragedFile?: File;\n\tcopyPath?: { fullPath: string; name: string };\n\tcutPath?: { fullPath: string; name: string };\n\tconfirm?: Confirm;\n\tprompt?: Prompt;\n\tdownloadUrl?: string;\n}\n\ninterface ExplorerEvents {\n\tconfirmDone: Confirm;\n\tpromptDone: Prompt;\n}\n\nclass Explorer extends Component<\n\tExplorerInterface,\n\tExplorerState,\n\tWithStyles<typeof styles>\n> {\n\tselectedFile?: File & { fullPath: string };\n\tconstructor(props: Explorer[\"props\"]) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\temitter = new Emitter<ExplorerEvents>();\n\n\tconfirm = async (message: string) => {\n\t\treturn await new Promise((resolve, reject) => {\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tconfirm: {\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tconst confirmDone = (confirm: Confirm) => {\n\t\t\t\t\t\tif (confirm.result !== undefined) {\n\t\t\t\t\t\t\tresolve(confirm.result);\n\t\t\t\t\t\t\tthis.setState({ confirm: undefined });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(new Error(\"confirm does not have a result.\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.emitter.off(\"confirmDone\", confirmDone);\n\t\t\t\t\t};\n\t\t\t\t\tthis.emitter.on(\"confirmDone\", confirmDone);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t};\n\n\tprompt = async (\n\t\tmessage: string\n\t): Promise<{ result: boolean; value: string }> => {\n\t\treturn await new Promise((resolve) => {\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tprompt: {\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tvalue: \"\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tconst promptFinish = (prompt: Prompt) => {\n\t\t\t\t\t\tif (prompt.result) {\n\t\t\t\t\t\t\tresolve({ result: prompt.result, value: prompt.value });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve({ result: false, value: prompt.value });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState({ prompt: undefined });\n\t\t\t\t\t\tthis.emitter.off(\"promptDone\", promptFinish);\n\t\t\t\t\t};\n\t\t\t\t\tthis.emitter.on(\"promptDone\", promptFinish);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t};\n\n\tgetBreadcrumbLocations = (maxLength: number) => {\n\t\tconst {\n\t\t\tcurrentPath,\n\t\t\tplatformPathSeparator,\n\t\t\tonChangeCurrentPath,\n\t\t} = this.props;\n\t\tlet currentLocation = \"\";\n\t\tconst pathArray: string[] = [];\n\t\tcurrentPath\n\t\t\t.split(platformPathSeparator)\n\t\t\t.filter((path) => path)\n\t\t\t.forEach((path) => pathArray.push(`${path}${platformPathSeparator}`));\n\t\tpathArray.unshift(platformPathSeparator);\n\t\tconst result = pathArray.map((path, i) => {\n\t\t\tcurrentLocation += path;\n\t\t\tconst pathPartPath = currentLocation;\n\t\t\treturn {\n\t\t\t\tpath,\n\t\t\t\tisFirst: i === 0,\n\t\t\t\tisLast: i === pathArray.length - 1,\n\t\t\t\tonClick: () => {\n\t\t\t\t\tonChangeCurrentPath(pathPartPath);\n\t\t\t\t\tthis.setState({ selectedFile: undefined });\n\t\t\t\t\tthis.selectedFile = undefined;\n\t\t\t\t},\n\t\t\t\tonDrop: () => this.onDropPath(pathPartPath),\n\t\t\t};\n\t\t});\n\t\twhile (result.length > maxLength) {\n\t\t\tresult.shift();\n\t\t\tresult[0].isFirst = true;\n\t\t}\n\t\treturn result;\n\t};\n\n\tprivate onDrop = async (target: File) => {\n\t\tconst { currentPath, platformPathSeparator, onMove } = this.props;\n\t\tthis.setState({ dragedFile: undefined });\n\t\tif (\n\t\t\tthis.state.dragedFile &&\n\t\t\tthis.state.dragedFile !== target &&\n\t\t\ttarget.isFolder\n\t\t) {\n\t\t\tconst newPath = `${currentPath}${platformPathSeparator}${target.name}${platformPathSeparator}${this.state.dragedFile.name}`;\n\t\t\tconst originalPath = `${currentPath}${platformPathSeparator}${this.state.dragedFile.name}`;\n\t\t\tthis.setState({\n\t\t\t\tfileIsOverFile: undefined,\n\t\t\t\tselectedFile: undefined,\n\t\t\t});\n\t\t\tif (\n\t\t\t\tawait this.confirm(\n\t\t\t\t\t` do you want to move ${this.state.dragedFile.name} to ${newPath}`\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tonMove({\n\t\t\t\t\tnewPath,\n\t\t\t\t\toriginalPath,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tprivate onDropPath = async (path: string) => {\n\t\tconst { currentPath, platformPathSeparator, onMove } = this.props;\n\t\tif (this.state.dragedFile) {\n\t\t\tconst newPath = `${path}${platformPathSeparator}${this.state.dragedFile.name}`;\n\t\t\tconst originalPath = `${currentPath}${platformPathSeparator}${this.state.dragedFile.name}`;\n\t\t\tthis.setState({\n\t\t\t\tfileIsOverFile: undefined,\n\t\t\t\tselectedFile: undefined,\n\t\t\t});\n\t\t\tif (\n\t\t\t\tawait this.confirm(\n\t\t\t\t\t` do you want to move ${this.state.dragedFile.name} to ${newPath}`\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tonMove({\n\t\t\t\t\tnewPath,\n\t\t\t\t\toriginalPath,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tprivate onFileDragOver = (file: File, index: number) => {\n\t\tif (\n\t\t\tfile.isFolder &&\n\t\t\tthis.state.dragedFile?.name !== file.name &&\n\t\t\tthis.state.fileIsOverFile !== index\n\t\t) {\n\t\t\tthis.setState({ fileIsOverFile: index });\n\t\t}\n\t};\n\n\tdeleteSelected = async () => {\n\t\tconst { currentPath, platformPathSeparator, onDelete } = this.props;\n\t\tif (\n\t\t\tthis.selectedFile &&\n\t\t\t(await this.confirm(\n\t\t\t\t`are you sure you want to delete ${this.selectedFile.name}`\n\t\t\t))\n\t\t) {\n\t\t\tonDelete(\n\t\t\t\t`${currentPath}${platformPathSeparator}${this.selectedFile.name}`\n\t\t\t);\n\t\t\tthis.setState({ selectedFile: undefined });\n\t\t\tthis.selectedFile = undefined;\n\t\t}\n\t};\n\n\tcreateFolder = async () => {\n\t\tconst promptCreate = await this.prompt(\"please enter folder name:\");\n\t\tconst { currentPath, platformPathSeparator, onCreateFolder } = this.props;\n\t\tif (promptCreate.value) {\n\t\t\tonCreateFolder(\n\t\t\t\t`${currentPath}${platformPathSeparator}${promptCreate.value}`\n\t\t\t);\n\t\t}\n\t};\n\n\tcreateFile = async () => {\n\t\tconst promptCreate = await this.prompt(\"please enter file name:\");\n\t\tconst { currentPath, platformPathSeparator, onCreateFile } = this.props;\n\t\tif (promptCreate.value) {\n\t\t\tonCreateFile(\n\t\t\t\t`${currentPath}${platformPathSeparator}${promptCreate.value}`\n\t\t\t);\n\t\t}\n\t};\n\n\tprivate Past = () => {\n\t\tconst { cutPath, copyPath } = this.state;\n\t\tconst { platformPathSeparator, currentPath, onMove, onCopy } = this.props;\n\t\tif (cutPath || copyPath) {\n\t\t\tif (this.selectedFile?.isFolder) {\n\t\t\t\tif (cutPath && cutPath.fullPath !== this.selectedFile?.fullPath) {\n\t\t\t\t\tonMove({\n\t\t\t\t\t\tnewPath: `${this.selectedFile.fullPath}${platformPathSeparator}${cutPath.name}`,\n\t\t\t\t\t\toriginalPath: cutPath.fullPath,\n\t\t\t\t\t});\n\t\t\t\t\tthis.setState({ copyPath: undefined });\n\t\t\t\t}\n\t\t\t\tif (copyPath && copyPath.fullPath !== this.selectedFile?.fullPath) {\n\t\t\t\t\tonCopy({\n\t\t\t\t\t\tnewPath: `${this.selectedFile.fullPath}${platformPathSeparator}${copyPath.name}`,\n\t\t\t\t\t\toriginalPath: copyPath.fullPath,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (cutPath) {\n\t\t\t\t\tonMove({\n\t\t\t\t\t\tnewPath: `${currentPath}${platformPathSeparator}${cutPath.name}`,\n\t\t\t\t\t\toriginalPath: cutPath.fullPath,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (copyPath) {\n\t\t\t\t\tonCopy({\n\t\t\t\t\t\tnewPath: `${currentPath}${platformPathSeparator}${copyPath.name}`,\n\t\t\t\t\t\toriginalPath: copyPath.fullPath,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\tclasses,\n\t\t\tfiles,\n\t\t\tcurrentPath,\n\t\t\tplatformPathSeparator,\n\t\t\tonRequestDownloadLink,\n\t\t\tonChangeCurrentPath,\n\t\t\tonSelect,\n\t\t\ttype,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tfileIsOverFile,\n\t\t\tselectedFile,\n\t\t\tcopyPath,\n\t\t\tcutPath,\n\t\t\tdownloadUrl,\n\t\t} = this.state;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<div className={classes.locationBarContainer}>\n\t\t\t\t\t<div className={classes.locationBar}>\n\t\t\t\t\t\t<div className={classes.breadcrumbFilesContainer}>\n\t\t\t\t\t\t\t{this.getBreadcrumbLocations(6).map((breadcrumbItem, index) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${classes.breadcrumbButtonItem} ${\n\t\t\t\t\t\t\t\t\t\tbreadcrumbItem.isFirst\n\t\t\t\t\t\t\t\t\t\t\t? classes.breadcrumbButtonItemFirst\n\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t} ${\n\t\t\t\t\t\t\t\t\t\tbreadcrumbItem.isLast\n\t\t\t\t\t\t\t\t\t\t\t? classes.breadcrumbButtonItemLast\n\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\tonDrop={breadcrumbItem.onDrop}\n\t\t\t\t\t\t\t\t\tonDragOverCapture={(e) => e.preventDefault()}\n\t\t\t\t\t\t\t\t\tonClick={breadcrumbItem.onClick}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{breadcrumbItem.path}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={classes.fileBoxContainer}>\n\t\t\t\t\t{type === \"explore\" && (\n\t\t\t\t\t\t<div className={classes.actionBarContainer}>\n\t\t\t\t\t\t\t<div className={classes.actionBar}>\n\t\t\t\t\t\t\t\t<div className={classes.actionButton} onClick={this.createFile}>\n\t\t\t\t\t\t\t\t\tnew File\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\tonClick={this.createFolder}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tnew Folder\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{selectedFile !== undefined && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\tonClick={this.deleteSelected}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{selectedFile !== undefined && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile &&\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tcopyPath: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfullPath: this.selectedFile.fullPath,\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: this.selectedFile.name,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tcutPath: undefined,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCopy\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{selectedFile !== undefined && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile &&\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tcutPath: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfullPath: this.selectedFile.fullPath,\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: this.selectedFile.name,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tcopyPath: undefined,\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCut\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{(cutPath || copyPath) && (\n\t\t\t\t\t\t\t\t\t<div className={classes.actionButton} onClick={this.Past}>\n\t\t\t\t\t\t\t\t\t\tPast\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{downloadUrl && (\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName={classes.actionButton}\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\thref={downloadUrl}\n\t\t\t\t\t\t\t\t\t\tdownload\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{selectedFile === undefined || downloadUrl\n\t\t\t\t\t\t\t\t\t\t\t? \"Download\"\n\t\t\t\t\t\t\t\t\t\t\t: \"Loading...\"}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className={classes.fileBox}>\n\t\t\t\t\t\t{this.state.prompt && (\n\t\t\t\t\t\t\t<div className={classes.dialog}>\n\t\t\t\t\t\t\t\t<div className={classes.dialogMessage}>\n\t\t\t\t\t\t\t\t\t{this.state.prompt.message}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tvalue={this.state.prompt.value}\n\t\t\t\t\t\t\t\t\tonChange={(newValue) =>\n\t\t\t\t\t\t\t\t\t\tthis.state.prompt &&\n\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\tprompt: { ...this.state.prompt, value: newValue || \"\" },\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={classes.dialogInput}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className={classes.dialogButtons}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dialogButton}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.state.prompt &&\n\t\t\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tprompt: { ...this.state.prompt, result: false },\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.emitter.call(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"promptDone\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.prompt as Prompt\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tclassName={`${classes.dialogButton} ${classes.dialogButtonPrimary}`}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.state.prompt &&\n\t\t\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tprompt: { ...this.state.prompt, result: true },\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.emitter.call(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"promptDone\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.prompt as Prompt\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{this.state.confirm && (\n\t\t\t\t\t\t\t<div className={classes.dialog}>\n\t\t\t\t\t\t\t\t<div className={classes.dialogMessage}>\n\t\t\t\t\t\t\t\t\t{this.state.confirm.message}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.dialogButtons}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName={classes.dialogButton}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t\t\t(state) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.confirm?.message\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfirm: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: state.confirm.message,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: {},\n\t\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.emitter.call(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"confirmDone\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.confirm as Confirm\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\tclassName={`${classes.dialogButton} ${classes.dialogButtonPrimary}`}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t\t\t(state) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate.confirm?.message\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconfirm: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: state.confirm.message,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresult: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: {},\n\t\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.emitter.call(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"confirmDone\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.confirm as Confirm\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{!this.state.prompt && !this.state.confirm && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div className={classes.fileContainer}>\n\t\t\t\t\t\t\t\t\t{files.map((file, index) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={`${classes.file} ${\n\t\t\t\t\t\t\t\t\t\t\t\tfileIsOverFile === index || selectedFile === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t? classes.fileActive\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t} ${\n\t\t\t\t\t\t\t\t\t\t\t\tthis.state.dragedFile === file\n\t\t\t\t\t\t\t\t\t\t\t\t\t? classes.transparent\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\tdraggable\n\t\t\t\t\t\t\t\t\t\t\tonDrag={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ dragedFile: file });\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonDrop={() => this.onDrop(file)}\n\t\t\t\t\t\t\t\t\t\t\tonDragOverCapture={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.onFileDragOver(file, index);\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonDragLeave={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (fileIsOverFile === index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ fileIsOverFile: undefined });\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (selectedFile !== index) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...file,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfullPath: `${currentPath}${platformPathSeparator}${file.name}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ selectedFile: index, downloadUrl: undefined },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!this.selectedFile.isFolder\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonRequestDownloadLink(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile.fullPath\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).then((result) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdownloadUrl: `${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treactFullstackConnectionManager.https\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"https\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"http\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}://${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treactFullstackConnectionManager.host\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}:${result.port}${result.path}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectedFile: undefined,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdownloadUrl: undefined,\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonDoubleClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (file.isFolder) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeCurrentPath(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${currentPath}${platformPathSeparator}${file.name}${platformPathSeparator}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t} else if (type === \"select-file\" && onSelect) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${currentPath}${platformPathSeparator}${file.name}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.fileName}>{file.name}</div>\n\t\t\t\t\t\t\t\t\t\t\t{file.isFolder ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.fileIcon}\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfileIsOverFile === index\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"FcOpenedFolder\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"FcFolder\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon className={classes.fileIcon} name=\"FcDocument\" />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{type !== \"explore\" && (\n\t\t\t\t\t\t\t\t\t<div className={classes.stickyActionBarContainer}>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={`${classes.actionBar} ${classes.actionBarNoBorder}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.openButton}\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t((type === \"select-file\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!this.selectedFile.isFolder) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(type === \"select-folder\" &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectedFile.isFolder))\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect(this.selectedFile.fullPath);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tOpen\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Explorer);\n","import React from \"react\";\nimport { Component, View } from \"@react-fullstack/fullstack\";\nimport { FileViewerBase } from \"@web-desktop-environment/interfaces/lib/shared/fileViewer\";\nimport { createStyles, WithStyles } from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport Button from \"@components/button\";\n\nexport const makeFileViewerStyles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tbackground: theme.background.main,\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\tborderTop: \"none\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t\tpaddingBottom: 2,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(15px)\" : \"none\",\n\t\t\tdisplay: \"grid\",\n\t\t\tgridTemplateRows: \"44px calc(100% - 44px)\",\n\t\t},\n\t\theadlineContainer: {\n\t\t\twidth: \"100%\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t},\n\t\tmenuContainer: {\n\t\t\twidth: \"100%\",\n\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\tborderRight: \"none\",\n\t\t\tborderLeft: \"none\",\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(10px)\" : \"none\",\n\t\t\toverflow: \"hidden\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t\theadline: {\n\t\t\tfontSize: 25,\n\t\t\twidth: \"70%\",\n\t\t\tborderRadius: 7,\n\t\t\theight: 33,\n\t\t\tuserSelect: \"none\",\n\t\t\tcolor: theme.background.darkText || theme.background.text,\n\t\t\ttextAlign: \"center\",\n\t\t\tbackground: theme.background.light,\n\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t\talignItems: \"center\",\n\t\t\tposition: \"sticky\",\n\t\t},\n\t\tbackButton: {\n\t\t\tposition: \"relative\",\n\t\t\tright: 0,\n\t\t\tborderRight: `1px solid ${theme.windowBorderColor} !important`,\n\t\t\twidth: 150,\n\t\t\theight: \"100%\",\n\t\t\tminHeight: \"0 !important\",\n\t\t\tborderRadius: \"5px !important\",\n\t\t\tpadding: \"0 !important\",\n\t\t\tminWidth: \"110px !important\",\n\t\t\tborderTopRightRadius: \"0 !important\",\n\t\t\tborderBottomRightRadius: \"0 !important\",\n\t\t},\n\t\topenFileContainer: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\toverflow: \"hidden\",\n\t\t},\n\t\topenFileContainerBody: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tboxShadow: `inset 0px 0 8px 2px ${theme.shadowColor}`,\n\t\t\tbackground: theme.background.light,\n\t\t},\n\t\tfilename: {\n\t\t\twidth: \"100%\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\tuserSelect: \"none\",\n\t\t\toverflow: \"hidden\",\n\t\t},\n\t});\n\nabstract class FileViewer<\n\tViewType extends View<FileViewerBase>,\n\tStyles extends WithStyles<typeof makeFileViewerStyles>\n> extends Component<ViewType, {}, Styles> {\n\tabstract renderViewer(): JSX.Element;\n\trender() {\n\t\tconst { classes, isSelectingFile, onReselectFile, name } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t{isSelectingFile ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className={classes.headlineContainer}>\n\t\t\t\t\t\t\t<div className={classes.headline}>\n\t\t\t\t\t\t\t\t<div className={classes.filename}>\n\t\t\t\t\t\t\t\t\tPlease select file to edit\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={classes.openFileContainer}>\n\t\t\t\t\t\t\t<div className={classes.openFileContainerBody}>\n\t\t\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className={classes.menuContainer}>\n\t\t\t\t\t\t\t<div className={classes.headline}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName={classes.backButton}\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tonClick={() => onReselectFile()}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{\"<- back\"}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<div className={classes.filename}>Editing {name}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{this.renderViewer()}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default FileViewer;\n","import React from \"react\";\nimport NotepadInterface from \"@web-desktop-environment/interfaces/lib/views/apps/utils/Notepad\";\nimport {\n\twithStyles,\n\tcreateStyles,\n\tWithStyles,\n\twithTheme,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport FileViewer, { makeFileViewerStyles } from \"../shared/FileViewer\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\t...makeFileViewerStyles(theme),\n\t\ttextAreaContainer: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tposition: \"relative\",\n\t\t\ttop: 1,\n\t\t\talignItems: \"center\",\n\t\t\tdisplay: \"flex\",\n\t\t},\n\t\ttextAreaContainerBody: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tbackground: theme.background.light,\n\t\t\tpaddingBottom: 2,\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t},\n\t\ttextArea: {\n\t\t\twidth: \"100%\",\n\t\t\tborder: \"none\",\n\t\t\tboxShadow: `${theme.shadowColor} 0px 7px 20px 1px inset`,\n\t\t\tresize: \"none\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tpadding: 0,\n\t\t\tbackground:\n\t\t\t\ttheme.type === \"transparent\"\n\t\t\t\t\t? theme.background.main\n\t\t\t\t\t: theme.background.light,\n\t\t\tcolor: theme.background.text,\n\t\t\toutline: \"none\",\n\t\t\theight: \"calc(100% + 2px)\",\n\t\t},\n\t\tfilename: {\n\t\t\twidth: \"100%\",\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\tuserSelect: \"none\",\n\t\t\toverflow: \"hidden\",\n\t\t},\n\t});\n\nclass Notepad extends FileViewer<NotepadInterface, WithStyles<typeof styles>> {\n\tconstructor(props: Notepad[\"props\"]) {\n\t\tsuper(props);\n\t}\n\n\trenderViewer() {\n\t\tconst { classes, onSave, defaultValue } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.textAreaContainer}>\n\t\t\t\t<div className={classes.textAreaContainerBody}>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tdefaultValue={defaultValue}\n\t\t\t\t\t\tonChange={(e) => onSave(e.target.value)}\n\t\t\t\t\t\tclassName={classes.textArea}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withTheme(withStyles(styles, { withTheme: true })(Notepad));\n","import React from \"react\";\nimport MediaPlayerInterface from \"@web-desktop-environment/interfaces/lib/views/apps/media/MediaPlayer\";\nimport {\n\twithStyles,\n\tcreateStyles,\n\tWithStyles,\n\twithTheme,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport FileViewer, { makeFileViewerStyles } from \"../shared/FileViewer\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\t...makeFileViewerStyles(theme),\n\t\tvideoAreaContanier: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"97%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\toverflow: \"hidden\",\n\t\t},\n\t\tvideoAreaContanierBody: {\n\t\t\twidth: \"94%\",\n\t\t\theight: \"95%\",\n\t\t\tborderRadius: 10,\n\t\t\tboxShadow: `inset 0px -1px 9px 2px ${theme.shadowColor}`,\n\t\t\tpadding: 15,\n\t\t\tbackground: theme.background.light,\n\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\toverflow: \"hidden\",\n\t\t},\n\t\tvideoArea: {\n\t\t\twidth: \"95%\",\n\t\t\tmaxWidth: \"100%\",\n\t\t\tmaxHeight: \"95%\",\n\t\t\tborder: \"none\",\n\t\t\tresize: \"none\",\n\t\t\tbackground: theme.background.light,\n\t\t\tcolor:\n\t\t\t\ttheme.type === \"transparent\"\n\t\t\t\t\t? theme.windowBorderColor\n\t\t\t\t\t: theme.background.text,\n\t\t\tborderRadius: 10,\n\t\t\toutline: \"none\",\n\t\t},\n\t});\n\nclass MediaPlayer extends FileViewer<\n\tMediaPlayerInterface,\n\tWithStyles<typeof styles>\n> {\n\trenderViewer() {\n\t\tconst { classes, source, port } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.videoAreaContanier}>\n\t\t\t\t<div className={classes.videoAreaContanierBody}>\n\t\t\t\t\t<video controls className={classes.videoArea}>\n\t\t\t\t\t\t<source\n\t\t\t\t\t\t\tsrc={`${\n\t\t\t\t\t\t\t\treactFullstackConnectionManager.https ? \"https\" : \"http\"\n\t\t\t\t\t\t\t}://${reactFullstackConnectionManager.host}:${port}/${source}`}\n\t\t\t\t\t\t></source>\n\t\t\t\t\t</video>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withTheme(withStyles(styles, { withTheme: true })(MediaPlayer));\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport SettingsInterface from \"@web-desktop-environment/interfaces/lib/views/apps/system/Settings\";\nimport {\n\tSettings as SettingsConfiguration,\n\tColor as ColorType,\n} from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { withStyles, createStyles, WithStyles } from \"@material-ui/styles\";\nimport { Themes, Colors } from \"@root/theme\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport StateComponent from \"@components/stateComponent\";\nimport Button from \"@components/button\";\nimport axios from \"axios\";\nimport Color from \"@ctrl/tinycolor\";\nimport { SketchPicker } from \"react-color\";\nimport { invertColor } from \"@utils/colors\";\n\nconst makeColor = (baseColor: RGBArray | string): ColorType => {\n\tconst color =\n\t\ttypeof baseColor === \"string\"\n\t\t\t? Color(baseColor)\n\t\t\t: Color({ r: baseColor[0], g: baseColor[1], b: baseColor[2] });\n\treturn {\n\t\tmain: color.toHex8String(),\n\t\tdark: color.darken(0.25).toHex8String(),\n\t\tlight: color.lighten(0.25).toHex8String(),\n\t\ttext: Color(invertColor(color.toHexString())).darken(0.3).toHexString(),\n\t\tdarkText: Color(invertColor(color.toHexString())).darken(0.5).toHexString(),\n\t\ttransparentLight: color.isDark() ? \"#fff\" : \"#444\",\n\t\ttransparent: color.setAlpha(color.getAlpha() * 0.6).toHex8String(),\n\t\ttransparentDark: color.setAlpha(color.getAlpha() * 0.9).toHex8String(),\n\t};\n};\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: theme.background.main,\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(3px)\" : \"none\",\n\t\t},\n\t\tcategorySelection: {\n\t\t\tbackground: theme.background.dark,\n\t\t\tborderRight: `solid 1px ${theme.windowBorderColor}`,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(16px)\" : \"none\",\n\t\t\tborderRadius: \"0 0 0 10px\",\n\t\t\theight: \"100%\",\n\t\t\twidth: 250,\n\t\t},\n\t\tselectCategoryButton: {\n\t\t\tfontSize: 24,\n\t\t\tpaddingTop: 5,\n\t\t\tpaddingBottom: 5,\n\t\t\tuserSelect: \"none\",\n\t\t\tcursor: \"pointer\",\n\t\t\twidth: \"100%\",\n\t\t\ttextAlign: \"center\",\n\t\t\tborderBottom: `solid 1px ${theme.windowBorderColor}`,\n\t\t\tcolor: theme.background.text,\n\t\t\t\"&:hover\":\n\t\t\t\ttheme.type === \"transparent\"\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tbackdropFilter: \"blur(3px)\",\n\t\t\t\t\t  }\n\t\t\t\t\t: {\n\t\t\t\t\t\t\tbackground: theme.background.main,\n\t\t\t\t\t  },\n\t\t},\n\t\tselectCategoryButtonSelected: {\n\t\t\tcolor: theme.secondary.text,\n\t\t\tbackground: `${theme.secondary.main} !important`,\n\t\t},\n\t\tcategory: {\n\t\t\twidth: \"100%\",\n\t\t\tmaxHeight: \"100%\",\n\t\t\toverflowY: \"auto\",\n\t\t\tbackground: theme.background.main,\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\talignItems: \"center\",\n\t\t\tborderRadius: \"0 0 15px 0\",\n\t\t},\n\t\tcategoryTitle: {\n\t\t\tmarginTop: 7,\n\t\t\twidth: \"90%\",\n\t\t\tuserSelect: \"none\",\n\t\t\tborderBottom: `solid 2px ${theme.background.transparent}`,\n\t\t\tcolor: theme.background.text,\n\t\t\tfontSize: 40,\n\t\t},\n\t\tcategorySubtitle: {\n\t\t\twidth: \"85%\",\n\t\t\tmargin: 9,\n\t\t\tuserSelect: \"none\",\n\t\t\tborderBottom: `solid 1px ${theme.background.transparent}`,\n\t\t\tcolor: theme.background.text,\n\t\t\tfontSize: 25,\n\t\t},\n\t\tmarginBlock: {\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tflexDirection: \"column\",\n\t\t\talignItems: \"center\",\n\t\t\twidth: \"100%\",\n\t\t\tmarginTop: 30,\n\t\t\tmarginBottom: 10,\n\t\t},\n\t\tmargin: {\n\t\t\tmargin: 14,\n\t\t},\n\t\tsettingsBlock: {\n\t\t\twidth: \"80%\",\n\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\tbackground: theme.background.dark,\n\t\t\tpadding: 20,\n\t\t\tborderRadius: 9,\n\t\t},\n\t\tsettingsProperty: {\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"space-between\",\n\t\t\talignItems: \"center\",\n\t\t\tfontSize: 25,\n\t\t\tcolor: theme.background.darkText || theme.background.text,\n\t\t\tminHeight: 45,\n\t\t\tmarginBottom: 5,\n\t\t\tborderBottom: `solid 1px ${theme.primary.transparent}`,\n\t\t},\n\t\tsettingsPropertyCol: {\n\t\t\tflexDirection: \"column\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"space-between\",\n\t\t},\n\t\tsettingsPropertyName: {},\n\t\tsettingsPropertyNameCol: {\n\t\t\tfontSize: \"1.8vw\",\n\t\t},\n\t\tsettingsPropertyValueCol: {\n\t\t\twidth: \"100% !important\",\n\t\t\tmargin: 5,\n\t\t\theight: \"auto\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t\ttext: {\n\t\t\tfontSize: 17,\n\t\t\tcolor: theme.background.text,\n\t\t\tmargin: 5,\n\t\t},\n\t\tsettingsPropertyValue: {\n\t\t\twordBreak: \"break-all\",\n\t\t\twidth: \"50%\",\n\t\t\theight: \"100%\",\n\t\t\tbackground: \"transparent\",\n\t\t\ttextAlign: \"center\",\n\t\t\t\"& input\": {\n\t\t\t\ttextAlign: \"center\",\n\t\t\t\tcolor: theme.background.darkText || theme.background.text,\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tborder: \"none\",\n\t\t\t\tborderBottom: `solid 1px ${theme.primary.transparent}`,\n\t\t\t\toutline: \"none\",\n\t\t\t\tfontSize: 23,\n\t\t\t\tbackground: \"transparent\",\n\t\t\t},\n\t\t\t\"& select\": {\n\t\t\t\ttextAlign: \"center\",\n\t\t\t\tcolor: theme.background.darkText || theme.background.text,\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tborder: \"none\",\n\t\t\t\tborderBottom: `solid 1px ${theme.primary.transparent}`,\n\t\t\t\toutline: \"none\",\n\t\t\t\tfontSize: 23,\n\t\t\t\tbackground: \"transparent\",\n\t\t\t\t\"& option\": {\n\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t\tbackground: theme.background.dark,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tsettingsPropertyValueError: {\n\t\t\tfontSize: 12,\n\t\t\tcolor: theme.error.main,\n\t\t},\n\t\tcolorsTable: {\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t},\n\t\tcolor: {\n\t\t\twidth: 30,\n\t\t\theight: 30,\n\t\t\tmargin: 5,\n\t\t\tborderRadius: \"50%\",\n\t\t\tborder: `solid 1px ${theme.windowBorderColor}`,\n\t\t\t\"&:hover\": {\n\t\t\t\ttransform: \"scale(1.2)\",\n\t\t\t},\n\t\t},\n\t\tthemeGrid: {\n\t\t\twidth: \"100%\",\n\t\t\tdisplay: \"grid\",\n\t\t\tpadding: 20,\n\t\t\tboxShadow: `inset 0 0 20px 0px ${theme.shadowColor}`,\n\t\t\tjustifyContent: \"center\",\n\t\t\tgridTemplateColumns: \"repeat(auto-fit, minmax(80px, 180px))\",\n\t\t\tgridGap: 15,\n\t\t\tgap: \"15px\",\n\t\t},\n\t\tthemeButton: {\n\t\t\theight: 130,\n\t\t},\n\t});\n\ntype SettingsCategory = \"desktop\" | \"network\" | \"systemInfo\";\n\ninterface SettingsState {\n\tselectedCategory: SettingsCategory;\n\tsettings: SettingsConfiguration;\n}\n\ntype ColormindResponse = {\n\tresult: [RGBArray, RGBArray, RGBArray, RGBArray, RGBArray];\n};\ntype RGBArray = [number, number, number];\n\nclass Settings extends Component<\n\tSettingsInterface,\n\tSettingsState,\n\tWithStyles<typeof styles>\n> {\n\tconstructor(props: Settings[\"props\"]) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselectedCategory: \"desktop\",\n\t\t\tsettings: props.settings,\n\t\t};\n\t}\n\n\tgenerateCustomTheme = () => {\n\t\taxios\n\t\t\t.post<ColormindResponse>(\n\t\t\t\t\"http://colormind.io/api/\",\n\t\t\t\tJSON.stringify({ model: \"default\" })\n\t\t\t)\n\t\t\t.then((response) => {\n\t\t\t\tconst colors = response.data.result;\n\t\t\t\tthis.setState((state) => {\n\t\t\t\t\tstate.settings.desktop.customTheme = {\n\t\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\t\tname: \"custom\",\n\t\t\t\t\t\tshadowColor: \"#000\",\n\t\t\t\t\t\tbackground: makeColor(colors[0]),\n\t\t\t\t\t\tprimary: makeColor(colors[1]),\n\t\t\t\t\t\tsecondary: makeColor(colors[2]),\n\t\t\t\t\t\twindowBorderColor: makeColor(colors[0]).text,\n\t\t\t\t\t\tsuccess: makeColor(colors[3]),\n\t\t\t\t\t\twindowBarColor: Color({\n\t\t\t\t\t\t\tr: colors[4][0],\n\t\t\t\t\t\t\tg: colors[4][1],\n\t\t\t\t\t\t\tb: colors[4][2],\n\t\t\t\t\t\t}).toHex8String(),\n\t\t\t\t\t\terror: Themes.transparent.error,\n\t\t\t\t\t\twarning: Themes.transparent.warning,\n\t\t\t\t\t\twindowBorder: true,\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.setSettings(state.settings);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\trenderDesktopCategory = () => {\n\t\tconst { classes, setSettings } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.category}>\n\t\t\t\t<div className={classes.categoryTitle}>Desktop Settings</div>\n\t\t\t\t<div className={classes.marginBlock}>\n\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>background</div>\n\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.settings.desktop.background}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tconst value = e.target.value;\n\t\t\t\t\t\t\t\t\t\tthis.setState((state) => {\n\t\t\t\t\t\t\t\t\t\t\tstate.settings.desktop.background = value;\n\t\t\t\t\t\t\t\t\t\t\tsetSettings(state.settings);\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={`${classes.settingsProperty} ${classes.settingsPropertyCol}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className={classes.settingsPropertyNameCol}>theme</div>\n\t\t\t\t\t\t\t<div className={classes.settingsPropertyValueCol}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classes.themeGrid}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackground: this.state.settings.desktop.background,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{(Object.keys(Themes) as (keyof typeof Themes)[]).map(\n\t\t\t\t\t\t\t\t\t\t(key) => (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.themeButton}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: Themes[key].background.main,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: Themes[key].background.text,\n\t\t\t\t\t\t\t\t\t\t\t\t\tboxShadow: `0 0 20px 0px ${Themes[key].shadowColor}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackdropFilter:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tThemes[key].type === \"transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"blur(5px)\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\",\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState((state) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.settings.desktop.theme = key;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettings(state.settings);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{Themes[key].name}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{this.state.settings.desktop.theme === \"custom\" && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${classes.settingsProperty} ${classes.settingsPropertyCol}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyNameCol}>\n\t\t\t\t\t\t\t\t\t\tCustom Theme\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={`${classes.settingsPropertyValue} ${classes.settingsPropertyValueCol}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Button border onClick={this.generateCustomTheme}>\n\t\t\t\t\t\t\t\t\t\t\tGenarate custom theme\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${classes.settingsPropertyValue} ${classes.settingsPropertyValueCol}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{this.renderCreateCustomTheme()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\trenderCreateCustomTheme = () => {\n\t\tconst { classes } = this.props;\n\t\tconst { background, primary, secondary, error, success, warning } =\n\t\t\tthis.props.settings.desktop.customTheme || Themes.transparent;\n\t\treturn (\n\t\t\t<StateComponent<{\n\t\t\t\tselectedColor: Colors;\n\t\t\t\tcolors: { name: Colors; value: string }[];\n\t\t\t}>\n\t\t\t\tdefaultState={{\n\t\t\t\t\tselectedColor: \"background\",\n\t\t\t\t\tcolors: [\n\t\t\t\t\t\t{ name: \"background\", value: background.main },\n\t\t\t\t\t\t{ name: \"primary\", value: primary.main },\n\t\t\t\t\t\t{ name: \"secondary\", value: secondary.main },\n\t\t\t\t\t\t{ name: \"error\", value: error.main },\n\t\t\t\t\t\t{ name: \"success\", value: success.main },\n\t\t\t\t\t\t{ name: \"warning\", value: warning.main },\n\t\t\t\t\t],\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{(state, setState) => {\n\t\t\t\t\tconst saveToTheme = () => {\n\t\t\t\t\t\tconst getColor = (color: Colors) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tstate.colors.find((currentColor) => currentColor.name === color)\n\t\t\t\t\t\t\t\t\t?.value || Themes.transparent[color].main\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.setState((fullState) => {\n\t\t\t\t\t\t\tfullState.settings.desktop.customTheme = {\n\t\t\t\t\t\t\t\ttype: \"custom\",\n\t\t\t\t\t\t\t\tname: \"custom\",\n\t\t\t\t\t\t\t\tshadowColor: \"#000\",\n\t\t\t\t\t\t\t\tbackground: makeColor(getColor(\"background\")),\n\t\t\t\t\t\t\t\tprimary: makeColor(getColor(\"primary\")),\n\t\t\t\t\t\t\t\tsecondary: makeColor(getColor(\"secondary\")),\n\t\t\t\t\t\t\t\tsuccess: makeColor(getColor(\"success\")),\n\t\t\t\t\t\t\t\terror: makeColor(getColor(\"error\")),\n\t\t\t\t\t\t\t\twarning: makeColor(getColor(\"warning\")),\n\t\t\t\t\t\t\t\twindowBarColor: getColor(\"background\"),\n\t\t\t\t\t\t\t\twindowBorderColor: Color(getColor(\"background\")).isDark()\n\t\t\t\t\t\t\t\t\t? \"#fff\"\n\t\t\t\t\t\t\t\t\t: \"#000\",\n\t\t\t\t\t\t\t\twindowBorder: true,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.props.setSettings(fullState.settings);\n\t\t\t\t\t\t\treturn {}; // no need to rerender\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className={classes.categorySubtitle}>\n\t\t\t\t\t\t\t\tCreate custom theme\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={classes.colorsTable}>\n\t\t\t\t\t\t\t\t{state.colors.map((color, index) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.color}\n\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: color.value }}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setState({ selectedColor: color.name })}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={classes.text}>\n\t\t\t\t\t\t\t\tslected color: {state.selectedColor}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<SketchPicker\n\t\t\t\t\t\t\t\tonChange={(color) => {\n\t\t\t\t\t\t\t\t\tconst originalColor = state.colors.find(\n\t\t\t\t\t\t\t\t\t\t(color) => color.name === state.selectedColor\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (originalColor) {\n\t\t\t\t\t\t\t\t\t\toriginalColor.value =\n\t\t\t\t\t\t\t\t\t\t\tcolor.hex +\n\t\t\t\t\t\t\t\t\t\t\tMath.round((color.rgb.a || 0) * 255).toString(16);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsetState({ colors: state.colors });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\t\t\tstate.colors.find(\n\t\t\t\t\t\t\t\t\t\t(color) => color.name === state.selectedColor\n\t\t\t\t\t\t\t\t\t)?.value\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t></SketchPicker>\n\t\t\t\t\t\t\t<Button border className={classes.margin} onClick={saveToTheme}>\n\t\t\t\t\t\t\t\tSave custom theme\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</StateComponent>\n\t\t);\n\t};\n\n\trenderNetworkCategory = () => {\n\t\tconst { classes, setSettings } = this.props;\n\t\treturn (\n\t\t\t<StateComponent\n\t\t\t\tdefaultState={{\n\t\t\t\t\terrorMainPort: \"\",\n\t\t\t\t\terrorStartPort: \"\",\n\t\t\t\t\terrorEndPort: \"\",\n\t\t\t\t\tmainPort: this.state.settings.network.ports.mainPort,\n\t\t\t\t\tstartPort: this.state.settings.network.ports.startPort,\n\t\t\t\t\tendPort: this.state.settings.network.ports.endPort,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{(state, setState) => (\n\t\t\t\t\t<div className={classes.category}>\n\t\t\t\t\t\t<div className={classes.categoryTitle}>Network Settings</div>\n\t\t\t\t\t\t<div className={classes.marginBlock}>\n\t\t\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>Main Port</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={state.mainPort || \"\"}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = Number(e.target.value) || 0;\n\t\t\t\t\t\t\t\t\t\t\t\tsetState({ mainPort: value });\n\t\t\t\t\t\t\t\t\t\t\t\tif (value >= 1025 && value <= 65534) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({ errorMainPort: \"\" });\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState((state) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.settings.network.ports.mainPort = value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettings(state.settings);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terrorMainPort:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"please enter a number between 1025 to 65,534\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValueError}>\n\t\t\t\t\t\t\t\t\t\t\t{state.errorMainPort}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>Start Port</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={state.startPort || \"\"}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = Number(e.target.value) || 0;\n\t\t\t\t\t\t\t\t\t\t\t\tsetState({ startPort: value });\n\t\t\t\t\t\t\t\t\t\t\t\tif (value >= 1025 && value <= 65534) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({ errorStartPort: \"\" });\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState((state) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.settings.network.ports.startPort = value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettings(state.settings);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terrorStartPort:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"please enter a number between 1025 to 65,534\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValueError}>\n\t\t\t\t\t\t\t\t\t\t\t{state.errorMainPort}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>End Port</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={state.endPort || \"\"}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = Number(e.target.value) || 0;\n\t\t\t\t\t\t\t\t\t\t\t\tsetState({ endPort: value });\n\t\t\t\t\t\t\t\t\t\t\t\tif (value >= 1025 && value <= 65534) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({ errorEndPort: \"\" });\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState((state) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate.settings.network.ports.endPort = value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettings(state.settings);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsettings: state.settings,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terrorEndPort:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"please enter a number between 1025 to 65,534\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValueError}>\n\t\t\t\t\t\t\t\t\t\t\t{state.errorMainPort}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</StateComponent>\n\t\t);\n\t};\n\n\trenderSystemInfoCategory = () => {\n\t\tconst { classes, systemInfo } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.category}>\n\t\t\t\t<div className={classes.categoryTitle}>System Information</div>\n\t\t\t\t{systemInfo?.os && (\n\t\t\t\t\t<div className={classes.marginBlock}>\n\t\t\t\t\t\t<div className={classes.categorySubtitle}>OS</div>\n\t\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t\t{systemInfo.os.hostname && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tcomputer hostname\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.os.hostname}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.os.platform && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>running os</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.os.platform}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.os.kernel && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\trunning kernel\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.os.kernel}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{systemInfo?.cpu && (\n\t\t\t\t\t<div className={classes.marginBlock}>\n\t\t\t\t\t\t<div className={classes.categorySubtitle}>CPU</div>\n\t\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t\t{systemInfo.cpu?.brandName && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>name</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.brandName}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.manufacturer && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tmanufacturer name\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.manufacturer}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.cores && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tnumber of cores\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.cores}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.physicalCores && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tnumber of physical cores\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.physicalCores}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.speed && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tprcessor speed\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.speed} GHz\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.speedMax && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tprcessor maximum speed\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.speedMax} GHz\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.cpu?.speedMin && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tprcessor minimum speed\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.cpu.speedMin} GHz\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{systemInfo?.ram && (\n\t\t\t\t\t<div className={classes.marginBlock}>\n\t\t\t\t\t\t<div className={classes.categorySubtitle}>Memory</div>\n\t\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t\t{systemInfo.ram.total && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\ttotal memory amout\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.ram.total}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{systemInfo.ram.free && (\n\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\tfree memory amout\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t{systemInfo.ram.free}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{systemInfo?.disks &&\n\t\t\t\t\tsystemInfo.disks.map(\n\t\t\t\t\t\t(disk, index) =>\n\t\t\t\t\t\t\tdisk && (\n\t\t\t\t\t\t\t\t<div className={classes.marginBlock} key={index}>\n\t\t\t\t\t\t\t\t\t<div className={classes.categorySubtitle}>\n\t\t\t\t\t\t\t\t\t\tDisk {index + 1}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className={classes.settingsBlock}>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\t\t\tdisk name\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t\t\t{disk.name}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\t\t\tdisk vendor\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t\t\t{disk.vendor}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsProperty}>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyName}>\n\t\t\t\t\t\t\t\t\t\t\t\tdisk size\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.settingsPropertyValue}>\n\t\t\t\t\t\t\t\t\t\t\t\t{disk.total}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t};\n\n\trender() {\n\t\tconst { classes } = this.props;\n\t\tconst { selectedCategory } = this.state;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<div className={classes.categorySelection}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`${classes.selectCategoryButton} ${\n\t\t\t\t\t\t\tselectedCategory === \"desktop\"\n\t\t\t\t\t\t\t\t? classes.selectCategoryButtonSelected\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => this.setState({ selectedCategory: \"desktop\" })}\n\t\t\t\t\t>\n\t\t\t\t\t\tDesktop\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`${classes.selectCategoryButton} ${\n\t\t\t\t\t\t\tselectedCategory === \"network\"\n\t\t\t\t\t\t\t\t? classes.selectCategoryButtonSelected\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => this.setState({ selectedCategory: \"network\" })}\n\t\t\t\t\t>\n\t\t\t\t\t\tNetwork\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`${classes.selectCategoryButton} ${\n\t\t\t\t\t\t\tselectedCategory === \"systemInfo\"\n\t\t\t\t\t\t\t\t? classes.selectCategoryButtonSelected\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => this.setState({ selectedCategory: \"systemInfo\" })}\n\t\t\t\t\t>\n\t\t\t\t\t\tInformation\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{selectedCategory === \"desktop\" && this.renderDesktopCategory()}\n\t\t\t\t{selectedCategory === \"network\" && this.renderNetworkCategory()}\n\t\t\t\t{selectedCategory === \"systemInfo\" && this.renderSystemInfoCategory()}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport IframeInterface from \"@web-desktop-environment/interfaces/lib/views/apps/thirdParty/Iframe\";\nimport {\n\twithStyles,\n\tcreateStyles,\n\tWithStyles,\n\twithTheme,\n\tWithTheme,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\tborderTop: \"none\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tbackground: theme.background.main,\n\t\t\tbackdropFilter: \"blur(15px)\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t},\n\t});\n\nclass Iframe extends Component<\n\tIframeInterface,\n\t{},\n\tWithStyles<typeof styles> & WithTheme<Theme>\n> {\n\tprivate iframeRef = React.createRef<HTMLIFrameElement>();\n\n\tprivate intervalsToClear: NodeJS.Timeout[] = [];\n\n\tcomponentDidMount = () => {\n\t\tthis.intervalsToClear.push(\n\t\t\tsetInterval(() => {\n\t\t\t\tconst activeElement = document.activeElement;\n\t\t\t\tif (\n\t\t\t\t\tthis.iframeRef.current &&\n\t\t\t\t\tactiveElement &&\n\t\t\t\t\tactiveElement !== document.body &&\n\t\t\t\t\tthis.iframeRef.current === activeElement\n\t\t\t\t) {\n\t\t\t\t\tthis.iframeRef.current.click();\n\t\t\t\t}\n\t\t\t}, 50)\n\t\t);\n\t};\n\n\tcomponentWillUnmount = () => {\n\t\tthis.intervalsToClear.forEach(clearInterval);\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\tclasses,\n\t\t\thost,\n\t\t\tport,\n\t\t\tpath,\n\t\t\thttps = reactFullstackConnectionManager.https,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<iframe\n\t\t\t\tref={this.iframeRef}\n\t\t\t\tallowFullScreen\n\t\t\t\tallowTransparency\n\t\t\t\tsandbox=\"allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-presentation allow-scripts allow-same-origin\"\n\t\t\t\tallow=\"clipboard-read; clipboard-write; geolocation; allow-forms; allow-pointer-lock; fullscreen; camera; microphone; layout-animations; unoptimized-images; oversized-images; sync-script; sync-xhr; unsized-media;\"\n\t\t\t\tclassName={classes.root}\n\t\t\t\tsrc={`${https ? \"https\" : \"http\"}://${\n\t\t\t\t\thost || reactFullstackConnectionManager.host\n\t\t\t\t}${port ? \":\" + port : \"\"}${path || \"\"}`}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default withTheme(withStyles(styles, { withTheme: true })(Iframe));\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport LoadingScreenInterface from \"@web-desktop-environment/interfaces/lib/views/apps/shared/LoadingScreen\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { WithStyles, withStyles, createStyles } from \"@material-ui/styles\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tbackground: theme.background.main,\n\t\t\tborder: theme.windowBorder\n\t\t\t\t? `1px solid ${theme.windowBorderColor}`\n\t\t\t\t: \"none\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\tgap: 20,\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\tborderRadius: \"0 0 9px 9px\",\n\t\t\tboxShadow: `-10px 12px 20px -2px  ${theme.shadowColor}`,\n\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(3px)\" : \"none\",\n\t\t},\n\t\tanimationWave: {\n\t\t\twidth: \"15%\",\n\t\t\tpadding: \"15%\",\n\t\t\tboxSizing: \"border-box\",\n\t\t\tbackgroundColor: theme.secondary.main,\n\t\t\tborderRadius: \"20% 20% 10% 10%\",\n\t\t\tposition: \"relative\",\n\t\t\tboxShadow: `inset 0 0 30px 0 ${theme.shadowColor}, 0 4px 10px 0 ${theme.shadowColor}`,\n\t\t\toverflow: \"hidden\",\n\t\t\t\"&:before\": {\n\t\t\t\tcontent: \"''\",\n\t\t\t\tposition: \"absolute\",\n\t\t\t\twidth: \"120%\",\n\t\t\t\theight: \"110%\",\n\t\t\t\ttop: \"-75%\",\n\t\t\t\tright: \"-10%\",\n\t\t\t\tborderRadius: \"50%\",\n\t\t\t\tbackground: theme.background.main,\n\t\t\t\tanimation: \"$wave 5s linear infinite\",\n\t\t\t},\n\t\t\t\"&:after\": {\n\t\t\t\tcontent: \"''\",\n\t\t\t\tposition: \"absolute\",\n\t\t\t\twidth: \"120%\",\n\t\t\t\tright: \"-10%\",\n\t\t\t\theight: \"107%\",\n\t\t\t\ttop: \"-75%\",\n\t\t\t\tborderRadius: \"50%\",\n\t\t\t\tbackground: theme.background.light,\n\t\t\t\tanimation: \"$wave 5s linear infinite\",\n\t\t\t},\n\t\t},\n\t\t\"@keyframes wave\": {\n\t\t\tfrom: {\n\t\t\t\ttransform: \"rotate(0)\",\n\t\t\t},\n\t\t\tto: {\n\t\t\t\ttransform: \"rotate(360deg)\",\n\t\t\t},\n\t\t},\n\t\tjumpingCube: {\n\t\t\twidth: 50,\n\t\t\theight: 50,\n\t\t\tposition: \"relative\",\n\t\t\ttop: -10,\n\t\t\t\"&:before\": {\n\t\t\t\tcontent: \"''\",\n\t\t\t\twidth: 50,\n\t\t\t\theight: 5,\n\t\t\t\tbackground: theme.primary.dark,\n\t\t\t\topacity: 0.1,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\ttop: 59,\n\t\t\t\tleft: 0,\n\t\t\t\tborderRadius: \"50%\",\n\t\t\t\tanimation: \"$shadowStretch .5s linear infinite\",\n\t\t\t},\n\t\t\t\"&:after\": {\n\t\t\t\tcontent: \"''\",\n\t\t\t\twidth: 50,\n\t\t\t\theight: 50,\n\t\t\t\tborder: `1px solid ${theme.windowBorderColor}`,\n\t\t\t\tbackground: theme.primary.main,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\tborderRadius: 9,\n\t\t\t\tanimation: \"$boxJump .5s linear infinite\",\n\t\t\t},\n\t\t},\n\t\t\"@keyframes boxJump\": {\n\t\t\t\"17%\": {\n\t\t\t\tborderBottomRightRadius: 3,\n\t\t\t},\n\t\t\t\"25%\": {\n\t\t\t\ttransform: \"translateY(9px) rotate(22.5deg)\",\n\t\t\t},\n\t\t\t\"50%\": {\n\t\t\t\ttransform: \"translateY(18px) scale(1, .9) rotate(45deg)\",\n\t\t\t\tborderBottomRightRadius: 40,\n\t\t\t},\n\t\t\t\"75%\": {\n\t\t\t\ttransform: \"translateY(9px) rotate(67.5deg)\",\n\t\t\t},\n\t\t\t\"100%\": {\n\t\t\t\ttransform: \" translateY(0) rotate(90deg)\",\n\t\t\t},\n\t\t},\n\t\t\"@keyframes shadow\": {\n\t\t\t\"0%, 100%\": {\n\t\t\t\ttransform: \"scale(1, 1)\",\n\t\t\t},\n\t\t\t\"50%\": {\n\t\t\t\ttransform: \"scale(1.2, 1)\",\n\t\t\t},\n\t\t},\n\t\tmessage: {\n\t\t\tfontSize: 30,\n\t\t\tcolor: theme.background.text,\n\t\t},\n\t});\n\nclass LoadingScreen extends Component<\n\tLoadingScreenInterface,\n\t{},\n\tWithStyles<typeof styles>\n> {\n\trender() {\n\t\tconst { classes, message, variant } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\tvariant === \"water\" ? classes.animationWave : classes.jumpingCube\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<div className={classes.message}>{message}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(LoadingScreen);\n","import React, { useState } from \"react\";\nimport { WindowBar } from \"@views/Desktop\";\nimport { Explorer, Notepad, Settings, Window } from \"@views/index\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport { Window as WindowState } from \"@web-desktop-environment/interfaces/lib/shared/window\";\nimport { WindowState as WindowStateUpdate } from \"@web-desktop-environment/interfaces/lib/views/Window\";\nimport { Themes } from \"@root/theme\";\nimport { ThemeProvider } from \"@material-ui/styles\";\n\nconst emptyFunction = async () => {\n\t/* empty body */\n};\nconst defaultWindowProps = {\n\tbackground: \"\",\n\tsetWindowState: emptyFunction,\n\tonClose: emptyFunction,\n\tonLaunchApp: emptyFunction,\n\twindow: {},\n};\n\nconst useWindow = (initialState: WindowState) => {\n\tconst [state, setState] = useState(initialState);\n\treturn {\n\t\tstate,\n\t\tsetWindowState: async (newWindowState: WindowStateUpdate) => {\n\t\t\tsetState({\n\t\t\t\t...state,\n\t\t\t\t...newWindowState.size,\n\t\t\t\tposition: newWindowState.position || state.position,\n\t\t\t});\n\t\t},\n\t};\n};\n\nconst App = () => {\n\tconst [background, setBackground] = useState(\n\t\t'url(\"https://picsum.photos/id/1039/1920/1080\")'\n\t);\n\tconst [theme, setTheme] = useState<Theme>(Themes.dark);\n\n\tconst explorerWindow = useWindow({\n\t\tposition: { x: 50, y: 100 },\n\t\tminWidth: 600,\n\t\tminHeight: 550,\n\t\theight: 500,\n\t\twidth: 800,\n\t});\n\tconst notepadWindow = useWindow({\n\t\tposition: { x: 950, y: 50 },\n\t\tminWidth: 600,\n\t\tminHeight: 550,\n\t\theight: 750,\n\t\twidth: 700,\n\t});\n\tconst settingsWindow = useWindow({\n\t\tposition: { x: 700, y: 300 },\n\t\tminWidth: 600,\n\t\tminHeight: 550,\n\t\theight: 600,\n\t\twidth: 900,\n\t});\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tbackground,\n\t\t\t\tposition: \"absolute\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"100%\",\n\t\t\t}}\n\t\t>\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<Window\n\t\t\t\t\ttitle={\"explorer\"}\n\t\t\t\t\tname={\"explorer\"}\n\t\t\t\t\ticon={{\n\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\ticon: \"FcFolder\",\n\t\t\t\t\t}}\n\t\t\t\t\t{...defaultWindowProps}\n\t\t\t\t\twindow={explorerWindow.state}\n\t\t\t\t\tsetWindowState={explorerWindow.setWindowState}\n\t\t\t\t>\n\t\t\t\t\t<Explorer\n\t\t\t\t\t\tcurrentPath={\"/home/web-desktop-environment\"}\n\t\t\t\t\t\tfiles={[\n\t\t\t\t\t\t\t{ isFolder: true, name: \"Documents\" },\n\t\t\t\t\t\t\t{ isFolder: true, name: \"Desktop\" },\n\t\t\t\t\t\t\t{ isFolder: true, name: \"Music\" },\n\t\t\t\t\t\t\t{ isFolder: false, name: \"passwords.txt\" },\n\t\t\t\t\t\t\t{ isFolder: false, name: \"secrets.txt\" },\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tonChangeCurrentPath={emptyFunction}\n\t\t\t\t\t\tonCopy={emptyFunction}\n\t\t\t\t\t\tonCreateFile={emptyFunction}\n\t\t\t\t\t\tonCreateFolder={emptyFunction}\n\t\t\t\t\t\tonDelete={emptyFunction}\n\t\t\t\t\t\tonMove={emptyFunction}\n\t\t\t\t\t\tonRequestDownloadLink={() => new Promise(emptyFunction)}\n\t\t\t\t\t\tonUpload={emptyFunction}\n\t\t\t\t\t\tplatformPathSeparator={\"/\"}\n\t\t\t\t\t\ttype={\"explore\"}\n\t\t\t\t\t/>\n\t\t\t\t</Window>\n\t\t\t\t<Window\n\t\t\t\t\ttitle={\"notepad\"}\n\t\t\t\t\tname={\"notepad\"}\n\t\t\t\t\ticon={{\n\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\ticon: \"FcFile\",\n\t\t\t\t\t}}\n\t\t\t\t\t{...defaultWindowProps}\n\t\t\t\t\twindow={notepadWindow.state}\n\t\t\t\t\tsetWindowState={notepadWindow.setWindowState}\n\t\t\t\t>\n\t\t\t\t\t<Notepad\n\t\t\t\t\t\tdefaultValue={\n\t\t\t\t\t\t\t\"list of all my passwords:\\n1. 12345Password\\n2. passworD12345\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisSelectingFile={false}\n\t\t\t\t\t\tname=\"passwords.txt\"\n\t\t\t\t\t\tonReselectFile={emptyFunction}\n\t\t\t\t\t\tonSave={emptyFunction}\n\t\t\t\t\t\tpath={\"/home/web-desktop-environment/passwords.txt\"}\n\t\t\t\t\t/>\n\t\t\t\t</Window>\n\t\t\t\t<Window\n\t\t\t\t\ttitle={\"settings\"}\n\t\t\t\t\tname={\"settings\"}\n\t\t\t\t\ticon={{\n\t\t\t\t\t\ttype: \"icon\",\n\t\t\t\t\t\ticon: \"FcSettings\",\n\t\t\t\t\t}}\n\t\t\t\t\t{...defaultWindowProps}\n\t\t\t\t\twindow={settingsWindow.state}\n\t\t\t\t\tsetWindowState={settingsWindow.setWindowState}\n\t\t\t\t>\n\t\t\t\t\t<Settings\n\t\t\t\t\t\tonReload={emptyFunction}\n\t\t\t\t\t\tsetSettings={async (newSettings) => {\n\t\t\t\t\t\t\tsetBackground(newSettings.desktop.background);\n\t\t\t\t\t\t\tif (newSettings.desktop.theme !== theme.name) {\n\t\t\t\t\t\t\t\tif (newSettings.desktop.theme === \"custom\") {\n\t\t\t\t\t\t\t\t\tsetTheme(newSettings.desktop.customTheme || Themes.dark);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetTheme(Themes[newSettings.desktop.theme]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsettings={{\n\t\t\t\t\t\t\tdesktop: {\n\t\t\t\t\t\t\t\ttheme: theme.type,\n\t\t\t\t\t\t\t\tbackground,\n\t\t\t\t\t\t\t\tnativeBackground: \"\",\n\t\t\t\t\t\t\t\tcustomTheme: theme,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tnetwork: {\n\t\t\t\t\t\t\t\tports: {\n\t\t\t\t\t\t\t\t\tendPort: 9300,\n\t\t\t\t\t\t\t\t\tmainPort: 5000,\n\t\t\t\t\t\t\t\t\tstartPort: 9200,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Window>\n\t\t\t\t<WindowBar\n\t\t\t\t\tisStartMenuOpen={false}\n\t\t\t\t\ttoggleStartMenu={() => {\n\t\t\t\t\t\t/* intently empty */\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</ThemeProvider>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React from \"react\";\nimport DesktopInterface from \"@web-desktop-environment/interfaces/lib/views/Desktop\";\nimport { Client } from \"@react-fullstack/fullstack-socket-client\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport { withStyles, createStyles, WithStyles } from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\nimport TextField from \"@components/textField\";\nimport Icon from \"@components/icon\";\nimport windowManager, { Window } from \"@state/WindowManager\";\nimport { Icon as IconType } from \"@web-desktop-environment/interfaces/lib/shared/icon\";\nimport { ConnectionContext } from \"@root/contexts\";\nimport { reactFullstackConnectionManager } from \"@root/index\";\nimport { Link } from \"react-router-dom\";\nimport { windowsBarHeight } from \"@views/Desktop\";\nimport { transparent } from \"@utils/colors\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tright: 0,\n\t\t\tleft: 0,\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t},\n\t\tappContainer: {\n\t\t\tbackground: theme.background.main,\n\t\t\toverflowY: \"auto\",\n\t\t\tborderRadius: 10,\n\t\t\tboxShadow: \"-5px 6px 10px -1px #0007\",\n\t\t\tpadding: 10,\n\t\t\twidth: \"90%\",\n\t\t\theight: \"90%\",\n\t\t},\n\t\thr: {\n\t\t\tborder: `solid 1px ${theme.background.dark}`,\n\t\t},\n\t\tswitchToDesktopButton: {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 10 - windowsBarHeight,\n\t\t\ttransition: \"top 300ms\",\n\t\t\tright: 45,\n\t\t\theight: windowsBarHeight,\n\t\t\tcursor: \"pointer\",\n\t\t\twidth: 80,\n\t\t\tborderRadius: \"0 0 15px 15px\",\n\t\t\tfontSize: 40,\n\t\t\tpaddingTop: 5,\n\t\t\tborderBottom: \"none\",\n\t\t\tdisplay: \"flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tcolor: theme.background.text,\n\t\t\tboxShadow: `0 0px 3px 0px ${theme.shadowColor}`,\n\t\t\tborder: `1px solid ${theme.transparentBorder || \"#eee2\"}`,\n\t\t\tbackdropFilter: \"blur(10px)\",\n\t\t\tbackground: transparent(\n\t\t\t\ttheme.background.transparent || theme.background.main,\n\t\t\t\ttheme.type === \"transparent\" ? 0.15 : 0.6\n\t\t\t),\n\t\t\t\"&:hover\": {\n\t\t\t\ttop: 0,\n\t\t\t\tbackground: theme.background.transparent,\n\t\t\t},\n\t\t\tzIndex: 2,\n\t\t},\n\t\tappFilter: {\n\t\t\theight: 55,\n\t\t},\n\t\tappGrid: {\n\t\t\tdisplay: \"grid\",\n\t\t\tgridTemplateColumns: \"repeat(auto-fit, minmax(80px, 120px))\",\n\t\t\tmargin: 15,\n\t\t\tjustifyContent: \"center\",\n\t\t\tgridGap: 30,\n\t\t\tgap: \"20px\",\n\t\t\tgridAutoRows: 100,\n\t\t},\n\t\tapp: {\n\t\t\tborderRadius: 7,\n\t\t\tpadding: 2,\n\t\t\tcolor: theme.secondary.text,\n\t\t\tcursor: \"pointer\",\n\t\t\tboxShadow: `-1px 2px 10px 1px ${theme.shadowColor}`,\n\t\t\ttransition: \"background 280ms, color 280ms, transform 450ms\",\n\t\t\t\"&:hover\": {\n\t\t\t\tboxShadow: `0px 0px 20px 9px ${theme.shadowColor}`,\n\t\t\t\tbackground: theme.secondary.main,\n\t\t\t\tcolor: theme.secondary.text,\n\t\t\t\ttransform: \"scale(1.25) translateY(-20px)\",\n\t\t\t\tbackdropFilter: theme.type === \"transparent\" ? \"blur(12px)\" : \"none\",\n\t\t\t},\n\t\t\theight: 90,\n\t\t\tdisplay: \"flex\",\n\t\t\tflexDirection: \"column-reverse\",\n\t\t},\n\t\topenApp: {\n\t\t\tborderBottom: `2px solid ${theme.secondary.main}`,\n\t\t\t\"&:hover\": {\n\t\t\t\tborderBottom: `2px solid ${theme.secondary.text}`,\n\t\t\t},\n\t\t},\n\t\tappIcon: {\n\t\t\tuserSelect: \"none\",\n\t\t\ttextAlign: \"center\",\n\t\t\tmaxWidth: 100,\n\t\t\tfontSize: 50,\n\t\t},\n\t\tappName: {\n\t\t\twhiteSpace: \"nowrap\",\n\t\t\toverflow: \"hidden\",\n\t\t\ttextOverflow: \"ellipsis\",\n\t\t\tmaxWidth: \"100%\",\n\t\t\ttextAlign: \"center\",\n\t\t\tuserSelect: \"none\",\n\t\t},\n\t});\n\ninterface DesktopState {\n\topenWindows: Window[];\n\tfilterAppQuery: string;\n}\n\nclass Desktop extends Component<\n\tDesktopInterface,\n\tDesktopState,\n\tWithStyles<typeof styles>\n> {\n\tconstructor(props: Desktop[\"props\"]) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\topenWindows: windowManager.windows,\n\t\t\tfilterAppQuery: \"\",\n\t\t};\n\t\twindowManager.emitter.on(\"addWindow\", this.updateWindow);\n\t\twindowManager.emitter.on(\"closeWindow\", this.updateWindow);\n\t\twindowManager.emitter.on(\"maximizeWindow\", this.updateWindow);\n\t\twindowManager.emitter.on(\"minimizeWindow\", this.updateWindow);\n\t}\n\n\tupdateWindow = () =>\n\t\tthis.setState({ openWindows: [...windowManager.windows] });\n\n\trenderAppGrid = (\n\t\tapp: { name: string; icon: IconType },\n\t\tisOpen: boolean,\n\t\tonClick: () => void,\n\t\tindex: number\n\t) => {\n\t\tconst { classes } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={index}\n\t\t\t\tclassName={`${classes.app} ${isOpen ? classes.openApp : \"\"}`}\n\t\t\t\tonClick={onClick}\n\t\t\t>\n\t\t\t\t{app.icon.type === \"img\" ? (\n\t\t\t\t\t<img alt={`${app.name} icon`} src={app.icon.icon} />\n\t\t\t\t) : (\n\t\t\t\t\t<Icon className={classes.appIcon} name={app.icon.icon}></Icon>\n\t\t\t\t)}\n\t\t\t\t<div className={classes.appName}>{app.name}</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\trender() {\n\t\tconst { background, openApps, classes, apps, onLaunchApp } = this.props;\n\t\tconst { openWindows, filterAppQuery } = this.state;\n\t\treturn (\n\t\t\t<div className={classes.root} style={{ background }}>\n\t\t\t\t{openApps.map((app) => (\n\t\t\t\t\t<ConnectionContext.Provider\n\t\t\t\t\t\tkey={app.id}\n\t\t\t\t\t\tvalue={{\n\t\t\t\t\t\t\thost: reactFullstackConnectionManager.host,\n\t\t\t\t\t\t\tport: app.port,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t{...reactFullstackConnectionManager.connect(\n\t\t\t\t\t\t\t\tapp.port,\n\t\t\t\t\t\t\t\t\"nativeHost\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t))}\n\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t<div className={classes.switchToDesktopButton}>\n\t\t\t\t\t\t<Icon width={40} height={40} name=\"VscMultipleWindows\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Link>\n\t\t\t\t<div className={classes.appContainer}>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tclassName={classes.appFilter}\n\t\t\t\t\t\tborderBottom={false}\n\t\t\t\t\t\tplaceholder=\"search app\"\n\t\t\t\t\t\tvalue={filterAppQuery}\n\t\t\t\t\t\tonChange={(filterAppQuery) => this.setState({ filterAppQuery })}\n\t\t\t\t\t></TextField>\n\t\t\t\t\t{openWindows.length !== 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className={classes.appGrid}>\n\t\t\t\t\t\t\t\t{openWindows\n\t\t\t\t\t\t\t\t\t.filter((app) =>\n\t\t\t\t\t\t\t\t\t\tfilterAppQuery ? app.name.includes(filterAppQuery) : true\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.map((openWindow, index) =>\n\t\t\t\t\t\t\t\t\t\tthis.renderAppGrid(\n\t\t\t\t\t\t\t\t\t\t\topenWindow,\n\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t\t\twindowManager.updateState(openWindow.id, {\n\t\t\t\t\t\t\t\t\t\t\t\t\tminimized: !openWindow.state.minimized,\n\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<hr className={classes.hr} />\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className={classes.appGrid}>\n\t\t\t\t\t\t{apps\n\t\t\t\t\t\t\t.filter((app) =>\n\t\t\t\t\t\t\t\tfilterAppQuery\n\t\t\t\t\t\t\t\t\t? app.displayName.includes(filterAppQuery) ||\n\t\t\t\t\t\t\t\t\t  app.description.includes(filterAppQuery) ||\n\t\t\t\t\t\t\t\t\t  app.appName.includes(filterAppQuery)\n\t\t\t\t\t\t\t\t\t: true\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((app, index) =>\n\t\t\t\t\t\t\t\tthis.renderAppGrid(\n\t\t\t\t\t\t\t\t\t{ name: app.displayName, icon: app.icon },\n\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t() => app && onLaunchApp({ name: app.appName, params: {} }),\n\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(Desktop);\n","import React from \"react\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport WindowInterface from \"@web-desktop-environment/interfaces/lib/views/Window\";\nimport windowManager from \"@state/WindowManager\";\nimport { ConnectionContext } from \"@root/contexts\";\n\nclass Window extends Component<WindowInterface, {}> {\n\tid!: number;\n\twindow?: globalThis.Window;\n\n\tstatic contextType = ConnectionContext;\n\tcontext!: React.ContextType<typeof ConnectionContext>;\n\n\tisUnmounted = false;\n\topenWindow = () => {\n\t\tthis.window =\n\t\t\twindow.open(\n\t\t\t\t`${window.location.origin}/native/client/connect/${this.context?.host}/${this.context?.port}`,\n\t\t\t\t\"\",\n\t\t\t\t`width=${this.props.window.width},height=${this.props.window.height}`\n\t\t\t) || undefined;\n\t\tif (this.window) {\n\t\t\tconst { position } = this.props.window;\n\t\t\tif (position) {\n\t\t\t\tthis.window.moveTo(position.x, position.y);\n\t\t\t}\n\t\t\tconst closeInterval = setInterval(() => {\n\t\t\t\tif (this.window?.closed) {\n\t\t\t\t\tif (!this.isUnmounted) {\n\t\t\t\t\t\tthis.props.onClose();\n\t\t\t\t\t\twindowManager.closeWindow(this.id);\n\t\t\t\t\t}\n\t\t\t\t\tclearInterval(closeInterval);\n\t\t\t\t}\n\t\t\t}, 250);\n\t\t}\n\t};\n\n\tcomponentDidMount = () => {\n\t\twindow.addEventListener(\"unload\", () => {\n\t\t\tthis.window?.close();\n\t\t});\n\t\tthis.id = windowManager.addWindow(this.props.name, this.props.icon, {\n\t\t\tminimized: this.props.window.minimized || false,\n\t\t});\n\t\twindowManager.emitter.on(\"maximizeWindow\", ({ id }) => {\n\t\t\tif (id === this.id) {\n\t\t\t\tif (!this.window) {\n\t\t\t\t\tthis.openWindow();\n\t\t\t\t} else {\n\t\t\t\t\tthis.window.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\twindowManager.emitter.on(\"minimizeWindow\", ({ id }) => {\n\t\t\tif (id === this.id) {\n\t\t\t\tif (!this.window) {\n\t\t\t\t\tthis.openWindow();\n\t\t\t\t}\n\t\t\t\tthis.window?.blur();\n\t\t\t}\n\t\t});\n\t\tthis.openWindow();\n\t};\n\n\tcomponentWillUnmount = () => {\n\t\tthis.isUnmounted = true;\n\t\tthis.window?.close();\n\t\twindowManager.closeWindow(this.id);\n\t};\n\n\trender() {\n\t\treturn <></>;\n\t}\n}\n\nexport default Window;\n","import WindowInterface, {\n\tWindowState,\n} from \"@web-desktop-environment/interfaces/lib/views/Window\";\nimport { Component } from \"@react-fullstack/fullstack\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n\twithStyles,\n\tWithStyles,\n\tcreateStyles,\n\tWithTheme,\n\twithTheme,\n\tmakeStyles,\n} from \"@material-ui/styles\";\nimport { Theme } from \"@web-desktop-environment/interfaces/lib/shared/settings\";\n\nconst styles = (theme: Theme) =>\n\tcreateStyles({\n\t\tcontainer: {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t\tright: 0,\n\t\t\tleft: 0,\n\t\t\tjustifyContent: \"center\",\n\t\t\tbackground: theme.background.main,\n\t\t\tdisplay: \"flex\",\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tzIndex: 2,\n\t\t},\n\t});\n\nconst useStyle = makeStyles({\n\timage: {\n\t\tposition: \"absolute\",\n\t\ttransition: \"transform 400ms\",\n\t\tzIndex: 1,\n\t},\n});\n\nexport const LocationBasedImage = ({ background }: { background: string }) => {\n\tconst classes = useStyle();\n\tconst [top, setTop] = useState(0);\n\tconst [left, setLeft] = useState(0);\n\tuseEffect(() => {\n\t\tconst loop = setInterval(() => {\n\t\t\tif (window.screen.availWidth - window.innerWidth === 0) {\n\t\t\t\tsetTop(0);\n\t\t\t\tsetLeft(0);\n\t\t\t} else {\n\t\t\t\tsetTop(window.screenY);\n\t\t\t\tsetLeft(window.screenX);\n\t\t\t}\n\t\t}, 500);\n\t\treturn () => clearInterval(loop);\n\t}, []);\n\treturn (\n\t\t<div\n\t\t\tclassName={classes.image}\n\t\t\tstyle={{\n\t\t\t\tbackground,\n\t\t\t\twidth: window.screen.width,\n\t\t\t\theight: window.screen.height,\n\t\t\t\ttransform: `translate(\n\t\t\t\t  -${left && left % window.screen.availWidth}px,\n\t\t\t\t  -${top && top - 70}px\n\t\t\t\t   )`,\n\t\t\t}}\n\t\t/>\n\t);\n};\n\nclass Window extends Component<\n\tWindowInterface,\n\t{},\n\tWithStyles<typeof styles> & WithTheme<Theme>\n> {\n\tget windowState(): WindowState {\n\t\treturn {\n\t\t\tsize: { height: window.innerHeight, width: window.innerWidth },\n\t\t\tminimized: window.document.hidden,\n\t\t\tposition: {\n\t\t\t\tx: window.screenX,\n\t\t\t\ty: window.screenY,\n\t\t\t},\n\t\t};\n\t}\n\tcomponentDidMount = () => {\n\t\tif (window.opener) {\n\t\t\twindow.addEventListener(\"resize\", () => {\n\t\t\t\tthis.props.setWindowState(this.windowState);\n\t\t\t});\n\t\t\twindow.addEventListener(\"visibilitychange\", () => {\n\t\t\t\tthis.props.setWindowState(this.windowState);\n\t\t\t});\n\t\t\tlet positionX = window.screenX;\n\t\t\tlet positionY = window.screenY;\n\t\t\tsetInterval(() => {\n\t\t\t\tif (positionX !== window.screenX || positionY !== window.screenY) {\n\t\t\t\t\tpositionX = window.screenX;\n\t\t\t\t\tpositionY = window.screenY;\n\t\t\t\t\tthis.props.setWindowState(this.windowState);\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { classes, background } = this.props;\n\t\tdocument.title = this.props.title;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className={classes.container}>{this.props.children}</div>\n\t\t\t\t{this.props.theme.type === \"transparent\" && (\n\t\t\t\t\t<LocationBasedImage background={background} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withTheme(withStyles(styles, { withTheme: true })(Window));\n","import React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Login from \"@root/loginScreen/Login\";\nimport Demo from \"@root/demo/App\";\nimport \"@root/index.css\";\nimport * as webViews from \"@root/views\";\nimport * as webViewsWindow from \"@root/views/windowViews\";\nimport * as nativeViewsHost from \"@root/views/native/hostViews\";\nimport * as nativeViewsClient from \"@root/views/native/clientViews\";\nimport \"typeface-jetbrains-mono\";\nimport { defaultTheme } from \"@root/theme\";\nimport { ThemeProvider as TP } from \"@material-ui/styles\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { ConnectionContext } from \"./contexts\";\nimport { Client } from \"@react-fullstack/fullstack-socket-client\";\nimport StateComponent from \"@components/stateComponent\";\nimport setUpDocument from \"@utils/setupDocument\";\n\ntype Views = \"web\" | \"webWindow\" | \"nativeHost\" | \"nativeClient\";\n\nconst viewsMap = {\n\tweb: webViews,\n\tnativeHost: nativeViewsHost,\n\tnativeClient: nativeViewsClient,\n\twebWindow: webViewsWindow,\n};\n\nclass ReactFullstackConnectionManager {\n\tpublic readonly host: string;\n\tpublic readonly https: boolean;\n\tconstructor(host: string, https: boolean) {\n\t\tthis.host = host;\n\t\tthis.https = https;\n\t}\n\tconnect = <V extends Views>(\n\t\tport: number,\n\t\tviews: V\n\t): {\n\t\tport: number;\n\t\thost: string;\n\t\tviews: typeof viewsMap[V];\n\t\tsocketOptions: SocketIOClient.ConnectOpts;\n\t} => {\n\t\treturn {\n\t\t\thost: `${this.https ? \"https\" : \"http\"}://${this.host}`,\n\t\t\tport,\n\t\t\tviews: { ...viewsMap[views] },\n\t\t\tsocketOptions: {\n\t\t\t\ttransports: [\"websocket\"],\n\t\t\t},\n\t\t};\n\t};\n}\n\nexport let reactFullstackConnectionManager: ReactFullstackConnectionManager;\n\nexport const connectToServer = (\n\thost: string,\n\tuseHttps: boolean,\n\tport: number,\n\tviews: Views\n) => {\n\treactFullstackConnectionManager = new ReactFullstackConnectionManager(\n\t\thost,\n\t\tuseHttps\n\t);\n\treturn reactFullstackConnectionManager.connect(port, views);\n};\n\nconst App = () => {\n\tconst [login, setLogin] = useState<{\n\t\tisLoggedIn: boolean;\n\t\thost: string;\n\t\tport: number;\n\t}>({ host: \"localhost\", port: 5000, isLoggedIn: false });\n\treturn (\n\t\t<TP theme={defaultTheme}>\n\t\t\t<Router>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/demo\">{() => <Demo />}</Route>\n\t\t\t\t\t<Route path=\"/native\">\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/native/connect/:host/:port/\"\n\t\t\t\t\t\t\t\trender={(login) => {\n\t\t\t\t\t\t\t\t\tconst { host, port } = login.match?.params;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<StateComponent<{}> defaultState={{}}>\n\t\t\t\t\t\t\t\t\t\t\t{() => (\n\t\t\t\t\t\t\t\t\t\t\t\t<ConnectionContext.Provider\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={{ host, port: Number(port) }}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...connectToServer(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thost,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(port),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"nativeHost\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</StateComponent>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t></Route>\n\t\t\t\t\t\t\t<Route path=\"/native/client/connect/:host/:port/\">\n\t\t\t\t\t\t\t\t{(login) => {\n\t\t\t\t\t\t\t\t\tconst { host, port } = login.match?.params || {};\n\n\t\t\t\t\t\t\t\t\tif (host && port) {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<ConnectionContext.Provider\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={{ host, port: Number(port) }}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{...connectToServer(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thost,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(port),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"nativeClient\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t<Route>\n\t\t\t\t\t\t\t\t{() =>\n\t\t\t\t\t\t\t\t\tlogin.isLoggedIn ? (\n\t\t\t\t\t\t\t\t\t\t<ConnectionContext.Provider value={login}>\n\t\t\t\t\t\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t\t\t\t\t\t{...connectToServer(\n\t\t\t\t\t\t\t\t\t\t\t\t\tlogin.host,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(login.port),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"nativeHost\"\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Login\n\t\t\t\t\t\t\t\t\t\t\tonLogin={(host, port) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetLogin({ host, port, isLoggedIn: true })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route>\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route path=\"/connect/:host/:port/\">\n\t\t\t\t\t\t\t\t{(login) => {\n\t\t\t\t\t\t\t\t\tconst { host, port } = login.match?.params || {};\n\t\t\t\t\t\t\t\t\tif (host && port) {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<ConnectionContext.Provider\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={{ host, port: Number(port) }}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{...connectToServer(host, false, Number(port), \"web\")}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t<Route>\n\t\t\t\t\t\t\t\t{() =>\n\t\t\t\t\t\t\t\t\tlogin.isLoggedIn ? (\n\t\t\t\t\t\t\t\t\t\t<ConnectionContext.Provider value={login}>\n\t\t\t\t\t\t\t\t\t\t\t<Client<{}>\n\t\t\t\t\t\t\t\t\t\t\t\t{...connectToServer(\n\t\t\t\t\t\t\t\t\t\t\t\t\tlogin.host,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(login.port),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"web\"\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ConnectionContext.Provider>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Login\n\t\t\t\t\t\t\t\t\t\t\tonLogin={(host, port) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetLogin({ host, port, isLoggedIn: true })\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t\t</TP>\n\t);\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\nsetUpDocument();\n","export default function setUpDocument() {\n\tdocument.addEventListener(\"contextmenu\", (e) => {\n\t\te.preventDefault();\n\t});\n}\n","import { Icon } from \"@web-desktop-environment/interfaces/lib/shared/icon\";\nimport Emitter from \"@utils/Emitter\";\n\nexport interface Window {\n\tid: number;\n\tname: string;\n\ticon: Icon;\n\tstate: WindowState;\n}\n\ninterface WindowState {\n\tminimized: boolean;\n}\n\ninterface WindowManagerEvent {\n\tmaximizeWindow: {\n\t\tid: number;\n\t};\n\tminimizeWindow: {\n\t\tid: number;\n\t};\n\taddWindow: {\n\t\twindow: Window;\n\t};\n\tcloseWindow: {\n\t\twindow: Window;\n\t};\n\tsetActiveWindow: {\n\t\tid: number;\n\t};\n\tupdateZIndex: {\n\t\tid: number;\n\t\tlayer: number;\n\t};\n}\n\nclass WindowManager {\n\tpublic activeWindowId: number | undefined;\n\tpublic windows: Window[] = [];\n\tpublic windowsLayers: number[] = [];\n\n\tpublic emitter = new Emitter<WindowManagerEvent>();\n\n\tpublic readonly windowsMinMaxLayer = { min: 5, max: 200 };\n\n\tpublic reloadWindowsLayers = () => {\n\t\tlet currentZIndex = this.windowsMinMaxLayer.max;\n\t\t[...this.windowsLayers].reverse().forEach((id) => {\n\t\t\tthis.emitter.call(\"updateZIndex\", { id, layer: currentZIndex });\n\t\t\tif (currentZIndex > this.windowsMinMaxLayer.min) {\n\t\t\t\tcurrentZIndex--;\n\t\t\t}\n\t\t});\n\t};\n\n\tpublic setActiveWindow = (id: number) => {\n\t\tif (this.activeWindowId !== id) {\n\t\t\tthis.activeWindowId = id;\n\t\t\tthis.emitter.call(\"setActiveWindow\", { id });\n\t\t\tthis.windowsLayers = this.windowsLayers.filter(\n\t\t\t\t(currentId) => currentId !== id\n\t\t\t);\n\t\t\tthis.windowsLayers.push(id);\n\t\t\tthis.reloadWindowsLayers();\n\t\t}\n\t};\n\tprivate idIndex = 0;\n\n\tpublic addWindow = (name: string, icon: Icon, state: WindowState) => {\n\t\tconst id = this.idIndex;\n\t\tthis.idIndex++;\n\t\tconst newWindow = { id, name, icon, state };\n\t\tthis.windows.push(newWindow);\n\t\tthis.emitter.call(\"addWindow\", { window: newWindow });\n\t\tthis.windowsLayers.push(id);\n\t\treturn id;\n\t};\n\n\tpublic closeWindow = (id: number) => {\n\t\tconst windowToClose = this.windows.find((w) => w.id === id);\n\t\tif (windowToClose) {\n\t\t\tthis.windows = this.windows.filter((w) => w.id !== id);\n\t\t\tthis.emitter.call(\"closeWindow\", { window: windowToClose });\n\t\t\tthis.windowsLayers = this.windowsLayers.filter(\n\t\t\t\t(currentId) => currentId !== id\n\t\t\t);\n\t\t}\n\t};\n\tpublic updateState = (id: number, newState: WindowState) => {\n\t\tthis.setActiveWindow(id);\n\t\tconst currentWindow = this.windows.find((w) => w.id === id);\n\t\tif (currentWindow) {\n\t\t\tconst { minimized } = currentWindow.state;\n\t\t\tcurrentWindow.state = newState;\n\t\t\tif (newState.minimized !== minimized) {\n\t\t\t\tif (newState.minimized) {\n\t\t\t\t\tthis.emitter.call(\"minimizeWindow\", { id });\n\t\t\t\t} else {\n\t\t\t\t\tthis.emitter.call(\"maximizeWindow\", { id });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport default new WindowManager();\n","import Emitter from \"@utils/Emitter\";\n\ntype ConnectionStatus = \"disconnected\" | \"connected\" | \"connecting\";\n\ninterface GTKBridgeEvents {\n\tstatus: ConnectionStatus;\n}\n\nexport const GTKBridgeEmitter = new Emitter<GTKBridgeEvents>();\n\nexport let status: ConnectionStatus = \"disconnected\";\n\nGTKBridgeEmitter.on(\"status\", (newStatus) => (status = newStatus));\n"],"sourceRoot":""}